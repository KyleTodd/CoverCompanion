import{S as F,i as V,s as j,e as k,a as y,c as P,d as c,m as g,o as L,n as D,f as C,q as z,t as E,v as N,I as A,w as q,y as M}from"./index.28ceac01.js";function T(_,e,t){const i=_.slice();return i[8]=e[t],i}function U(_,e,t){const i=_.slice();return i[11]=e[t],i}function B(_,e){let t,i=e[11]+"",h,u;return{key:_,first:null,c(){t=k("option"),h=E(i),t.__value=u=e[11],t.value=t.__value,this.first=t},m(r,f){P(r,t,f),c(t,h)},p(r,f){e=r,f&1&&i!==(i=e[11]+"")&&N(h,i),f&1&&u!==(u=e[11])&&(t.__value=u,t.value=t.__value)},d(r){r&&C(t)}}}function O(_){let e,t,i,h,u=[],r=new Map,f,a=_[2];const b=n=>n[8].PDF_ID;for(let n=0;n<a.length;n+=1){let l=T(_,a,n),m=b(l);r.set(m,u[n]=R(m,l))}return{c(){e=k("h2"),t=E("Policies for "),i=E(_[1]),h=y();for(let n=0;n<u.length;n+=1)u[n].c();f=A()},m(n,l){P(n,e,l),c(e,t),c(e,i),P(n,h,l);for(let m=0;m<u.length;m+=1)u[m].m(n,l);P(n,f,l)},p(n,l){l&2&&N(i,n[1]),l&36&&(a=n[2],u=L(u,l,b,1,n,a,r,f.parentNode,q,R,f,T))},d(n){n&&C(e),n&&C(h);for(let l=0;l<u.length;l+=1)u[l].d(n);n&&C(f)}}}function R(_,e){let t,i,h=e[8].POLICY_NUMBER+"",u,r,f=e[8].TYPE+"",a,b,n,l,m,I;function w(){return e[7](e[8])}return{key:_,first:null,c(){t=k("div"),i=k("h3"),u=E(h),r=E(" - "),a=E(f),b=y(),n=k("button"),n.textContent="View Details",l=y(),this.first=t},m(d,p){P(d,t,p),c(t,i),c(i,u),c(i,r),c(i,a),c(t,b),c(t,n),c(t,l),m||(I=g(n,"click",w),m=!0)},p(d,p){e=d,p&4&&h!==(h=e[8].POLICY_NUMBER+"")&&N(u,h),p&4&&f!==(f=e[8].TYPE+"")&&N(a,f)},d(d){d&&C(t),m=!1,I()}}}function S(_){let e,t,i,h,u=_[3].POLICY_NUMBER+"",r,f,a,b,n=_[3].TYPE+"",l,m,I,w,d=_[3].DESCRIPTION+"",p;return{c(){e=k("h2"),e.textContent="Policy Details",t=y(),i=k("p"),h=E("Policy Number: "),r=E(u),f=y(),a=k("p"),b=E("Type: "),l=E(n),m=y(),I=k("p"),w=E("Description: "),p=E(d)},m(s,o){P(s,e,o),P(s,t,o),P(s,i,o),c(i,h),c(i,r),P(s,f,o),P(s,a,o),c(a,b),c(a,l),P(s,m,o),P(s,I,o),c(I,w),c(I,p)},p(s,o){o&8&&u!==(u=s[3].POLICY_NUMBER+"")&&N(r,u),o&8&&n!==(n=s[3].TYPE+"")&&N(l,n),o&8&&d!==(d=s[3].DESCRIPTION+"")&&N(p,d)},d(s){s&&C(e),s&&C(t),s&&C(i),s&&C(f),s&&C(a),s&&C(m),s&&C(I)}}}function G(_){let e,t,i,h,u,r,f,a=[],b=new Map,n,l,m,I,w=_[0];const d=o=>o[11];for(let o=0;o<w.length;o+=1){let v=U(_,w,o),Y=d(v);b.set(Y,a[o]=B(Y,v))}let p=_[1]&&O(_),s=_[3]&&S(_);return{c(){e=k("main"),t=k("h1"),t.textContent="Insurance Broker Portal",i=y(),h=k("h2"),h.textContent="Select a User",u=y(),r=k("select"),f=k("option"),f.textContent="Select a user...";for(let o=0;o<a.length;o+=1)a[o].c();n=y(),p&&p.c(),l=y(),s&&s.c(),f.disabled=!0,f.selected=!0,f.__value="",f.value=f.__value},m(o,v){P(o,e,v),c(e,t),c(e,i),c(e,h),c(e,u),c(e,r),c(r,f);for(let Y=0;Y<a.length;Y+=1)a[Y].m(r,null);c(e,n),p&&p.m(e,null),c(e,l),s&&s.m(e,null),m||(I=g(r,"change",_[6]),m=!0)},p(o,[v]){v&1&&(w=o[0],a=L(a,v,d,1,o,w,b,r,q,B,null,U)),o[1]?p?p.p(o,v):(p=O(o),p.c(),p.m(e,l)):p&&(p.d(1),p=null),o[3]?s?s.p(o,v):(s=S(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:D,o:D,d(o){o&&C(e);for(let v=0;v<a.length;v+=1)a[v].d();p&&p.d(),s&&s.d(),m=!1,I()}}}function H(_,e,t){let i=[],h=null,u=[],r=null;z(async()=>{try{const l=await M.get("http://localhost:3000/usernames",{withCredentials:!0});t(0,i=l.data)}catch(l){console.error("Error fetching users:",l)}});async function f(l){t(2,u=[]),t(3,r=null),t(1,h=l);try{const m=await M.get(`http://localhost:3000/getPolicies?username=${l}`,{withCredentials:!0});t(2,u=m.data)}catch(m){console.error(`Error fetching policies for ${l}:`,m)}}function a(l){t(3,r=l)}return[i,h,u,r,f,a,l=>f(l.target.value),l=>a(l)]}class K extends F{constructor(e){super(),V(this,e,H,G,j,{})}}export{K as default};
