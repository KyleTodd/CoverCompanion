var bs=Object.defineProperty;var _s=(V,c,K)=>c in V?bs(V,c,{enumerable:!0,configurable:!0,writable:!0,value:K}):V[c]=K;var Bt=(V,c,K)=>(_s(V,typeof c!="symbol"?c+"":c,K),K),ye=(V,c,K)=>{if(!c.has(V))throw TypeError("Cannot "+K)};var f=(V,c,K)=>(ye(V,c,"read from private field"),K?K.call(V):c.get(V)),Z=(V,c,K)=>{if(c.has(V))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(V):c.set(V,K)},gt=(V,c,K,b)=>(ye(V,c,"write to private field"),b?b.call(V,K):c.set(V,K),K),fe=(V,c,K,b)=>({set _(w){gt(V,c,w,K)},get _(){return f(V,c,b)}}),at=(V,c,K)=>(ye(V,c,"access private method"),K);import{X as commonjsGlobal,Y as getAugmentedNamespace,S as SvelteComponent,i as init,s as safe_not_equal,e as element,a as space,b as attr,h as set_style,c as insert,d as append,m as listen,n as noop,f as detach,r as run_all,g as component_subscribe,q as onMount,J as onDestroy,Z as params,x as goto,y as axios,_ as binding_callbacks}from"./index.28ceac01.js";function commonjsRequire(V){throw new Error('Could not dynamically require "'+V+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},path={exports:{}},util={},isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(c){return c&&typeof c=="object"&&typeof c.copy=="function"&&typeof c.fill=="function"&&typeof c.readUInt8=="function"}),isBufferBrowser}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(c,K){c.super_=K,c.prototype=Object.create(K.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:inherits_browser.exports=function(c,K){c.super_=K;var b=function(){};b.prototype=K.prototype,c.prototype=new b,c.prototype.constructor=c}),inherits_browser.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(V){var c=/%[sdj%]/g;V.format=function(B){if(!T(B)){for(var U=[],J=0;J<arguments.length;J++)U.push(w(arguments[J]));return U.join(" ")}for(var J=1,pt=arguments,vt=pt.length,At=String(B).replace(c,function(L){if(L==="%%")return"%";if(J>=vt)return L;switch(L){case"%s":return String(pt[J++]);case"%d":return Number(pt[J++]);case"%j":try{return JSON.stringify(pt[J++])}catch{return"[Circular]"}default:return L}}),bt=pt[J];J<vt;bt=pt[++J])r(bt)||!l(bt)?At+=" "+bt:At+=" "+w(bt);return At},V.deprecate=function(B,U){if(e(commonjsGlobal.process))return function(){return V.deprecate(B,U).apply(this,arguments)};if(process.noDeprecation===!0)return B;var J=!1;function pt(){if(!J){if(process.throwDeprecation)throw new Error(U);process.traceDeprecation?console.trace(U):console.error(U),J=!0}return B.apply(this,arguments)}return pt};var K={},b;V.debuglog=function(B){if(e(b)&&(b={}.NODE_DEBUG||""),B=B.toUpperCase(),!K[B])if(new RegExp("\\b"+B+"\\b","i").test(b)){var U=process.pid;K[B]=function(){var J=V.format.apply(V,arguments);console.error("%s %d: %s",B,U,J)}}else K[B]=function(){};return K[B]};function w(B,U){var J={seen:[],stylize:j};return arguments.length>=3&&(J.depth=arguments[2]),arguments.length>=4&&(J.colors=arguments[3]),p(U)?J.showHidden=U:U&&V._extend(J,U),e(J.showHidden)&&(J.showHidden=!1),e(J.depth)&&(J.depth=2),e(J.colors)&&(J.colors=!1),e(J.customInspect)&&(J.customInspect=!0),J.colors&&(J.stylize=X),G(J,B,J.depth)}V.inspect=w,w.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},w.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function X(B,U){var J=w.styles[U];return J?"\x1B["+w.colors[J][0]+"m"+B+"\x1B["+w.colors[J][1]+"m":B}function j(B,U){return B}function st(B){var U={};return B.forEach(function(J,pt){U[J]=!0}),U}function G(B,U,J){if(B.customInspect&&U&&x(U.inspect)&&U.inspect!==V.inspect&&!(U.constructor&&U.constructor.prototype===U)){var pt=U.inspect(J,B);return T(pt)||(pt=G(B,pt,J)),pt}var vt=P(B,U);if(vt)return vt;var At=Object.keys(U),bt=st(At);if(B.showHidden&&(At=Object.getOwnPropertyNames(U)),g(U)&&(At.indexOf("message")>=0||At.indexOf("description")>=0))return A(U);if(At.length===0){if(x(U)){var L=U.name?": "+U.name:"";return B.stylize("[Function"+L+"]","special")}if(i(U))return B.stylize(RegExp.prototype.toString.call(U),"regexp");if(s(U))return B.stylize(Date.prototype.toString.call(U),"date");if(g(U))return A(U)}var h="",u=!1,E=["{","}"];if(o(U)&&(u=!0,E=["[","]"]),x(U)){var N=U.name?": "+U.name:"";h=" [Function"+N+"]"}if(i(U)&&(h=" "+RegExp.prototype.toString.call(U)),s(U)&&(h=" "+Date.prototype.toUTCString.call(U)),g(U)&&(h=" "+A(U)),At.length===0&&(!u||U.length==0))return E[0]+h+E[1];if(J<0)return i(U)?B.stylize(RegExp.prototype.toString.call(U),"regexp"):B.stylize("[Object]","special");B.seen.push(U);var O;return u?O=F(B,U,J,bt,At):O=At.map(function(H){return I(B,U,J,bt,H,u)}),B.seen.pop(),d(O,h,E)}function P(B,U){if(e(U))return B.stylize("undefined","undefined");if(T(U)){var J="'"+JSON.stringify(U).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return B.stylize(J,"string")}if(C(U))return B.stylize(""+U,"number");if(p(U))return B.stylize(""+U,"boolean");if(r(U))return B.stylize("null","null")}function A(B){return"["+Error.prototype.toString.call(B)+"]"}function F(B,U,J,pt,vt){for(var At=[],bt=0,L=U.length;bt<L;++bt)lt(U,String(bt))?At.push(I(B,U,J,pt,String(bt),!0)):At.push("");return vt.forEach(function(h){h.match(/^\d+$/)||At.push(I(B,U,J,pt,h,!0))}),At}function I(B,U,J,pt,vt,At){var bt,L,h;if(h=Object.getOwnPropertyDescriptor(U,vt)||{value:U[vt]},h.get?h.set?L=B.stylize("[Getter/Setter]","special"):L=B.stylize("[Getter]","special"):h.set&&(L=B.stylize("[Setter]","special")),lt(pt,vt)||(bt="["+vt+"]"),L||(B.seen.indexOf(h.value)<0?(r(J)?L=G(B,h.value,null):L=G(B,h.value,J-1),L.indexOf(`
`)>-1&&(At?L=L.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):L=`
`+L.split(`
`).map(function(u){return"   "+u}).join(`
`))):L=B.stylize("[Circular]","special")),e(bt)){if(At&&vt.match(/^\d+$/))return L;bt=JSON.stringify(""+vt),bt.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(bt=bt.substr(1,bt.length-2),bt=B.stylize(bt,"name")):(bt=bt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),bt=B.stylize(bt,"string"))}return bt+": "+L}function d(B,U,J){var pt=B.reduce(function(vt,At){return At.indexOf(`
`)>=0,vt+At.replace(/\u001b\[\d\d?m/g,"").length+1},0);return pt>60?J[0]+(U===""?"":U+`
 `)+" "+B.join(`,
  `)+" "+J[1]:J[0]+U+" "+B.join(", ")+" "+J[1]}function o(B){return Array.isArray(B)}V.isArray=o;function p(B){return typeof B=="boolean"}V.isBoolean=p;function r(B){return B===null}V.isNull=r;function y(B){return B==null}V.isNullOrUndefined=y;function C(B){return typeof B=="number"}V.isNumber=C;function T(B){return typeof B=="string"}V.isString=T;function _(B){return typeof B=="symbol"}V.isSymbol=_;function e(B){return B===void 0}V.isUndefined=e;function i(B){return l(B)&&D(B)==="[object RegExp]"}V.isRegExp=i;function l(B){return typeof B=="object"&&B!==null}V.isObject=l;function s(B){return l(B)&&D(B)==="[object Date]"}V.isDate=s;function g(B){return l(B)&&(D(B)==="[object Error]"||B instanceof Error)}V.isError=g;function x(B){return typeof B=="function"}V.isFunction=x;function a(B){return B===null||typeof B=="boolean"||typeof B=="number"||typeof B=="string"||typeof B=="symbol"||typeof B>"u"}V.isPrimitive=a,V.isBuffer=requireIsBufferBrowser();function D(B){return Object.prototype.toString.call(B)}function W(B){return B<10?"0"+B.toString(10):B.toString(10)}var tt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function rt(){var B=new Date,U=[W(B.getHours()),W(B.getMinutes()),W(B.getSeconds())].join(":");return[B.getDate(),tt[B.getMonth()],U].join(" ")}V.log=function(){console.log("%s - %s",rt(),V.format.apply(V,arguments))},V.inherits=requireInherits_browser(),V._extend=function(B,U){if(!U||!l(U))return B;for(var J=Object.keys(U),pt=J.length;pt--;)B[J[pt]]=U[J[pt]];return B};function lt(B,U){return Object.prototype.hasOwnProperty.call(B,U)}}(util)),util}var hasRequiredPath;function requirePath(){if(hasRequiredPath)return path.exports;hasRequiredPath=1;var V=process.platform==="win32",c=requireUtil();function K(d,o){for(var p=[],r=0;r<d.length;r++){var y=d[r];!y||y==="."||(y===".."?p.length&&p[p.length-1]!==".."?p.pop():o&&p.push(".."):p.push(y))}return p}function b(d){for(var o=d.length-1,p=0;p<=o&&!d[p];p++);for(var r=o;r>=0&&!d[r];r--);return p===0&&r===o?d:p>r?[]:d.slice(p,r+1)}var w=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,X=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,j={};function st(d){var o=w.exec(d),p=(o[1]||"")+(o[2]||""),r=o[3]||"",y=X.exec(r),C=y[1],T=y[2],_=y[3];return[p,C,T,_]}function G(d){var o=w.exec(d),p=o[1]||"",r=!!p&&p[1]!==":";return{device:p,isUnc:r,isAbsolute:r||!!o[2],tail:o[3]}}function P(d){return"\\\\"+d.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}j.resolve=function(){for(var d="",o="",p=!1,r=arguments.length-1;r>=-1;r--){var y;if(r>=0?y=arguments[r]:d?(y=process.env["="+d],(!y||y.substr(0,3).toLowerCase()!==d.toLowerCase()+"\\")&&(y=d+"\\")):y=process.cwd(),c.isString(y)){if(!y)continue}else throw new TypeError("Arguments to path.resolve must be strings");var C=G(y),T=C.device,_=C.isUnc,e=C.isAbsolute,i=C.tail;if(!(T&&d&&T.toLowerCase()!==d.toLowerCase())&&(d||(d=T),p||(o=i+"\\"+o,p=e),d&&p))break}return _&&(d=P(d)),o=K(o.split(/[\\\/]+/),!p).join("\\"),d+(p?"\\":"")+o||"."},j.normalize=function(d){var o=G(d),p=o.device,r=o.isUnc,y=o.isAbsolute,C=o.tail,T=/[\\\/]$/.test(C);return C=K(C.split(/[\\\/]+/),!y).join("\\"),!C&&!y&&(C="."),C&&T&&(C+="\\"),r&&(p=P(p)),p+(y?"\\":"")+C},j.isAbsolute=function(d){return G(d).isAbsolute},j.join=function(){for(var d=[],o=0;o<arguments.length;o++){var p=arguments[o];if(!c.isString(p))throw new TypeError("Arguments to path.join must be strings");p&&d.push(p)}var r=d.join("\\");return/^[\\\/]{2}[^\\\/]/.test(d[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),j.normalize(r)},j.relative=function(d,o){d=j.resolve(d),o=j.resolve(o);for(var p=d.toLowerCase(),r=o.toLowerCase(),y=b(o.split("\\")),C=b(p.split("\\")),T=b(r.split("\\")),_=Math.min(C.length,T.length),e=_,i=0;i<_;i++)if(C[i]!==T[i]){e=i;break}if(e==0)return o;for(var l=[],i=e;i<C.length;i++)l.push("..");return l=l.concat(y.slice(e)),l.join("\\")},j._makeLong=function(d){if(!c.isString(d))return d;if(!d)return"";var o=j.resolve(d);return/^[a-zA-Z]\:\\/.test(o)?"\\\\?\\"+o:/^\\\\[^?.]/.test(o)?"\\\\?\\UNC\\"+o.substring(2):d},j.dirname=function(d){var o=st(d),p=o[0],r=o[1];return!p&&!r?".":(r&&(r=r.substr(0,r.length-1)),p+r)},j.basename=function(d,o){var p=st(d)[2];return o&&p.substr(-1*o.length)===o&&(p=p.substr(0,p.length-o.length)),p},j.extname=function(d){return st(d)[3]},j.format=function(d){if(!c.isObject(d))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof d);var o=d.root||"";if(!c.isString(o))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof d.root);var p=d.dir,r=d.base||"";return p?p[p.length-1]===j.sep?p+r:p+j.sep+r:r},j.parse=function(d){if(!c.isString(d))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof d);var o=st(d);if(!o||o.length!==4)throw new TypeError("Invalid path '"+d+"'");return{root:o[0],dir:o[0]+o[1].slice(0,-1),base:o[2],ext:o[3],name:o[2].slice(0,o[2].length-o[3].length)}},j.sep="\\",j.delimiter=";";var A=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,F={};function I(d){return A.exec(d).slice(1)}return F.resolve=function(){for(var d="",o=!1,p=arguments.length-1;p>=-1&&!o;p--){var r=p>=0?arguments[p]:process.cwd();if(c.isString(r)){if(!r)continue}else throw new TypeError("Arguments to path.resolve must be strings");d=r+"/"+d,o=r[0]==="/"}return d=K(d.split("/"),!o).join("/"),(o?"/":"")+d||"."},F.normalize=function(d){var o=F.isAbsolute(d),p=d&&d[d.length-1]==="/";return d=K(d.split("/"),!o).join("/"),!d&&!o&&(d="."),d&&p&&(d+="/"),(o?"/":"")+d},F.isAbsolute=function(d){return d.charAt(0)==="/"},F.join=function(){for(var d="",o=0;o<arguments.length;o++){var p=arguments[o];if(!c.isString(p))throw new TypeError("Arguments to path.join must be strings");p&&(d?d+="/"+p:d+=p)}return F.normalize(d)},F.relative=function(d,o){d=F.resolve(d).substr(1),o=F.resolve(o).substr(1);for(var p=b(d.split("/")),r=b(o.split("/")),y=Math.min(p.length,r.length),C=y,T=0;T<y;T++)if(p[T]!==r[T]){C=T;break}for(var _=[],T=C;T<p.length;T++)_.push("..");return _=_.concat(r.slice(C)),_.join("/")},F._makeLong=function(d){return d},F.dirname=function(d){var o=I(d),p=o[0],r=o[1];return!p&&!r?".":(r&&(r=r.substr(0,r.length-1)),p+r)},F.basename=function(d,o){var p=I(d)[2];return o&&p.substr(-1*o.length)===o&&(p=p.substr(0,p.length-o.length)),p},F.extname=function(d){return I(d)[3]},F.format=function(d){if(!c.isObject(d))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof d);var o=d.root||"";if(!c.isString(o))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof d.root);var p=d.dir?d.dir+F.sep:"",r=d.base||"";return p+r},F.parse=function(d){if(!c.isString(d))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof d);var o=I(d);if(!o||o.length!==4)throw new TypeError("Invalid path '"+d+"'");return o[1]=o[1]||"",o[2]=o[2]||"",o[3]=o[3]||"",{root:o[0],dir:o[0]+o[1].slice(0,-1),base:o[2],ext:o[3],name:o[2].slice(0,o[2].length-o[3].length)}},F.sep="/",F.delimiter=":",V?path.exports=j:path.exports=F,path.exports.posix=F,path.exports.win32=j,path.exports}var rollupPluginNodeBuiltins_cjs,hasRequiredRollupPluginNodeBuiltins_cjs;function requireRollupPluginNodeBuiltins_cjs(){if(hasRequiredRollupPluginNodeBuiltins_cjs)return rollupPluginNodeBuiltins_cjs;hasRequiredRollupPluginNodeBuiltins_cjs=1;var V=requirePath(),c=new Map;c.set("process",require.resolve("process-es6")),c.set("buffer",require.resolve("buffer-es6")),c.set("util",require.resolve(V.join("..","src","es6","util"))),c.set("sys",c.get("util")),c.set("events",require.resolve(V.join("..","src","es6","events"))),c.set("stream",require.resolve(V.join("..","src","es6","stream"))),c.set("path",require.resolve(V.join("..","src","es6","path"))),c.set("querystring",require.resolve(V.join("..","src","es6","qs"))),c.set("punycode",require.resolve(V.join("..","src","es6","punycode"))),c.set("url",require.resolve(V.join("..","src","es6","url"))),c.set("string_decoder",require.resolve(V.join("..","src","es6","string-decoder"))),c.set("http",require.resolve(V.join("..","src","es6","http"))),c.set("https",require.resolve(V.join("..","src","es6","http"))),c.set("os",require.resolve(V.join("..","src","es6","os"))),c.set("assert",require.resolve(V.join("..","src","es6","assert"))),c.set("constants",require.resolve("./constants")),c.set("_stream_duplex",require.resolve(V.join("..","src","es6","readable-stream","duplex"))),c.set("_stream_passthrough",require.resolve(V.join("..","src","es6","readable-stream","passthrough"))),c.set("_stream_readable",require.resolve(V.join("..","src","es6","readable-stream","readable"))),c.set("_stream_writable",require.resolve(V.join("..","src","es6","readable-stream","writable"))),c.set("_stream_transform",require.resolve(V.join("..","src","es6","readable-stream","transform"))),c.set("timers",require.resolve(V.join("..","src","es6","timers"))),c.set("console",require.resolve(V.join("..","src","es6","console"))),c.set("vm",require.resolve(V.join("..","src","es6","vm"))),c.set("zlib",require.resolve(V.join("..","src","es6","zlib"))),c.set("tty",require.resolve(V.join("..","src","es6","tty"))),c.set("domain",require.resolve(V.join("..","src","es6","domain")));var K=require.resolve("crypto-browserify"),b=require.resolve("browserify-fs"),w=require.resolve(V.join("..","src","es6","empty"));c.set("dns",w),c.set("dgram",w),c.set("child_process",w),c.set("cluster",w),c.set("module",w),c.set("net",w),c.set("readline",w),c.set("repl",w),c.set("tls",w);var X=function(j){j=j||{};var st=w,G=w;return j.crypto&&(st=K),j.fs&&(G=b),{resolveId:function(A){if(A&&A.slice(-1)==="/"&&A.slice(0,-1),c.has(A))return c.get(A);if(A==="crypto")return st;if(A==="fs")return G}}};return rollupPluginNodeBuiltins_cjs=X,rollupPluginNodeBuiltins_cjs}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(c,K){module.exports=K()})(globalThis,()=>(()=>{var __webpack_modules__=[,(V,c)=>{var Mt;Object.defineProperty(c,"__esModule",{value:!0}),c.VerbosityLevel=c.Util=c.UnknownErrorException=c.UnexpectedResponseException=c.TextRenderingMode=c.RenderingIntentFlag=c.PromiseCapability=c.PermissionFlag=c.PasswordResponses=c.PasswordException=c.PageActionEventType=c.OPS=c.MissingPDFException=c.MAX_IMAGE_SIZE_TO_CACHE=c.LINE_FACTOR=c.LINE_DESCENT_FACTOR=c.InvalidPDFException=c.ImageKind=c.IDENTITY_MATRIX=c.FormatError=c.FeatureTest=c.FONT_IDENTITY_MATRIX=c.DocumentActionEventType=c.CMapCompressionType=c.BaseException=c.BASELINE_FACTOR=c.AnnotationType=c.AnnotationStateModelType=c.AnnotationReviewState=c.AnnotationReplyType=c.AnnotationMode=c.AnnotationMarkedState=c.AnnotationFlag=c.AnnotationFieldFlag=c.AnnotationEditorType=c.AnnotationEditorPrefix=c.AnnotationEditorParamsType=c.AnnotationBorderStyleType=c.AnnotationActionEventType=c.AbortException=void 0,c.assert=vt,c.bytesToString=R,c.createValidAbsoluteUrl=bt,c.getModificationDate=wt,c.getVerbosityLevel=B,c.info=U,c.isArrayBuffer=mt,c.isArrayEqual=Ct,c.normalizeUnicode=kt,c.objectFromMap=S,c.objectSize=m,c.setVerbosityLevel=lt,c.shadow=L,c.string32=n,c.stringToBytes=t,c.stringToPDFString=ut,c.stringToUTF8String=ht,c.unreachable=pt,c.utf8StringToString=dt,c.warn=J;const K=[1,0,0,1,0,0];c.IDENTITY_MATRIX=K;const b=[.001,0,0,.001,0,0];c.FONT_IDENTITY_MATRIX=b;const w=1e7;c.MAX_IMAGE_SIZE_TO_CACHE=w;const X=1.35;c.LINE_FACTOR=X;const j=.35;c.LINE_DESCENT_FACTOR=j;const st=j/X;c.BASELINE_FACTOR=st;const G={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};c.RenderingIntentFlag=G;const P={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};c.AnnotationMode=P;const A="pdfjs_internal_editor_";c.AnnotationEditorPrefix=A;const F={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};c.AnnotationEditorType=F;const I={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};c.AnnotationEditorParamsType=I;const d={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};c.PermissionFlag=d;const o={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};c.TextRenderingMode=o;const p={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};c.ImageKind=p;const r={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};c.AnnotationType=r;const y={MARKED:"Marked",REVIEW:"Review"};c.AnnotationStateModelType=y;const C={MARKED:"Marked",UNMARKED:"Unmarked"};c.AnnotationMarkedState=C;const T={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};c.AnnotationReviewState=T;const _={GROUP:"Group",REPLY:"R"};c.AnnotationReplyType=_;const e={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};c.AnnotationFlag=e;const i={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};c.AnnotationFieldFlag=i;const l={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};c.AnnotationBorderStyleType=l;const s={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};c.AnnotationActionEventType=s;const g={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};c.DocumentActionEventType=g;const x={O:"PageOpen",C:"PageClose"};c.PageActionEventType=x;const a={ERRORS:0,WARNINGS:1,INFOS:5};c.VerbosityLevel=a;const D={NONE:0,BINARY:1};c.CMapCompressionType=D;const W={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};c.OPS=W;const tt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};c.PasswordResponses=tt;let rt=a.WARNINGS;function lt(ct){Number.isInteger(ct)&&(rt=ct)}function B(){return rt}function U(ct){rt>=a.INFOS&&console.log(`Info: ${ct}`)}function J(ct){rt>=a.WARNINGS&&console.log(`Warning: ${ct}`)}function pt(ct){throw new Error(ct)}function vt(ct,$){ct||pt($)}function At(ct){switch(ct==null?void 0:ct.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function bt(ct,$=null,Y=null){if(!ct)return null;try{if(Y&&typeof ct=="string"){if(Y.addDefaultProtocol&&ct.startsWith("www.")){const It=ct.match(/\./g);(It==null?void 0:It.length)>=2&&(ct=`http://${ct}`)}if(Y.tryConvertEncoding)try{ct=ht(ct)}catch{}}const yt=$?new URL(ct,$):new URL(ct);if(At(yt))return yt}catch{}return null}function L(ct,$,Y,yt=!1){return Object.defineProperty(ct,$,{value:Y,enumerable:!yt,configurable:!0,writable:!1}),Y}const h=function(){function $(Y,yt){this.constructor===$&&pt("Cannot initialize BaseException."),this.message=Y,this.name=yt}return $.prototype=new Error,$.constructor=$,$}();c.BaseException=h;class u extends h{constructor($,Y){super($,"PasswordException"),this.code=Y}}c.PasswordException=u;class E extends h{constructor($,Y){super($,"UnknownErrorException"),this.details=Y}}c.UnknownErrorException=E;class N extends h{constructor($){super($,"InvalidPDFException")}}c.InvalidPDFException=N;class O extends h{constructor($){super($,"MissingPDFException")}}c.MissingPDFException=O;class H extends h{constructor($,Y){super($,"UnexpectedResponseException"),this.status=Y}}c.UnexpectedResponseException=H;class M extends h{constructor($){super($,"FormatError")}}c.FormatError=M;class k extends h{constructor($){super($,"AbortException")}}c.AbortException=k;function R(ct){(typeof ct!="object"||(ct==null?void 0:ct.length)===void 0)&&pt("Invalid argument for bytesToString");const $=ct.length,Y=8192;if($<Y)return String.fromCharCode.apply(null,ct);const yt=[];for(let It=0;It<$;It+=Y){const Ut=Math.min(It+Y,$),Wt=ct.subarray(It,Ut);yt.push(String.fromCharCode.apply(null,Wt))}return yt.join("")}function t(ct){typeof ct!="string"&&pt("Invalid argument for stringToBytes");const $=ct.length,Y=new Uint8Array($);for(let yt=0;yt<$;++yt)Y[yt]=ct.charCodeAt(yt)&255;return Y}function n(ct){return String.fromCharCode(ct>>24&255,ct>>16&255,ct>>8&255,ct&255)}function m(ct){return Object.keys(ct).length}function S(ct){const $=Object.create(null);for(const[Y,yt]of ct)$[Y]=yt;return $}function v(){const ct=new Uint8Array(4);return ct[0]=1,new Uint32Array(ct.buffer,0,1)[0]===1}function q(){try{return new Function(""),!0}catch{return!1}}class it{static get isLittleEndian(){return L(this,"isLittleEndian",v())}static get isEvalSupported(){return L(this,"isEvalSupported",q())}static get isOffscreenCanvasSupported(){return L(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?L(this,"platform",{isWin:!1,isMac:!1}):L(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}c.FeatureTest=it;const et=[...Array(256).keys()].map(ct=>ct.toString(16).padStart(2,"0"));class nt{static makeHexColor($,Y,yt){return`#${et[$]}${et[Y]}${et[yt]}`}static scaleMinMax($,Y){let yt;$[0]?($[0]<0&&(yt=Y[0],Y[0]=Y[1],Y[1]=yt),Y[0]*=$[0],Y[1]*=$[0],$[3]<0&&(yt=Y[2],Y[2]=Y[3],Y[3]=yt),Y[2]*=$[3],Y[3]*=$[3]):(yt=Y[0],Y[0]=Y[2],Y[2]=yt,yt=Y[1],Y[1]=Y[3],Y[3]=yt,$[1]<0&&(yt=Y[2],Y[2]=Y[3],Y[3]=yt),Y[2]*=$[1],Y[3]*=$[1],$[2]<0&&(yt=Y[0],Y[0]=Y[1],Y[1]=yt),Y[0]*=$[2],Y[1]*=$[2]),Y[0]+=$[4],Y[1]+=$[4],Y[2]+=$[5],Y[3]+=$[5]}static transform($,Y){return[$[0]*Y[0]+$[2]*Y[1],$[1]*Y[0]+$[3]*Y[1],$[0]*Y[2]+$[2]*Y[3],$[1]*Y[2]+$[3]*Y[3],$[0]*Y[4]+$[2]*Y[5]+$[4],$[1]*Y[4]+$[3]*Y[5]+$[5]]}static applyTransform($,Y){const yt=$[0]*Y[0]+$[1]*Y[2]+Y[4],It=$[0]*Y[1]+$[1]*Y[3]+Y[5];return[yt,It]}static applyInverseTransform($,Y){const yt=Y[0]*Y[3]-Y[1]*Y[2],It=($[0]*Y[3]-$[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/yt,Ut=(-$[0]*Y[1]+$[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/yt;return[It,Ut]}static getAxialAlignedBoundingBox($,Y){const yt=nt.applyTransform($,Y),It=nt.applyTransform($.slice(2,4),Y),Ut=nt.applyTransform([$[0],$[3]],Y),Wt=nt.applyTransform([$[2],$[1]],Y);return[Math.min(yt[0],It[0],Ut[0],Wt[0]),Math.min(yt[1],It[1],Ut[1],Wt[1]),Math.max(yt[0],It[0],Ut[0],Wt[0]),Math.max(yt[1],It[1],Ut[1],Wt[1])]}static inverseTransform($){const Y=$[0]*$[3]-$[1]*$[2];return[$[3]/Y,-$[1]/Y,-$[2]/Y,$[0]/Y,($[2]*$[5]-$[4]*$[3])/Y,($[4]*$[1]-$[5]*$[0])/Y]}static singularValueDecompose2dScale($){const Y=[$[0],$[2],$[1],$[3]],yt=$[0]*Y[0]+$[1]*Y[2],It=$[0]*Y[1]+$[1]*Y[3],Ut=$[2]*Y[0]+$[3]*Y[2],Wt=$[2]*Y[1]+$[3]*Y[3],qt=(yt+Wt)/2,ee=Math.sqrt((yt+Wt)**2-4*(yt*Wt-Ut*It))/2,Qt=qt+ee||1,Q=qt-ee||1;return[Math.sqrt(Qt),Math.sqrt(Q)]}static normalizeRect($){const Y=$.slice(0);return $[0]>$[2]&&(Y[0]=$[2],Y[2]=$[0]),$[1]>$[3]&&(Y[1]=$[3],Y[3]=$[1]),Y}static intersect($,Y){const yt=Math.max(Math.min($[0],$[2]),Math.min(Y[0],Y[2])),It=Math.min(Math.max($[0],$[2]),Math.max(Y[0],Y[2]));if(yt>It)return null;const Ut=Math.max(Math.min($[1],$[3]),Math.min(Y[1],Y[3])),Wt=Math.min(Math.max($[1],$[3]),Math.max(Y[1],Y[3]));return Ut>Wt?null:[yt,Ut,It,Wt]}static bezierBoundingBox($,Y,yt,It,Ut,Wt,qt,ee){const Qt=[],Q=[[],[]];let ft,St,Et,Tt,Ft,Rt,xt,Lt;for(let jt=0;jt<2;++jt){if(jt===0?(St=6*$-12*yt+6*Ut,ft=-3*$+9*yt-9*Ut+3*qt,Et=3*yt-3*$):(St=6*Y-12*It+6*Wt,ft=-3*Y+9*It-9*Wt+3*ee,Et=3*It-3*Y),Math.abs(ft)<1e-12){if(Math.abs(St)<1e-12)continue;Tt=-Et/St,0<Tt&&Tt<1&&Qt.push(Tt);continue}xt=St*St-4*Et*ft,Lt=Math.sqrt(xt),!(xt<0)&&(Ft=(-St+Lt)/(2*ft),0<Ft&&Ft<1&&Qt.push(Ft),Rt=(-St-Lt)/(2*ft),0<Rt&&Rt<1&&Qt.push(Rt))}let Dt=Qt.length,Ot;const Nt=Dt;for(;Dt--;)Tt=Qt[Dt],Ot=1-Tt,Q[0][Dt]=Ot*Ot*Ot*$+3*Ot*Ot*Tt*yt+3*Ot*Tt*Tt*Ut+Tt*Tt*Tt*qt,Q[1][Dt]=Ot*Ot*Ot*Y+3*Ot*Ot*Tt*It+3*Ot*Tt*Tt*Wt+Tt*Tt*Tt*ee;return Q[0][Nt]=$,Q[1][Nt]=Y,Q[0][Nt+1]=qt,Q[1][Nt+1]=ee,Q[0].length=Q[1].length=Nt+2,[Math.min(...Q[0]),Math.min(...Q[1]),Math.max(...Q[0]),Math.max(...Q[1])]}}c.Util=nt;const ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ut(ct){if(ct[0]>="\xEF"){let Y;if(ct[0]==="\xFE"&&ct[1]==="\xFF"?Y="utf-16be":ct[0]==="\xFF"&&ct[1]==="\xFE"?Y="utf-16le":ct[0]==="\xEF"&&ct[1]==="\xBB"&&ct[2]==="\xBF"&&(Y="utf-8"),Y)try{const yt=new TextDecoder(Y,{fatal:!0}),It=t(ct);return yt.decode(It)}catch(yt){J(`stringToPDFString: "${yt}".`)}}const $=[];for(let Y=0,yt=ct.length;Y<yt;Y++){const It=ot[ct.charCodeAt(Y)];$.push(It?String.fromCharCode(It):ct.charAt(Y))}return $.join("")}function ht(ct){return decodeURIComponent(escape(ct))}function dt(ct){return unescape(encodeURIComponent(ct))}function mt(ct){return typeof ct=="object"&&(ct==null?void 0:ct.byteLength)!==void 0}function Ct(ct,$){if(ct.length!==$.length)return!1;for(let Y=0,yt=ct.length;Y<yt;Y++)if(ct[Y]!==$[Y])return!1;return!0}function wt(ct=new Date){return[ct.getUTCFullYear().toString(),(ct.getUTCMonth()+1).toString().padStart(2,"0"),ct.getUTCDate().toString().padStart(2,"0"),ct.getUTCHours().toString().padStart(2,"0"),ct.getUTCMinutes().toString().padStart(2,"0"),ct.getUTCSeconds().toString().padStart(2,"0")].join("")}class Pt{constructor(){Z(this,Mt,!1);this.promise=new Promise(($,Y)=>{this.resolve=yt=>{gt(this,Mt,!0),$(yt)},this.reject=yt=>{gt(this,Mt,!0),Y(yt)}})}get settled(){return f(this,Mt)}}Mt=new WeakMap,c.PromiseCapability=Pt;let z=null,_t=null;function kt(ct){return z||(z=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,_t=new Map([["\uFB05","\u017Ft"]])),ct.replaceAll(z,($,Y,yt)=>Y?Y.normalize("NFKC"):_t.get(yt))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var V,K,b,w,se,j,pe,G,P,A,F,I,d,o,p,ve,y,C,Se,_,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:l,NodeCMapReaderFactory:s,NodeFilterFactory:g,NodeStandardFontDataFactory:x}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=l,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultFilterFactory=DefaultFilterFactory=g,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=x}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:l}=__w_pdfjs_require__(21);createPDFNetworkStream=s=>new l(s)}else{const{PDFNetworkStream:l}=__w_pdfjs_require__(24),{PDFFetchStream:s}=__w_pdfjs_require__(25);createPDFNetworkStream=g=>(0,_display_utils.isValidFetchUrl)(g.url)?new s(g):new l(g)}function getDocument(l){var mt,Ct;if(typeof l=="string"||l instanceof URL?l={url:l}:(0,_util.isArrayBuffer)(l)&&(l={data:l}),typeof l!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!l.url&&!l.data&&!l.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const s=new PDFDocumentLoadingTask,{docId:g}=s,x=l.url?getUrlProp(l.url):null,a=l.data?getDataProp(l.data):null,D=l.httpHeaders||null,W=l.withCredentials===!0,tt=(mt=l.password)!=null?mt:null,rt=l.range instanceof PDFDataRangeTransport?l.range:null,lt=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let B=l.worker instanceof PDFWorker?l.worker:null;const U=l.verbosity,J=typeof l.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(l.docBaseUrl)?l.docBaseUrl:null,pt=typeof l.cMapUrl=="string"?l.cMapUrl:null,vt=l.cMapPacked!==!1,At=l.CMapReaderFactory||DefaultCMapReaderFactory,bt=typeof l.standardFontDataUrl=="string"?l.standardFontDataUrl:null,L=l.StandardFontDataFactory||DefaultStandardFontDataFactory,h=l.stopAtErrors!==!0,u=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,E=l.isEvalSupported!==!1,N=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!_is_node.isNodeJS,O=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,H=typeof l.disableFontFace=="boolean"?l.disableFontFace:_is_node.isNodeJS,M=l.fontExtraProperties===!0,k=l.enableXfa===!0,R=l.ownerDocument||globalThis.document,t=l.disableRange===!0,n=l.disableStream===!0,m=l.disableAutoFetch===!0,S=l.pdfBug===!0,v=rt?rt.length:(Ct=l.length)!=null?Ct:NaN,q=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!_is_node.isNodeJS&&!H,it=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:At===_display_utils.DOMCMapReaderFactory&&L===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(pt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(bt,document.baseURI),et=l.canvasFactory||new DefaultCanvasFactory({ownerDocument:R}),nt=l.filterFactory||new DefaultFilterFactory({docId:g,ownerDocument:R}),ot=null;(0,_util.setVerbosityLevel)(U);const ut={canvasFactory:et,filterFactory:nt};if(it||(ut.cMapReaderFactory=new At({baseUrl:pt,isCompressed:vt}),ut.standardFontDataFactory=new L({baseUrl:bt})),!B){const wt={verbosity:U,port:_worker_options.GlobalWorkerOptions.workerPort};B=wt.port?PDFWorker.fromPort(wt):new PDFWorker(wt),s._worker=B}const ht={docId:g,apiVersion:"3.7.107",data:a,password:tt,disableAutoFetch:m,rangeChunkSize:lt,length:v,docBaseUrl:J,enableXfa:k,evaluatorOptions:{maxImageSize:u,disableFontFace:H,ignoreErrors:h,isEvalSupported:E,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:O,fontExtraProperties:M,useSystemFonts:q,cMapUrl:it?pt:null,standardFontDataUrl:it?bt:null}},dt={ignoreErrors:h,isEvalSupported:E,disableFontFace:H,fontExtraProperties:M,enableXfa:k,ownerDocument:R,disableAutoFetch:m,pdfBug:S,styleElement:ot};return B.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const wt=_fetchDocument(B,ht),Pt=new Promise(function(z){let _t;rt?_t=new _transport_stream.PDFDataTransportStream({length:v,initialData:rt.initialData,progressiveDone:rt.progressiveDone,contentDispositionFilename:rt.contentDispositionFilename,disableRange:t,disableStream:n},rt):a||(_t=createPDFNetworkStream({url:x,length:v,httpHeaders:D,withCredentials:W,rangeChunkSize:lt,disableRange:t,disableStream:n})),z(_t)});return Promise.all([wt,Pt]).then(function([z,_t]){if(s.destroyed)throw new Error("Loading aborted");const kt=new _message_handler.MessageHandler(g,z,B.port),Mt=new WorkerTransport(kt,s,_t,dt,ut);s._transport=Mt,kt.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(l,s){if(l.destroyed)throw new Error("Worker was destroyed");const g=await l.messageHandler.sendWithPromise("GetDocRequest",s,s.data?[s.data.buffer]:null);if(l.destroyed)throw new Error("Worker was destroyed");return g}function getUrlProp(l){if(l instanceof URL)return l.href;try{return new URL(l,window.location).href}catch{if(_is_node.isNodeJS&&typeof l=="string")return l}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(l){if(_is_node.isNodeJS&&typeof Buffer<"u"&&l instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(l);if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return(0,_util.stringToBytes)(l);if(typeof l=="object"&&!isNaN(l==null?void 0:l.length)||(0,_util.isArrayBuffer)(l))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const c=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${fe(c,V)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var s;this.destroyed=!0,await((s=this._transport)==null?void 0:s.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=c;V=new WeakMap,Z(PDFDocumentLoadingTask,V,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,g,x=!1,a=null){this.length=s,this.initialData=g,this.progressiveDone=x,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,g){for(const x of this._rangeListeners)x(s,g)}onDataProgress(s,g){this._readyCapability.promise.then(()=>{for(const x of this._progressListeners)x(s,g)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const g of this._progressiveReadListeners)g(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,g){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,g){this._pdfInfo=s,this._transport=g}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,g,x,a=!1){Z(this,w);Z(this,j);Z(this,K,null);Z(this,b,!1);this._pageIndex=s,this._pageInfo=g,this._transport=x,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=x.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:g=this.rotate,offsetX:x=0,offsetY:a=0,dontFlip:D=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:g,offsetX:x,offsetY:a,dontFlip:D})}getAnnotations({intent:s="display"}={}){const g=this._transport.getRenderingIntent(s);return this._transport.getAnnotations(this._pageIndex,g.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var s;return((s=this._transport._htmlForXfa)==null?void 0:s.children[this._pageIndex])||null}render({canvasContext:s,viewport:g,intent:x="display",annotationMode:a=_util.AnnotationMode.ENABLE,transform:D=null,background:W=null,optionalContentConfigPromise:tt=null,annotationCanvasMap:rt=null,pageColors:lt=null,printAnnotationStorage:B=null}){var L,h,u;if((L=arguments[0])!=null&&L.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(h=this._stats)==null||h.time("Overall");const U=this._transport.getRenderingIntent(x,a,B);gt(this,b,!1),at(this,j,pe).call(this),tt||(tt=this._transport.getOptionalContentConfig());let J=this._intentStates.get(U.cacheKey);J||(J=Object.create(null),this._intentStates.set(U.cacheKey,J)),J.streamReaderCancelTimeout&&(clearTimeout(J.streamReaderCancelTimeout),J.streamReaderCancelTimeout=null);const pt=!!(U.renderingIntent&_util.RenderingIntentFlag.PRINT);J.displayReadyCapability||(J.displayReadyCapability=new _util.PromiseCapability,J.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(U));const vt=E=>{var N,O;J.renderTasks.delete(At),(this._maybeCleanupAfterRender||pt)&&gt(this,b,!0),at(this,w,se).call(this,!pt),E?(At.capability.reject(E),this._abortOperatorList({intentState:J,reason:E instanceof Error?E:new Error(E)})):At.capability.resolve(),(N=this._stats)==null||N.timeEnd("Rendering"),(O=this._stats)==null||O.timeEnd("Overall")},At=new InternalRenderTask({callback:vt,params:{canvasContext:s,viewport:g,transform:D,background:W},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:rt,operatorList:J.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!pt,pdfBug:this._pdfBug,pageColors:lt});(J.renderTasks||(J.renderTasks=new Set)).add(At);const bt=At.task;return Promise.all([J.displayReadyCapability.promise,tt]).then(([E,N])=>{var O;if(f(this,b)){vt();return}(O=this._stats)==null||O.time("Rendering"),At.initializeGraphics({transparency:E,optionalContentConfig:N}),At.operatorListChanged()}).catch(vt),bt}getOperatorList({intent:s="display",annotationMode:g=_util.AnnotationMode.ENABLE,printAnnotationStorage:x=null}={}){var rt;function a(){W.operatorList.lastChunk&&(W.opListReadCapability.resolve(W.operatorList),W.renderTasks.delete(tt))}const D=this._transport.getRenderingIntent(s,g,x,!0);let W=this._intentStates.get(D.cacheKey);W||(W=Object.create(null),this._intentStates.set(D.cacheKey,W));let tt;return W.opListReadCapability||(tt=Object.create(null),tt.operatorListChanged=a,W.opListReadCapability=new _util.PromiseCapability,(W.renderTasks||(W.renderTasks=new Set)).add(tt),W.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(rt=this._stats)==null||rt.time("Page Request"),this._pumpOperatorList(D)),W.opListReadCapability.promise}streamTextContent({includeMarkedContent:s=!1,disableNormalization:g=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:s===!0,disableNormalization:g===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(x=>_xfa_text.XfaText.textContent(x));const g=this.streamTextContent(s);return new Promise(function(x,a){function D(){W.read().then(function({value:rt,done:lt}){if(lt){x(tt);return}Object.assign(tt.styles,rt.styles),tt.items.push(...rt.items),D()},a)}const W=g.getReader(),tt={items:[],styles:Object.create(null)};D()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const s=[];for(const g of this._intentStates.values())if(this._abortOperatorList({intentState:g,reason:new Error("Page was destroyed."),force:!0}),!g.opListReadCapability)for(const x of g.renderTasks)s.push(x.completed),x.cancel();return this.objs.clear(),gt(this,b,!1),at(this,j,pe).call(this),Promise.all(s)}cleanup(s=!1){gt(this,b,!0);const g=at(this,w,se).call(this,!1);return s&&g&&this._stats&&(this._stats=new _display_utils.StatTimer),g}_startRenderPage(s,g){var a,D;const x=this._intentStates.get(g);!x||((a=this._stats)==null||a.timeEnd("Page Request"),(D=x.displayReadyCapability)==null||D.resolve(s))}_renderPageChunk(s,g){for(let x=0,a=s.length;x<a;x++)g.operatorList.fnArray.push(s.fnArray[x]),g.operatorList.argsArray.push(s.argsArray[x]);g.operatorList.lastChunk=s.lastChunk,g.operatorList.separateAnnots=s.separateAnnots;for(const x of g.renderTasks)x.operatorListChanged();s.lastChunk&&at(this,w,se).call(this,!0)}_pumpOperatorList({renderingIntent:s,cacheKey:g,annotationStorageMap:x}){const D=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:g,annotationStorage:x}).getReader(),W=this._intentStates.get(g);W.streamReader=D;const tt=()=>{D.read().then(({value:rt,done:lt})=>{if(lt){W.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(rt,W),tt())},rt=>{if(W.streamReader=null,!this._transport.destroyed){if(W.operatorList){W.operatorList.lastChunk=!0;for(const lt of W.renderTasks)lt.operatorListChanged();at(this,w,se).call(this,!0)}if(W.displayReadyCapability)W.displayReadyCapability.reject(rt);else if(W.opListReadCapability)W.opListReadCapability.reject(rt);else throw rt}})};tt()}_abortOperatorList({intentState:s,reason:g,force:x=!1}){if(!!s.streamReader){if(s.streamReaderCancelTimeout&&(clearTimeout(s.streamReaderCancelTimeout),s.streamReaderCancelTimeout=null),!x){if(s.renderTasks.size>0)return;if(g instanceof _display_utils.RenderingCancelledException){let a=RENDERING_CANCELLED_TIMEOUT;g.extraDelay>0&&g.extraDelay<1e3&&(a+=g.extraDelay),s.streamReaderCancelTimeout=setTimeout(()=>{s.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:s,reason:g,force:!0})},a);return}}if(s.streamReader.cancel(new _util.AbortException(g.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[a,D]of this._intentStates)if(D===s){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}K=new WeakMap,b=new WeakMap,w=new WeakSet,se=function(s=!1){if(at(this,j,pe).call(this),!f(this,b))return!1;if(s)return gt(this,K,setTimeout(()=>{gt(this,K,null),at(this,w,se).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:g,operatorList:x}of this._intentStates.values())if(g.size>0||!x.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),gt(this,b,!1),!0},j=new WeakSet,pe=function(){f(this,K)&&(clearTimeout(f(this,K)),gt(this,K,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Z(this,G,new Set);Z(this,P,Promise.resolve())}postMessage(s,g){const x={data:structuredClone(s,g?{transfer:g}:null)};f(this,P).then(()=>{for(const a of f(this,G))a.call(this,x)})}addEventListener(s,g){f(this,G).add(g)}removeEventListener(s,g){f(this,G).delete(g)}terminate(){f(this,G).clear()}}G=new WeakMap,P=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const l=(A=document==null?void 0:document.currentScript)==null?void 0:A.src;l&&(PDFWorkerUtil.fallbackWorkerSrc=l.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(l,s){let g;try{if(g=new URL(l),!g.origin||g.origin==="null")return!1}catch{return!1}const x=new URL(s,g);return g.origin===x.origin},PDFWorkerUtil.createCDNWrapper=function(l){const s=`importScripts("${l}");`;return URL.createObjectURL(new Blob([s]))}}const _PDFWorker=class{constructor({name:l=null,port:s=null,verbosity:g=(0,_util.getVerbosityLevel)()}={}){if(s&&f(_PDFWorker,F).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=l,this.destroyed=!1,this.verbosity=g,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,s){f(_PDFWorker,F).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(l){this._port=l,this._messageHandler=new _message_handler.MessageHandler("main","worker",l),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:l}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,l)||(l=PDFWorkerUtil.createCDNWrapper(new URL(l,window.location).href));const s=new Worker(l),g=new _message_handler.MessageHandler("main","worker",s),x=()=>{s.removeEventListener("error",a),g.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||x()};s.addEventListener("error",a),g.on("test",W=>{if(s.removeEventListener("error",a),this.destroyed){x();return}W?(this._messageHandler=g,this._port=s,this._webWorker=s,this._readyCapability.resolve(),g.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),g.destroy(),s.terminate())}),g.on("ready",W=>{if(s.removeEventListener("error",a),this.destroyed){x();return}try{D()}catch{this._setupFakeWorker()}});const D=()=>{const W=new Uint8Array;g.send("test",W,[W.buffer])};D();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(l=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const g=`fake${PDFWorkerUtil.fakeWorkerId++}`,x=new _message_handler.MessageHandler(g+"_worker",g,s);l.setup(x,s);const a=new _message_handler.MessageHandler(g,g+"_worker",s);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}).catch(l=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${l.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),f(_PDFWorker,F).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(l){if(!(l!=null&&l.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return f(this,F).has(l.port)?f(this,F).get(l.port):new _PDFWorker(l)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var l;try{return((l=globalThis.pdfjsWorker)==null?void 0:l.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;F=new WeakMap,Z(PDFWorker,F,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(s,g,x,a,D){Z(this,p);Z(this,I,new Map);Z(this,d,new Map);Z(this,o,new Map);this.messageHandler=s,this.loadingTask=g,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,this.canvasFactory=D.canvasFactory,this.filterFactory=D.filterFactory,this.cMapReaderFactory=D.cMapReaderFactory,this.standardFontDataFactory=D.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=x,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(s,g=_util.AnnotationMode.ENABLE,x=null,a=!1){let D=_util.RenderingIntentFlag.DISPLAY,W=null;switch(s){case"any":D=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":D=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(g){case _util.AnnotationMode.DISABLE:D+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:D+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:D+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,W=(D&_util.RenderingIntentFlag.PRINT&&x instanceof _annotation_storage.PrintAnnotationStorage?x:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${g}`)}return a&&(D+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:D,cacheKey:`${D}_${_annotation_storage.AnnotationStorage.getHash(W)}`,annotationStorageMap:W}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const x of f(this,d).values())s.push(x._destroy());f(this,d).clear(),f(this,o).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const g=this.messageHandler.sendWithPromise("Terminate",null);return s.push(g),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),f(this,I).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:g}=this;s.on("GetReader",(x,a)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=D=>{this._lastProgress={loaded:D.loaded,total:D.total}},a.onPull=()=>{this._fullReader.read().then(function({value:D,done:W}){if(W){a.close();return}(0,_util.assert)(D instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(D),1,[D])}).catch(D=>{a.error(D)})},a.onCancel=D=>{this._fullReader.cancel(D),a.ready.catch(W=>{if(!this.destroyed)throw W})}}),s.on("ReaderHeadersReady",x=>{const a=new _util.PromiseCapability,D=this._fullReader;return D.headersReady.then(()=>{var W;(!D.isStreamingSupported||!D.isRangeSupported)&&(this._lastProgress&&((W=g.onProgress)==null||W.call(g,this._lastProgress)),D.onProgress=tt=>{var rt;(rt=g.onProgress)==null||rt.call(g,{loaded:tt.loaded,total:tt.total})}),a.resolve({isStreamingSupported:D.isStreamingSupported,isRangeSupported:D.isRangeSupported,contentLength:D.contentLength})},a.reject),a.promise}),s.on("GetRangeReader",(x,a)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const D=this._networkStream.getRangeReader(x.begin,x.end);if(!D){a.close();return}a.onPull=()=>{D.read().then(function({value:W,done:tt}){if(tt){a.close();return}(0,_util.assert)(W instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(W),1,[W])}).catch(W=>{a.error(W)})},a.onCancel=W=>{D.cancel(W),a.ready.catch(tt=>{if(!this.destroyed)throw tt})}}),s.on("GetDoc",({pdfInfo:x})=>{this._numPages=x.numPages,this._htmlForXfa=x.htmlForXfa,delete x.htmlForXfa,g._capability.resolve(new PDFDocumentProxy(x,this))}),s.on("DocException",function(x){let a;switch(x.name){case"PasswordException":a=new _util.PasswordException(x.message,x.code);break;case"InvalidPDFException":a=new _util.InvalidPDFException(x.message);break;case"MissingPDFException":a=new _util.MissingPDFException(x.message);break;case"UnexpectedResponseException":a=new _util.UnexpectedResponseException(x.message,x.status);break;case"UnknownErrorException":a=new _util.UnknownErrorException(x.message,x.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}g._capability.reject(a)}),s.on("PasswordRequest",x=>{if(this._passwordCapability=new _util.PromiseCapability,g.onPassword){const a=D=>{D instanceof Error?this._passwordCapability.reject(D):this._passwordCapability.resolve({password:D})};try{g.onPassword(a,x.code)}catch(D){this._passwordCapability.reject(D)}}else this._passwordCapability.reject(new _util.PasswordException(x.message,x.code));return this._passwordCapability.promise}),s.on("DataLoaded",x=>{var a;(a=g.onProgress)==null||a.call(g,{loaded:x.length,total:x.length}),this.downloadInfoCapability.resolve(x)}),s.on("StartRenderPage",x=>{if(this.destroyed)return;f(this,d).get(x.pageIndex)._startRenderPage(x.transparency,x.cacheKey)}),s.on("commonobj",([x,a,D])=>{var W;if(!this.destroyed&&!this.commonObjs.has(x))switch(a){case"Font":const tt=this._params;if("error"in D){const B=D.error;(0,_util.warn)(`Error during font loading: ${B}`),this.commonObjs.resolve(x,B);break}const rt=tt.pdfBug&&((W=globalThis.FontInspector)==null?void 0:W.enabled)?(B,U)=>globalThis.FontInspector.fontAdded(B,U):null,lt=new _font_loader.FontFaceObject(D,{isEvalSupported:tt.isEvalSupported,disableFontFace:tt.disableFontFace,ignoreErrors:tt.ignoreErrors,inspectFont:rt});this.fontLoader.bind(lt).catch(B=>s.sendWithPromise("FontFallback",{id:x})).finally(()=>{!tt.fontExtraProperties&&lt.data&&(lt.data=null),this.commonObjs.resolve(x,lt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(x,D);break;default:throw new Error(`Got unknown common object type ${a}`)}}),s.on("obj",([x,a,D,W])=>{var rt;if(this.destroyed)return;const tt=f(this,d).get(a);if(!tt.objs.has(x))switch(D){case"Image":if(tt.objs.resolve(x,W),W){let lt;if(W.bitmap){const{width:B,height:U}=W;lt=B*U*4}else lt=((rt=W.data)==null?void 0:rt.length)||0;lt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(tt._maybeCleanupAfterRender=!0)}break;case"Pattern":tt.objs.resolve(x,W);break;default:throw new Error(`Got unknown object type ${D}`)}}),s.on("DocProgress",x=>{var a;this.destroyed||(a=g.onProgress)==null||a.call(g,{loaded:x.loaded,total:x.total})}),s.on("FetchBuiltInCMap",x=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(x):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",x=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(x):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s,g;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(g=(s=this._fullReader)==null?void 0:s.filename)!=null?g:null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const g=s-1,x=f(this,o).get(g);if(x)return x;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:g}).then(D=>{if(this.destroyed)throw new Error("Transport destroyed");const W=new PDFPageProxy(g,D,this,this._params.pdfBug);return f(this,d).set(g,W),W});return f(this,o).set(g,a),a}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,g){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:g})}getFieldObjects(){return at(this,p,ve).call(this,"GetFieldObjects")}hasJSActions(){return at(this,p,ve).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const s="GetMetadata",g=f(this,I).get(s);if(g)return g;const x=this.messageHandler.sendWithPromise(s,null).then(a=>{var D,W,tt,rt;return{info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:(W=(D=this._fullReader)==null?void 0:D.filename)!=null?W:null,contentLength:(rt=(tt=this._fullReader)==null?void 0:tt.contentLength)!=null?rt:null}});return f(this,I).set(s,x),x}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const g of f(this,d).values())if(!g.cleanup())throw new Error(`startCleanup: Page ${g.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),f(this,I).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:s,enableXfa:g}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s,enableXfa:g})}}I=new WeakMap,d=new WeakMap,o=new WeakMap,p=new WeakSet,ve=function(s,g=null){const x=f(this,I).get(s);if(x)return x;const a=this.messageHandler.sendWithPromise(s,g);return f(this,I).set(s,a),a};class PDFObjects{constructor(){Z(this,C);Z(this,y,Object.create(null))}get(s,g=null){if(g){const a=at(this,C,Se).call(this,s);return a.capability.promise.then(()=>g(a.data)),null}const x=f(this,y)[s];if(!(x!=null&&x.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${s}.`);return x.data}has(s){const g=f(this,y)[s];return(g==null?void 0:g.capability.settled)||!1}resolve(s,g=null){const x=at(this,C,Se).call(this,s);x.data=g,x.capability.resolve()}clear(){var s;for(const g in f(this,y)){const{data:x}=f(this,y)[g];(s=x==null?void 0:x.bitmap)==null||s.close()}gt(this,y,Object.create(null))}}y=new WeakMap,C=new WeakSet,Se=function(s){const g=f(this,y)[s];return g||(f(this,y)[s]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(s){Z(this,_,null);gt(this,_,s),this.onContinue=null}get promise(){return f(this,_).capability.promise}cancel(s=0){f(this,_).cancel(null,s)}get separateAnnots(){const{separateAnnots:s}=f(this,_).operatorList;if(!s)return!1;const{annotationCanvasMap:g}=f(this,_);return s.form||s.canvas&&(g==null?void 0:g.size)>0}}_=new WeakMap,exports.RenderTask=RenderTask;const i=class{constructor({callback:s,params:g,objs:x,commonObjs:a,annotationCanvasMap:D,operatorList:W,pageIndex:tt,canvasFactory:rt,filterFactory:lt,useRequestAnimationFrame:B=!1,pdfBug:U=!1,pageColors:J=null}){this.callback=s,this.params=g,this.objs=x,this.commonObjs=a,this.annotationCanvasMap=D,this.operatorListIdx=null,this.operatorList=W,this._pageIndex=tt,this.canvasFactory=rt,this.filterFactory=lt,this._pdfBug=U,this.pageColors=J,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=B===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=g.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:g}){var tt,rt;if(this.cancelled)return;if(this._canvas){if(f(i,e).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");f(i,e).add(this._canvas)}this._pdfBug&&((tt=globalThis.StepperManager)==null?void 0:tt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:x,viewport:a,transform:D,background:W}=this.params;this.gfx=new _canvas.CanvasGraphics(x,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:g},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:D,viewport:a,transparency:s,background:W}),this.operatorListIdx=0,this.graphicsReady=!0,(rt=this.graphicsReadyCallback)==null||rt.call(this)}cancel(s=null,g=0){var x;this.running=!1,this.cancelled=!0,(x=this.gfx)==null||x.endDrawing(),this._canvas&&f(i,e).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",g))}operatorListChanged(){var s;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(s=this.stepper)==null||s.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&f(i,e).delete(this._canvas),this.callback())))}};let InternalRenderTask=i;e=new WeakMap,Z(InternalRenderTask,e,new WeakSet);const version="3.7.107";exports.version=version;const build="036f855dc";exports.build=build},(V,c,K)=>{var G,P,A,We,I;Object.defineProperty(c,"__esModule",{value:!0}),c.PrintAnnotationStorage=c.AnnotationStorage=void 0;var b=K(1),w=K(4),X=K(8);class j{constructor(){Z(this,A);Z(this,G,!1);Z(this,P,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(o,p){const r=f(this,P).get(o);return r===void 0?p:Object.assign(p,r)}getRawValue(o){return f(this,P).get(o)}remove(o){if(f(this,P).delete(o),f(this,P).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const p of f(this,P).values())if(p instanceof w.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(o,p){const r=f(this,P).get(o);let y=!1;if(r!==void 0)for(const[C,T]of Object.entries(p))r[C]!==T&&(y=!0,r[C]=T);else y=!0,f(this,P).set(o,p);y&&at(this,A,We).call(this),p instanceof w.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(p.constructor._type)}has(o){return f(this,P).has(o)}getAll(){return f(this,P).size>0?(0,b.objectFromMap)(f(this,P)):null}setAll(o){for(const[p,r]of Object.entries(o))this.setValue(p,r)}get size(){return f(this,P).size}resetModified(){f(this,G)&&(gt(this,G,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new st(this)}get serializable(){if(f(this,P).size===0)return null;const o=new Map;for(const[p,r]of f(this,P)){const y=r instanceof w.AnnotationEditor?r.serialize():r;y&&o.set(p,y)}return o}static getHash(o){if(!o)return"";const p=new X.MurmurHash3_64;for(const[r,y]of o)p.update(`${r}:${JSON.stringify(y)}`);return p.hexdigest()}}G=new WeakMap,P=new WeakMap,A=new WeakSet,We=function(){f(this,G)||(gt(this,G,!0),typeof this.onSetModified=="function"&&this.onSetModified())},c.AnnotationStorage=j;class st extends j{constructor(p){super();Z(this,I,null);gt(this,I,structuredClone(p.serializable))}get print(){(0,b.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return f(this,I)}}I=new WeakMap,c.PrintAnnotationStorage=st},(V,c,K)=>{var j,st,G,P,A,F;Object.defineProperty(c,"__esModule",{value:!0}),c.AnnotationEditor=void 0;var b=K(5),w=K(1);const I=class{constructor(o){Z(this,j,this.focusin.bind(this));Z(this,st,this.focusout.bind(this));Z(this,G,!1);Z(this,P,!1);Z(this,A,!1);Bt(this,"_uiManager",null);Z(this,F,I._zIndex++);this.constructor===I&&(0,w.unreachable)("Cannot initialize AnnotationEditor."),this.parent=o.parent,this.id=o.id,this.width=this.height=null,this.pageIndex=o.parent.pageIndex,this.name=o.name,this.div=null,this._uiManager=o.uiManager;const{rotation:p,rawDims:{pageWidth:r,pageHeight:y,pageX:C,pageY:T}}=this.parent.viewport;this.rotation=p,this.pageRotation=(360+p-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,y],this.pageTranslation=[C,T];const[_,e]=this.parentDimensions;this.x=o.x/_,this.y=o.y/e,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,w.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(o){this._uiManager.addCommands(o)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,F)}setParent(o){o!==null&&(this.pageIndex=o.pageIndex,this.pageDimensions=o.pageDimensions),this.parent=o}focusin(o){f(this,G)?gt(this,G,!1):this.parent.setSelected(this)}focusout(o){var r;if(!this.isAttachedToDOM)return;const p=o.relatedTarget;p!=null&&p.closest(`#${this.id}`)||(o.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(o){const p=this.parent.div.getBoundingClientRect();this.startX=o.clientX-p.x,this.startY=o.clientY-p.y,o.dataTransfer.setData("text/plain",this.id),o.dataTransfer.effectAllowed="move"}setAt(o,p,r,y){const[C,T]=this.parentDimensions;[r,y]=this.screenToPageTranslation(r,y),this.x=(o+r)/C,this.y=(p+y)/T,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(o,p){const[r,y]=this.parentDimensions;[o,p]=this.screenToPageTranslation(o,p),this.x+=o/r,this.y+=p/y,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(o,p){switch(this.parentRotation){case 90:return[p,-o];case 180:return[-o,-p];case 270:return[-p,o];default:return[o,p]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:o}=this._uiManager.viewParameters,[p,r]=this.pageDimensions;return[p*o,r*o]}setDims(o,p){const[r,y]=this.parentDimensions;this.div.style.width=`${100*o/r}%`,this.div.style.height=`${100*p/y}%`}fixDims(){const{style:o}=this.div,{height:p,width:r}=o,y=r.endsWith("%"),C=p.endsWith("%");if(y&&C)return;const[T,_]=this.parentDimensions;y||(o.width=`${100*parseFloat(r)/T}%`),C||(o.height=`${100*parseFloat(p)/_}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",f(this,j)),this.div.addEventListener("focusout",f(this,st));const[o,p]=this.getInitialTranslation();return this.translate(o,p),(0,b.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(o){const{isMac:p}=w.FeatureTest.platform;if(o.button!==0||o.ctrlKey&&p){o.preventDefault();return}o.ctrlKey&&!p||o.shiftKey||o.metaKey&&p?this.parent.toggleSelected(this):this.parent.setSelected(this),gt(this,G,!0)}getRect(o,p){const r=this.parentScale,[y,C]=this.pageDimensions,[T,_]=this.pageTranslation,e=o/r,i=p/r,l=this.x*y,s=this.y*C,g=this.width*y,x=this.height*C;switch(this.rotation){case 0:return[l+e+T,C-s-i-x+_,l+e+g+T,C-s-i+_];case 90:return[l+i+T,C-s+e+_,l+i+x+T,C-s+e+g+_];case 180:return[l-e-g+T,C-s+i+_,l-e+T,C-s+i+x+_];case 270:return[l-i-x+T,C-s-e-g+_,l-i+T,C-s-e+_];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(o,p){const[r,y,C,T]=o,_=C-r,e=T-y;switch(this.rotation){case 0:return[r,p-T,_,e];case 90:return[r,p-y,e,_];case 180:return[C,p-y,_,e];case 270:return[C,p-T,e,_];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){gt(this,A,!0)}disableEditMode(){gt(this,A,!1)}isInEditMode(){return f(this,A)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var o;(o=this.div)==null||o.addEventListener("focusin",f(this,j))}serialize(){(0,w.unreachable)("An editor must be serializable")}static deserialize(o,p,r){const y=new this.prototype.constructor({parent:p,id:p.getNextId(),uiManager:r});y.rotation=o.rotation;const[C,T]=y.pageDimensions,[_,e,i,l]=y.getRectInCurrentCoords(o.rect,T);return y.x=_/C,y.y=e/T,y.width=i/C,y.height=l/T,y}remove(){this.div.removeEventListener("focusin",f(this,j)),this.div.removeEventListener("focusout",f(this,st)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var o;(o=this.div)==null||o.classList.add("selectedEditor")}unselect(){var o;(o=this.div)==null||o.classList.remove("selectedEditor")}updateParams(o,p){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return f(this,P)}set isEditing(o){gt(this,P,o),o?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let X=I;j=new WeakMap,st=new WeakMap,G=new WeakMap,P=new WeakMap,A=new WeakMap,F=new WeakMap,Bt(X,"_colorManager",new b.ColorManager),Bt(X,"_zIndex",1),c.AnnotationEditor=X},(V,c,K)=>{var I,d,o,p,r,y,Ge,_,e,i,l,s,g,x,a,D,W,tt,rt,lt,B,U,J,pt,vt,At,bt,L,h,u,E,ze,O,Ee,M,Xe,R,Ve,n,$t,S,ae,q,$e,et,Ye,ot,Ce,ht,oe,mt,we;Object.defineProperty(c,"__esModule",{value:!0}),c.KeyboardManager=c.CommandManager=c.ColorManager=c.AnnotationEditorUIManager=void 0,c.bindEvents=X,c.opacityToHex=j;var b=K(1),w=K(6);function X(Pt,z,_t){for(const kt of _t)z.addEventListener(kt,Pt[kt].bind(Pt))}function j(Pt){return Math.round(Math.min(255,Math.max(1,255*Pt))).toString(16).padStart(2,"0")}class st{constructor(){Z(this,I,0)}getId(){return`${b.AnnotationEditorPrefix}${fe(this,I)._++}`}}I=new WeakMap;class G{constructor(z=128){Z(this,d,[]);Z(this,o,!1);Z(this,p,void 0);Z(this,r,-1);gt(this,p,z)}add({cmd:z,undo:_t,mustExec:kt,type:Mt=NaN,overwriteIfSameType:ct=!1,keepUndo:$=!1}){if(kt&&z(),f(this,o))return;const Y={cmd:z,undo:_t,type:Mt};if(f(this,r)===-1){f(this,d).length>0&&(f(this,d).length=0),gt(this,r,0),f(this,d).push(Y);return}if(ct&&f(this,d)[f(this,r)].type===Mt){$&&(Y.undo=f(this,d)[f(this,r)].undo),f(this,d)[f(this,r)]=Y;return}const yt=f(this,r)+1;yt===f(this,p)?f(this,d).splice(0,1):(gt(this,r,yt),yt<f(this,d).length&&f(this,d).splice(yt)),f(this,d).push(Y)}undo(){f(this,r)!==-1&&(gt(this,o,!0),f(this,d)[f(this,r)].undo(),gt(this,o,!1),gt(this,r,f(this,r)-1))}redo(){f(this,r)<f(this,d).length-1&&(gt(this,r,f(this,r)+1),gt(this,o,!0),f(this,d)[f(this,r)].cmd(),gt(this,o,!1))}hasSomethingToUndo(){return f(this,r)!==-1}hasSomethingToRedo(){return f(this,r)<f(this,d).length-1}destroy(){gt(this,d,null)}}d=new WeakMap,o=new WeakMap,p=new WeakMap,r=new WeakMap,c.CommandManager=G;class P{constructor(z){Z(this,y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:_t}=b.FeatureTest.platform;for(const[kt,Mt]of z)for(const ct of kt){const $=ct.startsWith("mac+");_t&&$?(this.callbacks.set(ct.slice(4),Mt),this.allKeys.add(ct.split("+").at(-1))):!_t&&!$&&(this.callbacks.set(ct,Mt),this.allKeys.add(ct.split("+").at(-1)))}}exec(z,_t){if(!this.allKeys.has(_t.key))return;const kt=this.callbacks.get(at(this,y,Ge).call(this,_t));!kt||(kt.bind(z)(),_t.stopPropagation(),_t.preventDefault())}}y=new WeakSet,Ge=function(z){z.altKey&&this.buffer.push("alt"),z.ctrlKey&&this.buffer.push("ctrl"),z.metaKey&&this.buffer.push("meta"),z.shiftKey&&this.buffer.push("shift"),this.buffer.push(z.key);const _t=this.buffer.join("+");return this.buffer.length=0,_t},c.KeyboardManager=P;const T=class{get _colors(){const z=new Map([["CanvasText",null],["Canvas",null]]);return(0,w.getColorValues)(z),(0,b.shadow)(this,"_colors",z)}convert(z){const _t=(0,w.getRGB)(z);if(!window.matchMedia("(forced-colors: active)").matches)return _t;for(const[kt,Mt]of this._colors)if(Mt.every((ct,$)=>ct===_t[$]))return T._colorsMapping.get(kt);return _t}getHexCode(z){const _t=this._colors.get(z);return _t?b.Util.makeHexColor(..._t):z}};let A=T;Bt(A,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),c.ColorManager=A;const wt=class{constructor(z,_t,kt){Z(this,E);Z(this,O);Z(this,M);Z(this,R);Z(this,n);Z(this,S);Z(this,q);Z(this,et);Z(this,ot);Z(this,ht);Z(this,mt);Z(this,_,null);Z(this,e,new Map);Z(this,i,new Map);Z(this,l,null);Z(this,s,new G);Z(this,g,0);Z(this,x,null);Z(this,a,new Set);Z(this,D,null);Z(this,W,new st);Z(this,tt,!1);Z(this,rt,b.AnnotationEditorType.NONE);Z(this,lt,new Set);Z(this,B,this.copy.bind(this));Z(this,U,this.cut.bind(this));Z(this,J,this.paste.bind(this));Z(this,pt,this.keydown.bind(this));Z(this,vt,this.onEditingAction.bind(this));Z(this,At,this.onPageChanging.bind(this));Z(this,bt,this.onScaleChanging.bind(this));Z(this,L,this.onRotationChanging.bind(this));Z(this,h,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Z(this,u,null);gt(this,u,z),gt(this,D,_t),f(this,D)._on("editingaction",f(this,vt)),f(this,D)._on("pagechanging",f(this,At)),f(this,D)._on("scalechanging",f(this,bt)),f(this,D)._on("rotationchanging",f(this,L)),gt(this,l,kt),this.viewParameters={realScale:w.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){at(this,O,Ee).call(this),f(this,D)._off("editingaction",f(this,vt)),f(this,D)._off("pagechanging",f(this,At)),f(this,D)._off("scalechanging",f(this,bt)),f(this,D)._off("rotationchanging",f(this,L));for(const z of f(this,i).values())z.destroy();f(this,i).clear(),f(this,e).clear(),f(this,a).clear(),gt(this,_,null),f(this,lt).clear(),f(this,s).destroy()}onPageChanging({pageNumber:z}){gt(this,g,z-1)}focusMainContainer(){f(this,u).focus()}addShouldRescale(z){f(this,a).add(z)}removeShouldRescale(z){f(this,a).delete(z)}onScaleChanging({scale:z}){this.commitOrRemove(),this.viewParameters.realScale=z*w.PixelsPerInch.PDF_TO_CSS_UNITS;for(const _t of f(this,a))_t.onScaleChanging()}onRotationChanging({pagesRotation:z}){this.commitOrRemove(),this.viewParameters.rotation=z}addToAnnotationStorage(z){!z.isEmpty()&&f(this,l)&&!f(this,l).has(z.id)&&f(this,l).setValue(z.id,z)}copy(z){if(z.preventDefault(),f(this,_)&&f(this,_).commitOrRemove(),!this.hasSelection)return;const _t=[];for(const kt of f(this,lt))kt.isEmpty()||_t.push(kt.serialize());_t.length!==0&&z.clipboardData.setData("application/pdfjs",JSON.stringify(_t))}cut(z){this.copy(z),this.delete()}paste(z){z.preventDefault();let _t=z.clipboardData.getData("application/pdfjs");if(!_t)return;try{_t=JSON.parse(_t)}catch(Mt){(0,b.warn)(`paste: "${Mt.message}".`);return}if(!Array.isArray(_t))return;this.unselectAll();const kt=f(this,i).get(f(this,g));try{const Mt=[];for(const Y of _t){const yt=kt.deserialize(Y);if(!yt)return;Mt.push(yt)}const ct=()=>{for(const Y of Mt)at(this,ot,Ce).call(this,Y);at(this,mt,we).call(this,Mt)},$=()=>{for(const Y of Mt)Y.remove()};this.addCommands({cmd:ct,undo:$,mustExec:!0})}catch(Mt){(0,b.warn)(`paste: "${Mt.message}".`)}}keydown(z){var _t;(_t=this.getActive())!=null&&_t.shouldGetKeyboardEvents()||wt._keyboardManager.exec(this,z)}onEditingAction(z){["undo","redo","delete","selectAll"].includes(z.name)&&this[z.name]()}setEditingState(z){z?(at(this,E,ze).call(this),at(this,M,Xe).call(this),at(this,n,$t).call(this,{isEditing:f(this,rt)!==b.AnnotationEditorType.NONE,isEmpty:at(this,ht,oe).call(this),hasSomethingToUndo:f(this,s).hasSomethingToUndo(),hasSomethingToRedo:f(this,s).hasSomethingToRedo(),hasSelectedEditor:!1})):(at(this,O,Ee).call(this),at(this,R,Ve).call(this),at(this,n,$t).call(this,{isEditing:!1}))}registerEditorTypes(z){if(!f(this,x)){gt(this,x,z);for(const _t of f(this,x))at(this,S,ae).call(this,_t.defaultPropertiesToUpdate)}}getId(){return f(this,W).getId()}get currentLayer(){return f(this,i).get(f(this,g))}get currentPageIndex(){return f(this,g)}addLayer(z){f(this,i).set(z.pageIndex,z),f(this,tt)?z.enable():z.disable()}removeLayer(z){f(this,i).delete(z.pageIndex)}updateMode(z){if(gt(this,rt,z),z===b.AnnotationEditorType.NONE)this.setEditingState(!1),at(this,et,Ye).call(this);else{this.setEditingState(!0),at(this,q,$e).call(this);for(const _t of f(this,i).values())_t.updateMode(z)}}updateToolbar(z){z!==f(this,rt)&&f(this,D).dispatch("switchannotationeditormode",{source:this,mode:z})}updateParams(z,_t){if(!!f(this,x)){for(const kt of f(this,lt))kt.updateParams(z,_t);for(const kt of f(this,x))kt.updateDefaultParams(z,_t)}}getEditors(z){const _t=[];for(const kt of f(this,e).values())kt.pageIndex===z&&_t.push(kt);return _t}getEditor(z){return f(this,e).get(z)}addEditor(z){f(this,e).set(z.id,z)}removeEditor(z){var _t;f(this,e).delete(z.id),this.unselect(z),(_t=f(this,l))==null||_t.remove(z.id)}setActiveEditor(z){f(this,_)!==z&&(gt(this,_,z),z&&at(this,S,ae).call(this,z.propertiesToUpdate))}toggleSelected(z){if(f(this,lt).has(z)){f(this,lt).delete(z),z.unselect(),at(this,n,$t).call(this,{hasSelectedEditor:this.hasSelection});return}f(this,lt).add(z),z.select(),at(this,S,ae).call(this,z.propertiesToUpdate),at(this,n,$t).call(this,{hasSelectedEditor:!0})}setSelected(z){for(const _t of f(this,lt))_t!==z&&_t.unselect();f(this,lt).clear(),f(this,lt).add(z),z.select(),at(this,S,ae).call(this,z.propertiesToUpdate),at(this,n,$t).call(this,{hasSelectedEditor:!0})}isSelected(z){return f(this,lt).has(z)}unselect(z){z.unselect(),f(this,lt).delete(z),at(this,n,$t).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return f(this,lt).size!==0}undo(){f(this,s).undo(),at(this,n,$t).call(this,{hasSomethingToUndo:f(this,s).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:at(this,ht,oe).call(this)})}redo(){f(this,s).redo(),at(this,n,$t).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:f(this,s).hasSomethingToRedo(),isEmpty:at(this,ht,oe).call(this)})}addCommands(z){f(this,s).add(z),at(this,n,$t).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:at(this,ht,oe).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const z=[...f(this,lt)],_t=()=>{for(const Mt of z)Mt.remove()},kt=()=>{for(const Mt of z)at(this,ot,Ce).call(this,Mt)};this.addCommands({cmd:_t,undo:kt,mustExec:!0})}commitOrRemove(){var z;(z=f(this,_))==null||z.commitOrRemove()}selectAll(){for(const z of f(this,lt))z.commit();at(this,mt,we).call(this,f(this,e).values())}unselectAll(){if(f(this,_)){f(this,_).commitOrRemove();return}if(f(this,lt).size!==0){for(const z of f(this,lt))z.unselect();f(this,lt).clear(),at(this,n,$t).call(this,{hasSelectedEditor:!1})}}isActive(z){return f(this,_)===z}getActive(){return f(this,_)}getMode(){return f(this,rt)}};let F=wt;_=new WeakMap,e=new WeakMap,i=new WeakMap,l=new WeakMap,s=new WeakMap,g=new WeakMap,x=new WeakMap,a=new WeakMap,D=new WeakMap,W=new WeakMap,tt=new WeakMap,rt=new WeakMap,lt=new WeakMap,B=new WeakMap,U=new WeakMap,J=new WeakMap,pt=new WeakMap,vt=new WeakMap,At=new WeakMap,bt=new WeakMap,L=new WeakMap,h=new WeakMap,u=new WeakMap,E=new WeakSet,ze=function(){f(this,u).addEventListener("keydown",f(this,pt))},O=new WeakSet,Ee=function(){f(this,u).removeEventListener("keydown",f(this,pt))},M=new WeakSet,Xe=function(){document.addEventListener("copy",f(this,B)),document.addEventListener("cut",f(this,U)),document.addEventListener("paste",f(this,J))},R=new WeakSet,Ve=function(){document.removeEventListener("copy",f(this,B)),document.removeEventListener("cut",f(this,U)),document.removeEventListener("paste",f(this,J))},n=new WeakSet,$t=function(z){Object.entries(z).some(([kt,Mt])=>f(this,h)[kt]!==Mt)&&f(this,D).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(f(this,h),z)})},S=new WeakSet,ae=function(z){f(this,D).dispatch("annotationeditorparamschanged",{source:this,details:z})},q=new WeakSet,$e=function(){if(!f(this,tt)){gt(this,tt,!0);for(const z of f(this,i).values())z.enable()}},et=new WeakSet,Ye=function(){if(this.unselectAll(),f(this,tt)){gt(this,tt,!1);for(const z of f(this,i).values())z.disable()}},ot=new WeakSet,Ce=function(z){const _t=f(this,i).get(z.pageIndex);_t?_t.addOrRebuild(z):this.addEditor(z)},ht=new WeakSet,oe=function(){if(f(this,e).size===0)return!0;if(f(this,e).size===1)for(const z of f(this,e).values())return z.isEmpty();return!1},mt=new WeakSet,we=function(z){f(this,lt).clear();for(const _t of z)_t.isEmpty()||(f(this,lt).add(_t),_t.select());at(this,n,$t).call(this,{hasSelectedEditor:!0})},Bt(F,"_keyboardManager",new P([[["ctrl+a","mac+meta+a"],wt.prototype.selectAll],[["ctrl+z","mac+meta+z"],wt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],wt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],wt.prototype.delete],[["Escape","mac+Escape"],wt.prototype.unselectAll]])),c.AnnotationEditorUIManager=F},(V,c,K)=>{var B,U,J,pt,vt,At,bt,L,h,ne,E,Zt,O,Yt;Object.defineProperty(c,"__esModule",{value:!0}),c.StatTimer=c.RenderingCancelledException=c.PixelsPerInch=c.PageViewport=c.PDFDateString=c.DOMStandardFontDataFactory=c.DOMSVGFactory=c.DOMFilterFactory=c.DOMCanvasFactory=c.DOMCMapReaderFactory=c.AnnotationPrefix=void 0,c.deprecated=l,c.getColorValues=D,c.getCurrentTransform=W,c.getCurrentTransformInverse=tt,c.getFilenameFromUrl=C,c.getPdfFilenameFromUrl=T,c.getRGB=a,c.getXfaPageViewport=x,c.isDataScheme=r,c.isPdfFile=y,c.isValidFetchUrl=e,c.loadScript=i,c.setLayerDimensions=rt;var b=K(7),w=K(1);const X="http://www.w3.org/2000/svg",j="pdfjs_internal_id_";c.AnnotationPrefix=j;const lt=class{};let st=lt;Bt(st,"CSS",96),Bt(st,"PDF",72),Bt(st,"PDF_TO_CSS_UNITS",lt.CSS/lt.PDF),c.PixelsPerInch=st;class G extends b.BaseFilterFactory{constructor({docId:R,ownerDocument:t=globalThis.document}={}){super();Z(this,h);Z(this,E);Z(this,O);Z(this,B,void 0);Z(this,U,void 0);Z(this,J,void 0);Z(this,pt,void 0);Z(this,vt,void 0);Z(this,At,void 0);Z(this,bt,void 0);Z(this,L,0);gt(this,J,R),gt(this,pt,t)}addFilter(R){if(!R)return"none";let t=f(this,h,ne).get(R);if(t)return t;let n,m,S,v;if(R.length===1){const ot=R[0],ut=new Array(256);for(let ht=0;ht<256;ht++)ut[ht]=ot[ht]/255;v=n=m=S=ut.join(",")}else{const[ot,ut,ht]=R,dt=new Array(256),mt=new Array(256),Ct=new Array(256);for(let wt=0;wt<256;wt++)dt[wt]=ot[wt]/255,mt[wt]=ut[wt]/255,Ct[wt]=ht[wt]/255;n=dt.join(","),m=mt.join(","),S=Ct.join(","),v=`${n}${m}${S}`}if(t=f(this,h,ne).get(v),t)return f(this,h,ne).set(R,t),t;const q=`g_${f(this,J)}_transfer_map_${fe(this,L)._++}`,it=`url(#${q})`;f(this,h,ne).set(R,it),f(this,h,ne).set(v,it);const et=f(this,pt).createElementNS(X,"filter",X);et.setAttribute("id",q),et.setAttribute("color-interpolation-filters","sRGB");const nt=f(this,pt).createElementNS(X,"feComponentTransfer");return et.append(nt),at(this,O,Yt).call(this,nt,"feFuncR",n),at(this,O,Yt).call(this,nt,"feFuncG",m),at(this,O,Yt).call(this,nt,"feFuncB",S),f(this,E,Zt).append(et),it}addHCMFilter(R,t){var ht;const n=`${R}-${t}`;if(f(this,At)===n)return f(this,bt);if(gt(this,At,n),gt(this,bt,"none"),(ht=f(this,vt))==null||ht.remove(),!R||!t)return f(this,bt);f(this,E,Zt).style.color=R,R=getComputedStyle(f(this,E,Zt)).getPropertyValue("color");const m=a(R);R=w.Util.makeHexColor(...m),f(this,E,Zt).style.color=t,t=getComputedStyle(f(this,E,Zt)).getPropertyValue("color");const S=a(t);if(t=w.Util.makeHexColor(...S),f(this,E,Zt).style.color="",R==="#000000"&&t==="#ffffff"||R===t)return f(this,bt);const v=new Array(256);for(let dt=0;dt<=255;dt++){const mt=dt/255;v[dt]=mt<=.03928?mt/12.92:((mt+.055)/1.055)**2.4}const q=v.join(","),it=`g_${f(this,J)}_hcm_filter`,et=gt(this,vt,f(this,pt).createElementNS(X,"filter",X));et.setAttribute("id",it),et.setAttribute("color-interpolation-filters","sRGB");let nt=f(this,pt).createElementNS(X,"feComponentTransfer");et.append(nt),at(this,O,Yt).call(this,nt,"feFuncR",q),at(this,O,Yt).call(this,nt,"feFuncG",q),at(this,O,Yt).call(this,nt,"feFuncB",q);const ot=f(this,pt).createElementNS(X,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),et.append(ot),nt=f(this,pt).createElementNS(X,"feComponentTransfer"),et.append(nt);const ut=(dt,mt)=>{const Ct=m[dt]/255,wt=S[dt]/255,Pt=new Array(mt+1);for(let z=0;z<=mt;z++)Pt[z]=Ct+z/mt*(wt-Ct);return Pt.join(",")};return at(this,O,Yt).call(this,nt,"feFuncR",ut(0,5)),at(this,O,Yt).call(this,nt,"feFuncG",ut(1,5)),at(this,O,Yt).call(this,nt,"feFuncB",ut(2,5)),f(this,E,Zt).append(et),gt(this,bt,`url(#${it})`),f(this,bt)}destroy(R=!1){R&&f(this,bt)||(f(this,U)&&(f(this,U).parentNode.parentNode.remove(),gt(this,U,null)),f(this,B)&&(f(this,B).clear(),gt(this,B,null)),gt(this,L,0))}}B=new WeakMap,U=new WeakMap,J=new WeakMap,pt=new WeakMap,vt=new WeakMap,At=new WeakMap,bt=new WeakMap,L=new WeakMap,h=new WeakSet,ne=function(){return f(this,B)||gt(this,B,new Map)},E=new WeakSet,Zt=function(){if(!f(this,U)){const R=f(this,pt).createElement("div"),{style:t}=R;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=f(this,pt).createElementNS(X,"svg");n.setAttribute("width",0),n.setAttribute("height",0),gt(this,U,f(this,pt).createElementNS(X,"defs")),R.append(n),n.append(f(this,U)),f(this,pt).body.append(R)}return f(this,U)},O=new WeakSet,Yt=function(R,t,n){const m=f(this,pt).createElementNS(X,t);m.setAttribute("type","discrete"),m.setAttribute("tableValues",n),R.append(m)},c.DOMFilterFactory=G;class P extends b.BaseCanvasFactory{constructor({ownerDocument:k=globalThis.document}={}){super(),this._document=k}_createCanvas(k,R){const t=this._document.createElement("canvas");return t.width=k,t.height=R,t}}c.DOMCanvasFactory=P;async function A(M,k=!1){if(e(M,document.baseURI)){const R=await fetch(M);if(!R.ok)throw new Error(R.statusText);return k?new Uint8Array(await R.arrayBuffer()):(0,w.stringToBytes)(await R.text())}return new Promise((R,t)=>{const n=new XMLHttpRequest;n.open("GET",M,!0),k&&(n.responseType="arraybuffer"),n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){let m;if(k&&n.response?m=new Uint8Array(n.response):!k&&n.responseText&&(m=(0,w.stringToBytes)(n.responseText)),m){R(m);return}}t(new Error(n.statusText))}},n.send(null)})}class F extends b.BaseCMapReaderFactory{_fetchData(k,R){return A(k,this.isCompressed).then(t=>({cMapData:t,compressionType:R}))}}c.DOMCMapReaderFactory=F;class I extends b.BaseStandardFontDataFactory{_fetchData(k){return A(k,!0)}}c.DOMStandardFontDataFactory=I;class d extends b.BaseSVGFactory{_createSVG(k){return document.createElementNS(X,k)}}c.DOMSVGFactory=d;class o{constructor({viewBox:k,scale:R,rotation:t,offsetX:n=0,offsetY:m=0,dontFlip:S=!1}){this.viewBox=k,this.scale=R,this.rotation=t,this.offsetX=n,this.offsetY=m;const v=(k[2]+k[0])/2,q=(k[3]+k[1])/2;let it,et,nt,ot;switch(t%=360,t<0&&(t+=360),t){case 180:it=-1,et=0,nt=0,ot=1;break;case 90:it=0,et=1,nt=1,ot=0;break;case 270:it=0,et=-1,nt=-1,ot=0;break;case 0:it=1,et=0,nt=0,ot=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}S&&(nt=-nt,ot=-ot);let ut,ht,dt,mt;it===0?(ut=Math.abs(q-k[1])*R+n,ht=Math.abs(v-k[0])*R+m,dt=(k[3]-k[1])*R,mt=(k[2]-k[0])*R):(ut=Math.abs(v-k[0])*R+n,ht=Math.abs(q-k[1])*R+m,dt=(k[2]-k[0])*R,mt=(k[3]-k[1])*R),this.transform=[it*R,et*R,nt*R,ot*R,ut-it*R*v-nt*R*q,ht-et*R*v-ot*R*q],this.width=dt,this.height=mt}get rawDims(){const{viewBox:k}=this;return(0,w.shadow)(this,"rawDims",{pageWidth:k[2]-k[0],pageHeight:k[3]-k[1],pageX:k[0],pageY:k[1]})}clone({scale:k=this.scale,rotation:R=this.rotation,offsetX:t=this.offsetX,offsetY:n=this.offsetY,dontFlip:m=!1}={}){return new o({viewBox:this.viewBox.slice(),scale:k,rotation:R,offsetX:t,offsetY:n,dontFlip:m})}convertToViewportPoint(k,R){return w.Util.applyTransform([k,R],this.transform)}convertToViewportRectangle(k){const R=w.Util.applyTransform([k[0],k[1]],this.transform),t=w.Util.applyTransform([k[2],k[3]],this.transform);return[R[0],R[1],t[0],t[1]]}convertToPdfPoint(k,R){return w.Util.applyInverseTransform([k,R],this.transform)}}c.PageViewport=o;class p extends w.BaseException{constructor(k,R,t=0){super(k,"RenderingCancelledException"),this.type=R,this.extraDelay=t}}c.RenderingCancelledException=p;function r(M){const k=M.length;let R=0;for(;R<k&&M[R].trim()==="";)R++;return M.substring(R,R+5).toLowerCase()==="data:"}function y(M){return typeof M=="string"&&/\.pdf$/i.test(M)}function C(M,k=!1){return k||([M]=M.split(/[#?]/,1)),M.substring(M.lastIndexOf("/")+1)}function T(M,k="document.pdf"){if(typeof M!="string")return k;if(r(M))return(0,w.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),k;const R=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,t=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=R.exec(M);let m=t.exec(n[1])||t.exec(n[2])||t.exec(n[3]);if(m&&(m=m[0],m.includes("%")))try{m=t.exec(decodeURIComponent(m))[0]}catch{}return m||k}class _{constructor(){Bt(this,"started",Object.create(null));Bt(this,"times",[])}time(k){k in this.started&&(0,w.warn)(`Timer is already running for ${k}`),this.started[k]=Date.now()}timeEnd(k){k in this.started||(0,w.warn)(`Timer has not been started for ${k}`),this.times.push({name:k,start:this.started[k],end:Date.now()}),delete this.started[k]}toString(){const k=[];let R=0;for(const{name:t}of this.times)R=Math.max(t.length,R);for(const{name:t,start:n,end:m}of this.times)k.push(`${t.padEnd(R)} ${m-n}ms
`);return k.join("")}}c.StatTimer=_;function e(M,k){try{const{protocol:R}=k?new URL(M,k):new URL(M);return R==="http:"||R==="https:"}catch{return!1}}function i(M,k=!1){return new Promise((R,t)=>{const n=document.createElement("script");n.src=M,n.onload=function(m){k&&n.remove(),R(m)},n.onerror=function(){t(new Error(`Cannot load script at: ${n.src}`))},(document.head||document.documentElement).append(n)})}function l(M){console.log("Deprecated API usage: "+M)}let s;class g{static toDateObject(k){if(!k||typeof k!="string")return null;s||(s=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const R=s.exec(k);if(!R)return null;const t=parseInt(R[1],10);let n=parseInt(R[2],10);n=n>=1&&n<=12?n-1:0;let m=parseInt(R[3],10);m=m>=1&&m<=31?m:1;let S=parseInt(R[4],10);S=S>=0&&S<=23?S:0;let v=parseInt(R[5],10);v=v>=0&&v<=59?v:0;let q=parseInt(R[6],10);q=q>=0&&q<=59?q:0;const it=R[7]||"Z";let et=parseInt(R[8],10);et=et>=0&&et<=23?et:0;let nt=parseInt(R[9],10)||0;return nt=nt>=0&&nt<=59?nt:0,it==="-"?(S+=et,v+=nt):it==="+"&&(S-=et,v-=nt),new Date(Date.UTC(t,n,m,S,v,q))}}c.PDFDateString=g;function x(M,{scale:k=1,rotation:R=0}){const{width:t,height:n}=M.attributes.style,m=[0,0,parseInt(t),parseInt(n)];return new o({viewBox:m,scale:k,rotation:R})}function a(M){if(M.startsWith("#")){const k=parseInt(M.slice(1),16);return[(k&16711680)>>16,(k&65280)>>8,k&255]}return M.startsWith("rgb(")?M.slice(4,-1).split(",").map(k=>parseInt(k)):M.startsWith("rgba(")?M.slice(5,-1).split(",").map(k=>parseInt(k)).slice(0,3):((0,w.warn)(`Not a valid color format: "${M}"`),[0,0,0])}function D(M){const k=document.createElement("span");k.style.visibility="hidden",document.body.append(k);for(const R of M.keys()){k.style.color=R;const t=window.getComputedStyle(k).color;M.set(R,a(t))}k.remove()}function W(M){const{a:k,b:R,c:t,d:n,e:m,f:S}=M.getTransform();return[k,R,t,n,m,S]}function tt(M){const{a:k,b:R,c:t,d:n,e:m,f:S}=M.getTransform().invertSelf();return[k,R,t,n,m,S]}function rt(M,k,R=!1,t=!0){if(k instanceof o){const{pageWidth:n,pageHeight:m}=k.rawDims,{style:S}=M,v=`calc(var(--scale-factor) * ${n}px)`,q=`calc(var(--scale-factor) * ${m}px)`;!R||k.rotation%180===0?(S.width=v,S.height=q):(S.width=q,S.height=v)}t&&M.setAttribute("data-main-rotation",k.rotation)}},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BaseStandardFontDataFactory=c.BaseSVGFactory=c.BaseFilterFactory=c.BaseCanvasFactory=c.BaseCMapReaderFactory=void 0;var b=K(1);class w{constructor(){this.constructor===w&&(0,b.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(A){return"none"}addHCMFilter(A,F){return"none"}destroy(A=!1){}}c.BaseFilterFactory=w;class X{constructor(){this.constructor===X&&(0,b.unreachable)("Cannot initialize BaseCanvasFactory.")}create(A,F){if(A<=0||F<=0)throw new Error("Invalid canvas size");const I=this._createCanvas(A,F);return{canvas:I,context:I.getContext("2d")}}reset(A,F,I){if(!A.canvas)throw new Error("Canvas is not specified");if(F<=0||I<=0)throw new Error("Invalid canvas size");A.canvas.width=F,A.canvas.height=I}destroy(A){if(!A.canvas)throw new Error("Canvas is not specified");A.canvas.width=0,A.canvas.height=0,A.canvas=null,A.context=null}_createCanvas(A,F){(0,b.unreachable)("Abstract method `_createCanvas` called.")}}c.BaseCanvasFactory=X;class j{constructor({baseUrl:A=null,isCompressed:F=!0}){this.constructor===j&&(0,b.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=A,this.isCompressed=F}async fetch({name:A}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!A)throw new Error("CMap name must be specified.");const F=this.baseUrl+A+(this.isCompressed?".bcmap":""),I=this.isCompressed?b.CMapCompressionType.BINARY:b.CMapCompressionType.NONE;return this._fetchData(F,I).catch(d=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${F}`)})}_fetchData(A,F){(0,b.unreachable)("Abstract method `_fetchData` called.")}}c.BaseCMapReaderFactory=j;class st{constructor({baseUrl:A=null}){this.constructor===st&&(0,b.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=A}async fetch({filename:A}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!A)throw new Error("Font filename must be specified.");const F=`${this.baseUrl}${A}`;return this._fetchData(F).catch(I=>{throw new Error(`Unable to load font data at: ${F}`)})}_fetchData(A){(0,b.unreachable)("Abstract method `_fetchData` called.")}}c.BaseStandardFontDataFactory=st;class G{constructor(){this.constructor===G&&(0,b.unreachable)("Cannot initialize BaseSVGFactory.")}create(A,F,I=!1){if(A<=0||F<=0)throw new Error("Invalid SVG dimensions");const d=this._createSVG("svg:svg");return d.setAttribute("version","1.1"),I||(d.setAttribute("width",`${A}px`),d.setAttribute("height",`${F}px`)),d.setAttribute("preserveAspectRatio","none"),d.setAttribute("viewBox",`0 0 ${A} ${F}`),d}createElement(A){if(typeof A!="string")throw new Error("Invalid SVG element type");return this._createSVG(A)}_createSVG(A){(0,b.unreachable)("Abstract method `_createSVG` called.")}}c.BaseSVGFactory=G},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.MurmurHash3_64=void 0;var b=K(1);const w=3285377520,X=4294901760,j=65535;class st{constructor(P){this.h1=P?P&4294967295:w,this.h2=P?P&4294967295:w}update(P){let A,F;if(typeof P=="string"){A=new Uint8Array(P.length*2),F=0;for(let l=0,s=P.length;l<s;l++){const g=P.charCodeAt(l);g<=255?A[F++]=g:(A[F++]=g>>>8,A[F++]=g&255)}}else if((0,b.isArrayBuffer)(P))A=P.slice(),F=A.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const I=F>>2,d=F-I*4,o=new Uint32Array(A.buffer,0,I);let p=0,r=0,y=this.h1,C=this.h2;const T=3432918353,_=461845907,e=T&j,i=_&j;for(let l=0;l<I;l++)l&1?(p=o[l],p=p*T&X|p*e&j,p=p<<15|p>>>17,p=p*_&X|p*i&j,y^=p,y=y<<13|y>>>19,y=y*5+3864292196):(r=o[l],r=r*T&X|r*e&j,r=r<<15|r>>>17,r=r*_&X|r*i&j,C^=r,C=C<<13|C>>>19,C=C*5+3864292196);switch(p=0,d){case 3:p^=A[I*4+2]<<16;case 2:p^=A[I*4+1]<<8;case 1:p^=A[I*4],p=p*T&X|p*e&j,p=p<<15|p>>>17,p=p*_&X|p*i&j,I&1?y^=p:C^=p}this.h1=y,this.h2=C}hexdigest(){let P=this.h1,A=this.h2;return P^=A>>>1,P=P*3981806797&X|P*36045&j,A=A*4283543511&X|((A<<16|P>>>16)*2950163797&X)>>>16,P^=A>>>1,P=P*444984403&X|P*60499&j,A=A*3301882366&X|((A<<16|P>>>16)*3120437893&X)>>>16,P^=A>>>1,(P>>>0).toString(16).padStart(8,"0")+(A>>>0).toString(16).padStart(8,"0")}}c.MurmurHash3_64=st},(V,c,K)=>{var st;Object.defineProperty(c,"__esModule",{value:!0}),c.FontLoader=c.FontFaceObject=void 0;var b=K(1),w=K(10);class X{constructor({ownerDocument:P=globalThis.document,styleElement:A=null}){Z(this,st,new Set);this._document=P,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(P){this.nativeFontFaces.add(P),this._document.fonts.add(P)}removeNativeFontFace(P){this.nativeFontFaces.delete(P),this._document.fonts.delete(P)}insertRule(P){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const A=this.styleElement.sheet;A.insertRule(P,A.cssRules.length)}clear(){for(const P of this.nativeFontFaces)this._document.fonts.delete(P);this.nativeFontFaces.clear(),f(this,st).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(P){if(!(!P||f(this,st).has(P.loadedName))){if((0,b.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:A,src:F,style:I}=P,d=new FontFace(A,F,I);this.addNativeFontFace(d);try{await d.load(),f(this,st).add(A)}catch{(0,b.warn)(`Cannot load system font: ${P.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}(0,b.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(P){if(P.attached||P.missingFile&&!P.systemFontInfo)return;if(P.attached=!0,P.systemFontInfo){await this.loadSystemFont(P.systemFontInfo);return}if(this.isFontLoadingAPISupported){const F=P.createNativeFontFace();if(F){this.addNativeFontFace(F);try{await F.loaded}catch(I){throw(0,b.warn)(`Failed to load font '${F.family}': '${I}'.`),P.disableFontFace=!0,I}}return}const A=P.createFontFaceRule();if(A){if(this.insertRule(A),this.isSyncFontLoadingSupported)return;await new Promise(F=>{const I=this._queueLoadingCallback(F);this._prepareFontLoadEvent(P,I)})}}get isFontLoadingAPISupported(){var A;const P=!!((A=this._document)!=null&&A.fonts);return(0,b.shadow)(this,"isFontLoadingAPISupported",P)}get isSyncFontLoadingSupported(){let P=!1;return(w.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(P=!0),(0,b.shadow)(this,"isSyncFontLoadingSupported",P)}_queueLoadingCallback(P){function A(){for((0,b.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;F.length>0&&F[0].done;){const d=F.shift();setTimeout(d.callback,0)}}const{loadingRequests:F}=this,I={done:!1,complete:A,callback:P};return F.push(I),I}get _loadTestFont(){const P=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,b.shadow)(this,"_loadTestFont",P)}_prepareFontLoadEvent(P,A){function F(D,W){return D.charCodeAt(W)<<24|D.charCodeAt(W+1)<<16|D.charCodeAt(W+2)<<8|D.charCodeAt(W+3)&255}function I(D,W,tt,rt){const lt=D.substring(0,W),B=D.substring(W+tt);return lt+rt+B}let d,o;const p=this._document.createElement("canvas");p.width=1,p.height=1;const r=p.getContext("2d");let y=0;function C(D,W){if(++y>30){(0,b.warn)("Load test font never loaded."),W();return}if(r.font="30px "+D,r.fillText(".",0,20),r.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(C.bind(null,D,W))}const T=`lt${Date.now()}${this.loadTestFontId++}`;let _=this._loadTestFont;_=I(_,976,T.length,T);const i=16,l=1482184792;let s=F(_,i);for(d=0,o=T.length-3;d<o;d+=4)s=s-l+F(T,d)|0;d<T.length&&(s=s-l+F(T+"XXX",d)|0),_=I(_,i,4,(0,b.string32)(s));const g=`url(data:font/opentype;base64,${btoa(_)});`,x=`@font-face {font-family:"${T}";src:${g}}`;this.insertRule(x);const a=this._document.createElement("div");a.style.visibility="hidden",a.style.width=a.style.height="10px",a.style.position="absolute",a.style.top=a.style.left="0px";for(const D of[P.loadedName,T]){const W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=D,a.append(W)}this._document.body.append(a),C(T,()=>{a.remove(),A.complete()})}}st=new WeakMap,c.FontLoader=X;class j{constructor(P,{isEvalSupported:A=!0,disableFontFace:F=!1,ignoreErrors:I=!1,inspectFont:d=null}){this.compiledGlyphs=Object.create(null);for(const o in P)this[o]=P[o];this.isEvalSupported=A!==!1,this.disableFontFace=F===!0,this.ignoreErrors=I===!0,this._inspectFont=d}createNativeFontFace(){var A;if(!this.data||this.disableFontFace)return null;let P;if(!this.cssFontInfo)P=new FontFace(this.loadedName,this.data,{});else{const F={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(F.style=`oblique ${this.cssFontInfo.italicAngle}deg`),P=new FontFace(this.cssFontInfo.fontFamily,this.data,F)}return(A=this._inspectFont)==null||A.call(this,this),P}createFontFaceRule(){var I;if(!this.data||this.disableFontFace)return null;const P=(0,b.bytesToString)(this.data),A=`url(data:${this.mimetype};base64,${btoa(P)});`;let F;if(!this.cssFontInfo)F=`@font-face {font-family:"${this.loadedName}";src:${A}}`;else{let d=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(d+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),F=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${d}src:${A}}`}return(I=this._inspectFont)==null||I.call(this,this,A),F}getPathGenerator(P,A){if(this.compiledGlyphs[A]!==void 0)return this.compiledGlyphs[A];let F;try{F=P.get(this.loadedName+"_path_"+A)}catch(I){if(!this.ignoreErrors)throw I;return(0,b.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[A]=function(d,o){}}if(this.isEvalSupported&&b.FeatureTest.isEvalSupported){const I=[];for(const d of F){const o=d.args!==void 0?d.args.join(","):"";I.push("c.",d.cmd,"(",o,`);
`)}return this.compiledGlyphs[A]=new Function("c","size",I.join(""))}return this.compiledGlyphs[A]=function(I,d){for(const o of F)o.cmd==="scale"&&(o.args=[d,-d]),I[o.cmd].apply(I,o.args)}}}c.FontFaceObject=j},(V,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.isNodeJS=void 0;const K=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");c.isNodeJS=K},(V,c,K)=>{var J,Te,vt,Pe;Object.defineProperty(c,"__esModule",{value:!0}),c.CanvasGraphics=void 0;var b=K(1),w=K(6),X=K(12),j=K(13),st=K(10);const G=16,P=100,A=4096,F=15,I=10,d=1e3,o=16;function p(L,h){if(L._removeMirroring)throw new Error("Context is already forwarding operations.");L.__originalSave=L.save,L.__originalRestore=L.restore,L.__originalRotate=L.rotate,L.__originalScale=L.scale,L.__originalTranslate=L.translate,L.__originalTransform=L.transform,L.__originalSetTransform=L.setTransform,L.__originalResetTransform=L.resetTransform,L.__originalClip=L.clip,L.__originalMoveTo=L.moveTo,L.__originalLineTo=L.lineTo,L.__originalBezierCurveTo=L.bezierCurveTo,L.__originalRect=L.rect,L.__originalClosePath=L.closePath,L.__originalBeginPath=L.beginPath,L._removeMirroring=()=>{L.save=L.__originalSave,L.restore=L.__originalRestore,L.rotate=L.__originalRotate,L.scale=L.__originalScale,L.translate=L.__originalTranslate,L.transform=L.__originalTransform,L.setTransform=L.__originalSetTransform,L.resetTransform=L.__originalResetTransform,L.clip=L.__originalClip,L.moveTo=L.__originalMoveTo,L.lineTo=L.__originalLineTo,L.bezierCurveTo=L.__originalBezierCurveTo,L.rect=L.__originalRect,L.closePath=L.__originalClosePath,L.beginPath=L.__originalBeginPath,delete L._removeMirroring},L.save=function(){h.save(),this.__originalSave()},L.restore=function(){h.restore(),this.__originalRestore()},L.translate=function(E,N){h.translate(E,N),this.__originalTranslate(E,N)},L.scale=function(E,N){h.scale(E,N),this.__originalScale(E,N)},L.transform=function(E,N,O,H,M,k){h.transform(E,N,O,H,M,k),this.__originalTransform(E,N,O,H,M,k)},L.setTransform=function(E,N,O,H,M,k){h.setTransform(E,N,O,H,M,k),this.__originalSetTransform(E,N,O,H,M,k)},L.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},L.rotate=function(E){h.rotate(E),this.__originalRotate(E)},L.clip=function(E){h.clip(E),this.__originalClip(E)},L.moveTo=function(u,E){h.moveTo(u,E),this.__originalMoveTo(u,E)},L.lineTo=function(u,E){h.lineTo(u,E),this.__originalLineTo(u,E)},L.bezierCurveTo=function(u,E,N,O,H,M){h.bezierCurveTo(u,E,N,O,H,M),this.__originalBezierCurveTo(u,E,N,O,H,M)},L.rect=function(u,E,N,O){h.rect(u,E,N,O),this.__originalRect(u,E,N,O)},L.closePath=function(){h.closePath(),this.__originalClosePath()},L.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class r{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,u,E){let N;return this.cache[h]!==void 0?(N=this.cache[h],this.canvasFactory.reset(N,u,E)):(N=this.canvasFactory.create(u,E),this.cache[h]=N),N}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const u=this.cache[h];this.canvasFactory.destroy(u),delete this.cache[h]}}}function y(L,h,u,E,N,O,H,M,k,R){const[t,n,m,S,v,q]=(0,w.getCurrentTransform)(L);if(n===0&&m===0){const nt=H*t+v,ot=Math.round(nt),ut=M*S+q,ht=Math.round(ut),dt=(H+k)*t+v,mt=Math.abs(Math.round(dt)-ot)||1,Ct=(M+R)*S+q,wt=Math.abs(Math.round(Ct)-ht)||1;return L.setTransform(Math.sign(t),0,0,Math.sign(S),ot,ht),L.drawImage(h,u,E,N,O,0,0,mt,wt),L.setTransform(t,n,m,S,v,q),[mt,wt]}if(t===0&&S===0){const nt=M*m+v,ot=Math.round(nt),ut=H*n+q,ht=Math.round(ut),dt=(M+R)*m+v,mt=Math.abs(Math.round(dt)-ot)||1,Ct=(H+k)*n+q,wt=Math.abs(Math.round(Ct)-ht)||1;return L.setTransform(0,Math.sign(n),Math.sign(m),0,ot,ht),L.drawImage(h,u,E,N,O,0,0,wt,mt),L.setTransform(t,n,m,S,v,q),[wt,mt]}L.drawImage(h,u,E,N,O,H,M,k,R);const it=Math.hypot(t,n),et=Math.hypot(m,S);return[it*k,et*R]}function C(L){const{width:h,height:u}=L;if(h>d||u>d)return null;const E=1e3,N=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),O=h+1;let H=new Uint8Array(O*(u+1)),M,k,R;const t=h+7&-8;let n=new Uint8Array(t*u),m=0;for(const et of L.data){let nt=128;for(;nt>0;)n[m++]=et&nt?0:255,nt>>=1}let S=0;for(m=0,n[m]!==0&&(H[0]=1,++S),k=1;k<h;k++)n[m]!==n[m+1]&&(H[k]=n[m]?2:1,++S),m++;for(n[m]!==0&&(H[k]=2,++S),M=1;M<u;M++){m=M*t,R=M*O,n[m-t]!==n[m]&&(H[R]=n[m]?1:8,++S);let et=(n[m]?4:0)+(n[m-t]?8:0);for(k=1;k<h;k++)et=(et>>2)+(n[m+1]?4:0)+(n[m-t+1]?8:0),N[et]&&(H[R+k]=N[et],++S),m++;if(n[m-t]!==n[m]&&(H[R+k]=n[m]?2:4,++S),S>E)return null}for(m=t*(u-1),R=M*O,n[m]!==0&&(H[R]=8,++S),k=1;k<h;k++)n[m]!==n[m+1]&&(H[R+k]=n[m]?4:8,++S),m++;if(n[m]!==0&&(H[R+k]=4,++S),S>E)return null;const v=new Int32Array([0,O,-1,0,-O,0,0,0,1]),q=new Path2D;for(M=0;S&&M<=u;M++){let et=M*O;const nt=et+h;for(;et<nt&&!H[et];)et++;if(et===nt)continue;q.moveTo(et%O,M);const ot=et;let ut=H[et];do{const ht=v[ut];do et+=ht;while(!H[et]);const dt=H[et];dt!==5&&dt!==10?(ut=dt,H[et]=0):(ut=dt&51*ut>>4,H[et]&=ut>>2|ut<<2),q.lineTo(et%O,et/O|0),H[et]||--S}while(ot!==et);--M}return n=null,H=null,function(et){et.save(),et.scale(1/h,-1/u),et.translate(0,-u),et.fill(q),et.beginPath(),et.restore()}}class T{constructor(h,u){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=b.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=b.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=b.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,h,u])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,u){this.x=h,this.y=u}updatePathMinMax(h,u,E){[u,E]=b.Util.applyTransform([u,E],h),this.minX=Math.min(this.minX,u),this.minY=Math.min(this.minY,E),this.maxX=Math.max(this.maxX,u),this.maxY=Math.max(this.maxY,E)}updateRectMinMax(h,u){const E=b.Util.applyTransform(u,h),N=b.Util.applyTransform(u.slice(2),h);this.minX=Math.min(this.minX,E[0],N[0]),this.minY=Math.min(this.minY,E[1],N[1]),this.maxX=Math.max(this.maxX,E[0],N[0]),this.maxY=Math.max(this.maxY,E[1],N[1])}updateScalingPathMinMax(h,u){b.Util.scaleMinMax(h,u),this.minX=Math.min(this.minX,u[0]),this.maxX=Math.max(this.maxX,u[1]),this.minY=Math.min(this.minY,u[2]),this.maxY=Math.max(this.maxY,u[3])}updateCurvePathMinMax(h,u,E,N,O,H,M,k,R,t){const n=b.Util.bezierBoundingBox(u,E,N,O,H,M,k,R);if(t){t[0]=Math.min(t[0],n[0],n[2]),t[1]=Math.max(t[1],n[0],n[2]),t[2]=Math.min(t[2],n[1],n[3]),t[3]=Math.max(t[3],n[1],n[3]);return}this.updateRectMinMax(h,n)}getPathBoundingBox(h=X.PathType.FILL,u=null){const E=[this.minX,this.minY,this.maxX,this.maxY];if(h===X.PathType.STROKE){u||(0,b.unreachable)("Stroke bounding box must include transform.");const N=b.Util.singularValueDecompose2dScale(u),O=N[0]*this.lineWidth/2,H=N[1]*this.lineWidth/2;E[0]-=O,E[1]-=H,E[2]+=O,E[3]+=H}return E}updateClipFromPath(){const h=b.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=X.PathType.FILL,u=null){return b.Util.intersect(this.clipBox,this.getPathBoundingBox(h,u))}}function _(L,h){if(typeof ImageData<"u"&&h instanceof ImageData){L.putImageData(h,0,0);return}const u=h.height,E=h.width,N=u%o,O=(u-N)/o,H=N===0?O:O+1,M=L.createImageData(E,o);let k=0,R;const t=h.data,n=M.data;let m,S,v,q;if(h.kind===b.ImageKind.GRAYSCALE_1BPP){const it=t.byteLength,et=new Uint32Array(n.buffer,0,n.byteLength>>2),nt=et.length,ot=E+7>>3,ut=4294967295,ht=b.FeatureTest.isLittleEndian?4278190080:255;for(m=0;m<H;m++){for(v=m<O?o:N,R=0,S=0;S<v;S++){const dt=it-k;let mt=0;const Ct=dt>ot?E:dt*8-7,wt=Ct&-8;let Pt=0,z=0;for(;mt<wt;mt+=8)z=t[k++],et[R++]=z&128?ut:ht,et[R++]=z&64?ut:ht,et[R++]=z&32?ut:ht,et[R++]=z&16?ut:ht,et[R++]=z&8?ut:ht,et[R++]=z&4?ut:ht,et[R++]=z&2?ut:ht,et[R++]=z&1?ut:ht;for(;mt<Ct;mt++)Pt===0&&(z=t[k++],Pt=128),et[R++]=z&Pt?ut:ht,Pt>>=1}for(;R<nt;)et[R++]=0;L.putImageData(M,0,m*o)}}else if(h.kind===b.ImageKind.RGBA_32BPP){for(S=0,q=E*o*4,m=0;m<O;m++)n.set(t.subarray(k,k+q)),k+=q,L.putImageData(M,0,S),S+=o;m<H&&(q=E*N*4,n.set(t.subarray(k,k+q)),L.putImageData(M,0,S))}else if(h.kind===b.ImageKind.RGB_24BPP)for(v=o,q=E*v,m=0;m<H;m++){for(m>=O&&(v=N,q=E*v),R=0,S=q;S--;)n[R++]=t[k++],n[R++]=t[k++],n[R++]=t[k++],n[R++]=255;L.putImageData(M,0,m*o)}else throw new Error(`bad image kind: ${h.kind}`)}function e(L,h){if(h.bitmap){L.drawImage(h.bitmap,0,0);return}const u=h.height,E=h.width,N=u%o,O=(u-N)/o,H=N===0?O:O+1,M=L.createImageData(E,o);let k=0;const R=h.data,t=M.data;for(let n=0;n<H;n++){const m=n<O?o:N;({srcPos:k}=(0,j.convertBlackAndWhiteToRGBA)({src:R,srcPos:k,dest:t,width:E,height:m,nonBlackColor:0})),L.putImageData(M,0,n*o)}}function i(L,h){const u=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const E of u)L[E]!==void 0&&(h[E]=L[E]);L.setLineDash!==void 0&&(h.setLineDash(L.getLineDash()),h.lineDashOffset=L.lineDashOffset)}function l(L){L.strokeStyle=L.fillStyle="#000000",L.fillRule="nonzero",L.globalAlpha=1,L.lineWidth=1,L.lineCap="butt",L.lineJoin="miter",L.miterLimit=10,L.globalCompositeOperation="source-over",L.font="10px sans-serif",L.setLineDash!==void 0&&(L.setLineDash([]),L.lineDashOffset=0),st.isNodeJS||(L.filter="none")}function s(L,h,u,E){const N=L.length;for(let O=3;O<N;O+=4){const H=L[O];if(H===0)L[O-3]=h,L[O-2]=u,L[O-1]=E;else if(H<255){const M=255-H;L[O-3]=L[O-3]*H+h*M>>8,L[O-2]=L[O-2]*H+u*M>>8,L[O-1]=L[O-1]*H+E*M>>8}}}function g(L,h,u){const E=L.length,N=1/255;for(let O=3;O<E;O+=4){const H=u?u[L[O]]:L[O];h[O]=h[O]*H*N|0}}function x(L,h,u){const E=L.length;for(let N=3;N<E;N+=4){const O=L[N-3]*77+L[N-2]*152+L[N-1]*28;h[N]=u?h[N]*u[O>>8]>>8:h[N]*O>>16}}function a(L,h,u,E,N,O,H,M,k,R,t){const n=!!O,m=n?O[0]:0,S=n?O[1]:0,v=n?O[2]:0;let q;N==="Luminosity"?q=x:q=g;const et=Math.min(E,Math.ceil(1048576/u));for(let nt=0;nt<E;nt+=et){const ot=Math.min(et,E-nt),ut=L.getImageData(M-R,nt+(k-t),u,ot),ht=h.getImageData(M,nt+k,u,ot);n&&s(ut.data,m,S,v),q(ut.data,ht.data,H),h.putImageData(ht,M,nt+k)}}function D(L,h,u,E){const N=E[0],O=E[1],H=E[2]-N,M=E[3]-O;H===0||M===0||(a(h.context,u,H,M,h.subtype,h.backdrop,h.transferMap,N,O,h.offsetX,h.offsetY),L.save(),L.globalAlpha=1,L.globalCompositeOperation="source-over",L.setTransform(1,0,0,1,0,0),L.drawImage(u.canvas,0,0),L.restore())}function W(L,h){const u=b.Util.singularValueDecompose2dScale(L);u[0]=Math.fround(u[0]),u[1]=Math.fround(u[1]);const E=Math.fround((globalThis.devicePixelRatio||1)*w.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:u[0]<=E||u[1]<=E}const tt=["butt","round","square"],rt=["miter","round","bevel"],lt={},B={},bt=class{constructor(h,u,E,N,O,{optionalContentConfig:H,markedContentStack:M=null},k,R){Z(this,J);Z(this,vt);this.ctx=h,this.current=new T(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=u,this.objs=E,this.canvasFactory=N,this.filterFactory=O,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=M||[],this.optionalContentConfig=H,this.cachedCanvases=new r(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=k,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=R,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,u=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):u}beginDrawing({transform:h,viewport:u,transparency:E=!1,background:N=null}){const O=this.ctx.canvas.width,H=this.ctx.canvas.height,M=this.ctx.fillStyle;if(this.ctx.fillStyle=N||"#ffffff",this.ctx.fillRect(0,0,O,H),this.ctx.fillStyle=M,E){const k=this.cachedCanvases.getCanvas("transparent",O,H);this.compositeCtx=this.ctx,this.transparentCanvas=k.canvas,this.ctx=k.context,this.ctx.save(),this.ctx.transform(...(0,w.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),l(this.ctx),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...u.transform),this.viewportScale=u.scale,this.baseTransform=(0,w.getCurrentTransform)(this.ctx)}executeOperatorList(h,u,E,N){const O=h.argsArray,H=h.fnArray;let M=u||0;const k=O.length;if(k===M)return M;const R=k-M>I&&typeof E=="function",t=R?Date.now()+F:0;let n=0;const m=this.commonObjs,S=this.objs;let v;for(;;){if(N!==void 0&&M===N.nextBreakPoint)return N.breakIt(M,E),M;if(v=H[M],v!==b.OPS.dependency)this[v].apply(this,O[M]);else for(const q of O[M]){const it=q.startsWith("g_")?m:S;if(!it.has(q))return it.get(q,E),M}if(M++,M===k)return M;if(R&&++n>I){if(Date.now()>t)return E(),M;n=0}}}endDrawing(){at(this,J,Te).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const u of h.values())typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement&&(u.width=u.height=0);h.clear()}this._cachedBitmapsMap.clear(),at(this,vt,Pe).call(this)}_scaleImage(h,u){const E=h.width,N=h.height;let O=Math.max(Math.hypot(u[0],u[1]),1),H=Math.max(Math.hypot(u[2],u[3]),1),M=E,k=N,R="prescale1",t,n;for(;O>2&&M>1||H>2&&k>1;){let m=M,S=k;O>2&&M>1&&(m=M>=16384?Math.floor(M/2)-1||1:Math.ceil(M/2),O/=M/m),H>2&&k>1&&(S=k>=16384?Math.floor(k/2)-1||1:Math.ceil(k)/2,H/=k/S),t=this.cachedCanvases.getCanvas(R,m,S),n=t.context,n.clearRect(0,0,m,S),n.drawImage(h,0,0,M,k,0,0,m,S),h=t.canvas,M=m,k=S,R=R==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:M,paintHeight:k}}_createMaskCanvas(h){const u=this.ctx,{width:E,height:N}=h,O=this.current.fillColor,H=this.current.patternFill,M=(0,w.getCurrentTransform)(u);let k,R,t,n;if((h.bitmap||h.data)&&h.count>1){const mt=h.bitmap||h.data.buffer;R=JSON.stringify(H?M:[M.slice(0,4),O]),k=this._cachedBitmapsMap.get(mt),k||(k=new Map,this._cachedBitmapsMap.set(mt,k));const Ct=k.get(R);if(Ct&&!H){const wt=Math.round(Math.min(M[0],M[2])+M[4]),Pt=Math.round(Math.min(M[1],M[3])+M[5]);return{canvas:Ct,offsetX:wt,offsetY:Pt}}t=Ct}t||(n=this.cachedCanvases.getCanvas("maskCanvas",E,N),e(n.context,h));let m=b.Util.transform(M,[1/E,0,0,-1/N,0,0]);m=b.Util.transform(m,[1,0,0,1,0,-N]);const S=b.Util.applyTransform([0,0],m),v=b.Util.applyTransform([E,N],m),q=b.Util.normalizeRect([S[0],S[1],v[0],v[1]]),it=Math.round(q[2]-q[0])||1,et=Math.round(q[3]-q[1])||1,nt=this.cachedCanvases.getCanvas("fillCanvas",it,et),ot=nt.context,ut=Math.min(S[0],v[0]),ht=Math.min(S[1],v[1]);ot.translate(-ut,-ht),ot.transform(...m),t||(t=this._scaleImage(n.canvas,(0,w.getCurrentTransformInverse)(ot)),t=t.img,k&&H&&k.set(R,t)),ot.imageSmoothingEnabled=W((0,w.getCurrentTransform)(ot),h.interpolate),y(ot,t,0,0,t.width,t.height,0,0,E,N),ot.globalCompositeOperation="source-in";const dt=b.Util.transform((0,w.getCurrentTransformInverse)(ot),[1,0,0,1,-ut,-ht]);return ot.fillStyle=H?O.getPattern(u,this,dt,X.PathType.FILL):O,ot.fillRect(0,0,E,N),k&&!H&&(this.cachedCanvases.delete("fillCanvas"),k.set(R,nt.canvas)),{canvas:nt.canvas,offsetX:Math.round(ut),offsetY:Math.round(ht)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=tt[h]}setLineJoin(h){this.ctx.lineJoin=rt[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,u){const E=this.ctx;E.setLineDash!==void 0&&(E.setLineDash(h),E.lineDashOffset=u)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[u,E]of h)switch(u){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E[0],E[1]);break;case"CA":this.current.strokeAlpha=E;break;case"ca":this.current.fillAlpha=E,this.ctx.globalAlpha=E;break;case"BM":this.ctx.globalCompositeOperation=E;break;case"SMask":this.current.activeSMask=E?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(E);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,u=this.ctx.canvas.height,E="smaskGroupAt"+this.groupLevel,N=this.cachedCanvases.getCanvas(E,h,u);this.suspendedCtx=this.ctx,this.ctx=N.context;const O=this.ctx;O.setTransform(...(0,w.getCurrentTransform)(this.suspendedCtx)),i(this.suspendedCtx,O),p(O,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const u=this.current.activeSMask,E=this.suspendedCtx;D(E,u,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(h,u,E,N,O,H){this.ctx.transform(h,u,E,N,O,H),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(h,u,E){const N=this.ctx,O=this.current;let H=O.x,M=O.y,k,R;const t=(0,w.getCurrentTransform)(N),n=t[0]===0&&t[3]===0||t[1]===0&&t[2]===0,m=n?E.slice(0):null;for(let S=0,v=0,q=h.length;S<q;S++)switch(h[S]|0){case b.OPS.rectangle:H=u[v++],M=u[v++];const it=u[v++],et=u[v++],nt=H+it,ot=M+et;N.moveTo(H,M),it===0||et===0?N.lineTo(nt,ot):(N.lineTo(nt,M),N.lineTo(nt,ot),N.lineTo(H,ot)),n||O.updateRectMinMax(t,[H,M,nt,ot]),N.closePath();break;case b.OPS.moveTo:H=u[v++],M=u[v++],N.moveTo(H,M),n||O.updatePathMinMax(t,H,M);break;case b.OPS.lineTo:H=u[v++],M=u[v++],N.lineTo(H,M),n||O.updatePathMinMax(t,H,M);break;case b.OPS.curveTo:k=H,R=M,H=u[v+4],M=u[v+5],N.bezierCurveTo(u[v],u[v+1],u[v+2],u[v+3],H,M),O.updateCurvePathMinMax(t,k,R,u[v],u[v+1],u[v+2],u[v+3],H,M,m),v+=6;break;case b.OPS.curveTo2:k=H,R=M,N.bezierCurveTo(H,M,u[v],u[v+1],u[v+2],u[v+3]),O.updateCurvePathMinMax(t,k,R,H,M,u[v],u[v+1],u[v+2],u[v+3],m),H=u[v+2],M=u[v+3],v+=4;break;case b.OPS.curveTo3:k=H,R=M,H=u[v+2],M=u[v+3],N.bezierCurveTo(u[v],u[v+1],H,M,H,M),O.updateCurvePathMinMax(t,k,R,u[v],u[v+1],H,M,H,M,m),v+=4;break;case b.OPS.closePath:N.closePath();break}n&&O.updateScalingPathMinMax(t,m),O.setCurrentPoint(H,M)}closePath(){this.ctx.closePath()}stroke(h=!0){const u=this.ctx,E=this.current.strokeColor;u.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof E=="object"&&(E==null?void 0:E.getPattern)?(u.save(),u.strokeStyle=E.getPattern(u,this,(0,w.getCurrentTransformInverse)(u),X.PathType.STROKE),this.rescaleAndStroke(!1),u.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),u.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h=!0){const u=this.ctx,E=this.current.fillColor,N=this.current.patternFill;let O=!1;N&&(u.save(),u.fillStyle=E.getPattern(u,this,(0,w.getCurrentTransformInverse)(u),X.PathType.FILL),O=!0);const H=this.current.getClippedPathBoundingBox();this.contentVisible&&H!==null&&(this.pendingEOFill?(u.fill("evenodd"),this.pendingEOFill=!1):u.fill()),O&&u.restore(),h&&this.consumePath(H)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=lt}eoClip(){this.pendingClip=B}beginText(){this.current.textMatrix=b.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,u=this.ctx;if(h===void 0){u.beginPath();return}u.save(),u.beginPath();for(const E of h)u.setTransform(...E.transform),u.translate(E.x,E.y),E.addToPath(u,E.fontSize);u.restore(),u.clip(),u.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,u){var t;const E=this.commonObjs.get(h),N=this.current;if(!E)throw new Error(`Can't find font for ${h}`);if(N.fontMatrix=E.fontMatrix||b.FONT_IDENTITY_MATRIX,(N.fontMatrix[0]===0||N.fontMatrix[3]===0)&&(0,b.warn)("Invalid font matrix for font "+h),u<0?(u=-u,N.fontDirection=-1):N.fontDirection=1,this.current.font=E,this.current.fontSize=u,E.isType3Font)return;const O=E.loadedName||"sans-serif",H=((t=E.systemFontInfo)==null?void 0:t.css)||`"${O}", ${E.fallbackName}`;let M="normal";E.black?M="900":E.bold&&(M="bold");const k=E.italic?"italic":"normal";let R=u;u<G?R=G:u>P&&(R=P),this.current.fontSizeScale=u/R,this.ctx.font=`${k} ${M} ${R}px ${H}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,u){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=u}setLeadingMoveText(h,u){this.setLeading(-u),this.moveText(h,u)}setTextMatrix(h,u,E,N,O,H){this.current.textMatrix=[h,u,E,N,O,H],this.current.textMatrixScale=Math.hypot(h,u),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,u,E,N){const O=this.ctx,H=this.current,M=H.font,k=H.textRenderingMode,R=H.fontSize/H.fontSizeScale,t=k&b.TextRenderingMode.FILL_STROKE_MASK,n=!!(k&b.TextRenderingMode.ADD_TO_PATH_FLAG),m=H.patternFill&&!M.missingFile;let S;(M.disableFontFace||n||m)&&(S=M.getPathGenerator(this.commonObjs,h)),M.disableFontFace||m?(O.save(),O.translate(u,E),O.beginPath(),S(O,R),N&&O.setTransform(...N),(t===b.TextRenderingMode.FILL||t===b.TextRenderingMode.FILL_STROKE)&&O.fill(),(t===b.TextRenderingMode.STROKE||t===b.TextRenderingMode.FILL_STROKE)&&O.stroke(),O.restore()):((t===b.TextRenderingMode.FILL||t===b.TextRenderingMode.FILL_STROKE)&&O.fillText(h,u,E),(t===b.TextRenderingMode.STROKE||t===b.TextRenderingMode.FILL_STROKE)&&O.strokeText(h,u,E)),n&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,w.getCurrentTransform)(O),x:u,y:E,fontSize:R,addToPath:S})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const u=h.getImageData(0,0,10,10).data;let E=!1;for(let N=3;N<u.length;N+=4)if(u[N]>0&&u[N]<255){E=!0;break}return(0,b.shadow)(this,"isFontSubpixelAAEnabled",E)}showText(h){const u=this.current,E=u.font;if(E.isType3Font)return this.showType3Text(h);const N=u.fontSize;if(N===0)return;const O=this.ctx,H=u.fontSizeScale,M=u.charSpacing,k=u.wordSpacing,R=u.fontDirection,t=u.textHScale*R,n=h.length,m=E.vertical,S=m?1:-1,v=E.defaultVMetrics,q=N*u.fontMatrix[0],it=u.textRenderingMode===b.TextRenderingMode.FILL&&!E.disableFontFace&&!u.patternFill;O.save(),O.transform(...u.textMatrix),O.translate(u.x,u.y+u.textRise),R>0?O.scale(t,-1):O.scale(t,1);let et;if(u.patternFill){O.save();const dt=u.fillColor.getPattern(O,this,(0,w.getCurrentTransformInverse)(O),X.PathType.FILL);et=(0,w.getCurrentTransform)(O),O.restore(),O.fillStyle=dt}let nt=u.lineWidth;const ot=u.textMatrixScale;if(ot===0||nt===0){const dt=u.textRenderingMode&b.TextRenderingMode.FILL_STROKE_MASK;(dt===b.TextRenderingMode.STROKE||dt===b.TextRenderingMode.FILL_STROKE)&&(nt=this.getSinglePixelWidth())}else nt/=ot;if(H!==1&&(O.scale(H,H),nt/=H),O.lineWidth=nt,E.isInvalidPDFjsFont){const dt=[];let mt=0;for(const Ct of h)dt.push(Ct.unicode),mt+=Ct.width;O.fillText(dt.join(""),0,0),u.x+=mt*q*t,O.restore(),this.compose();return}let ut=0,ht;for(ht=0;ht<n;++ht){const dt=h[ht];if(typeof dt=="number"){ut+=S*dt*N/1e3;continue}let mt=!1;const Ct=(dt.isSpace?k:0)+M,wt=dt.fontChar,Pt=dt.accent;let z,_t,kt=dt.width;if(m){const ct=dt.vmetric||v,$=-(dt.vmetric?ct[1]:kt*.5)*q,Y=ct[2]*q;kt=ct?-ct[0]:kt,z=$/H,_t=(ut+Y)/H}else z=ut/H,_t=0;if(E.remeasure&&kt>0){const ct=O.measureText(wt).width*1e3/N*H;if(kt<ct&&this.isFontSubpixelAAEnabled){const $=kt/ct;mt=!0,O.save(),O.scale($,1),z/=$}else kt!==ct&&(z+=(kt-ct)/2e3*N/H)}if(this.contentVisible&&(dt.isInFont||E.missingFile)){if(it&&!Pt)O.fillText(wt,z,_t);else if(this.paintChar(wt,z,_t,et),Pt){const ct=z+N*Pt.offset.x/H,$=_t-N*Pt.offset.y/H;this.paintChar(Pt.fontChar,ct,$,et)}}let Mt;m?Mt=kt*q-Ct*R:Mt=kt*q+Ct*R,ut+=Mt,mt&&O.restore()}m?u.y-=ut:u.x+=ut*t,O.restore(),this.compose()}showType3Text(h){const u=this.ctx,E=this.current,N=E.font,O=E.fontSize,H=E.fontDirection,M=N.vertical?1:-1,k=E.charSpacing,R=E.wordSpacing,t=E.textHScale*H,n=E.fontMatrix||b.FONT_IDENTITY_MATRIX,m=h.length,S=E.textRenderingMode===b.TextRenderingMode.INVISIBLE;let v,q,it,et;if(!(S||O===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,u.save(),u.transform(...E.textMatrix),u.translate(E.x,E.y),u.scale(t,H),v=0;v<m;++v){if(q=h[v],typeof q=="number"){et=M*q*O/1e3,this.ctx.translate(et,0),E.x+=et*t;continue}const nt=(q.isSpace?R:0)+k,ot=N.charProcOperatorList[q.operatorListId];if(!ot){(0,b.warn)(`Type3 character "${q.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=q,this.save(),u.scale(O,O),u.transform(...n),this.executeOperatorList(ot),this.restore()),it=b.Util.applyTransform([q.width,0],n)[0]*O+nt,u.translate(it,0),E.x+=it*t}u.restore(),this.processingType3=null}}setCharWidth(h,u){}setCharWidthAndBounds(h,u,E,N,O,H){this.ctx.rect(E,N,O-E,H-N),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let u;if(h[0]==="TilingPattern"){const E=h[1],N=this.baseTransform||(0,w.getCurrentTransform)(this.ctx),O={createCanvasGraphics:H=>new bt(H,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};u=new X.TilingPattern(h,E,this.ctx,O,N)}else u=this._getPattern(h[1],h[2]);return u}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,u,E){const N=b.Util.makeHexColor(h,u,E);this.ctx.strokeStyle=N,this.current.strokeColor=N}setFillRGBColor(h,u,E){const N=b.Util.makeHexColor(h,u,E);this.ctx.fillStyle=N,this.current.fillColor=N,this.current.patternFill=!1}_getPattern(h,u=null){let E;return this.cachedPatterns.has(h)?E=this.cachedPatterns.get(h):(E=(0,X.getShadingPattern)(this.getObject(h)),this.cachedPatterns.set(h,E)),u&&(E.matrix=u),E}shadingFill(h){if(!this.contentVisible)return;const u=this.ctx;this.save();const E=this._getPattern(h);u.fillStyle=E.getPattern(u,this,(0,w.getCurrentTransformInverse)(u),X.PathType.SHADING);const N=(0,w.getCurrentTransformInverse)(u);if(N){const O=u.canvas,H=O.width,M=O.height,k=b.Util.applyTransform([0,0],N),R=b.Util.applyTransform([0,M],N),t=b.Util.applyTransform([H,0],N),n=b.Util.applyTransform([H,M],N),m=Math.min(k[0],R[0],t[0],n[0]),S=Math.min(k[1],R[1],t[1],n[1]),v=Math.max(k[0],R[0],t[0],n[0]),q=Math.max(k[1],R[1],t[1],n[1]);this.ctx.fillRect(m,S,v-m,q-S)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,b.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,b.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,u){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform(...h),this.baseTransform=(0,w.getCurrentTransform)(this.ctx),u)){const E=u[2]-u[0],N=u[3]-u[1];this.ctx.rect(u[0],u[1],E,N),this.current.updateRectMinMax((0,w.getCurrentTransform)(this.ctx),u),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const u=this.ctx;h.isolated||(0,b.info)("TODO: Support non-isolated groups."),h.knockout&&(0,b.warn)("Knockout groups not supported.");const E=(0,w.getCurrentTransform)(u);if(h.matrix&&u.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let N=b.Util.getAxialAlignedBoundingBox(h.bbox,(0,w.getCurrentTransform)(u));const O=[0,0,u.canvas.width,u.canvas.height];N=b.Util.intersect(N,O)||[0,0,0,0];const H=Math.floor(N[0]),M=Math.floor(N[1]);let k=Math.max(Math.ceil(N[2])-H,1),R=Math.max(Math.ceil(N[3])-M,1),t=1,n=1;k>A&&(t=k/A,k=A),R>A&&(n=R/A,R=A),this.current.startNewPathAndClipBox([0,0,k,R]);let m="groupAt"+this.groupLevel;h.smask&&(m+="_smask_"+this.smaskCounter++%2);const S=this.cachedCanvases.getCanvas(m,k,R),v=S.context;v.scale(1/t,1/n),v.translate(-H,-M),v.transform(...E),h.smask?this.smaskStack.push({canvas:S.canvas,context:v,offsetX:H,offsetY:M,scaleX:t,scaleY:n,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(u.setTransform(1,0,0,1,0,0),u.translate(H,M),u.scale(t,n),u.save()),i(u,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(u),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const u=this.ctx,E=this.groupStack.pop();if(this.ctx=E,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const N=(0,w.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...N);const O=b.Util.getAxialAlignedBoundingBox([0,0,u.canvas.width,u.canvas.height],N);this.ctx.drawImage(u.canvas,0,0),this.ctx.restore(),this.compose(O)}}beginAnnotation(h,u,E,N,O){if(at(this,J,Te).call(this),l(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(u)&&u.length===4){const H=u[2]-u[0],M=u[3]-u[1];if(O&&this.annotationCanvasMap){E=E.slice(),E[4]-=u[0],E[5]-=u[1],u=u.slice(),u[0]=u[1]=0,u[2]=H,u[3]=M;const[k,R]=b.Util.singularValueDecompose2dScale((0,w.getCurrentTransform)(this.ctx)),{viewportScale:t}=this,n=Math.ceil(H*this.outputScaleX*t),m=Math.ceil(M*this.outputScaleY*t);this.annotationCanvas=this.canvasFactory.create(n,m);const{canvas:S,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(h,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(k,0,0,-R,0,M*R),l(this.ctx)}else l(this.ctx),this.ctx.rect(u[0],u[1],H,M),this.ctx.clip(),this.endPath()}this.current=new T(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...E),this.transform(...N)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),at(this,vt,Pe).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const u=h.count;h=this.getObject(h.data,h),h.count=u;const E=this.ctx,N=this.processingType3;if(N&&(N.compiled===void 0&&(N.compiled=C(h)),N.compiled)){N.compiled(E);return}const O=this._createMaskCanvas(h),H=O.canvas;E.save(),E.setTransform(1,0,0,1,0,0),E.drawImage(H,O.offsetX,O.offsetY),E.restore(),this.compose()}paintImageMaskXObjectRepeat(h,u,E=0,N=0,O,H){if(!this.contentVisible)return;h=this.getObject(h.data,h);const M=this.ctx;M.save();const k=(0,w.getCurrentTransform)(M);M.transform(u,E,N,O,0,0);const R=this._createMaskCanvas(h);M.setTransform(1,0,0,1,R.offsetX-k[4],R.offsetY-k[5]);for(let t=0,n=H.length;t<n;t+=2){const m=b.Util.transform(k,[u,E,N,O,H[t],H[t+1]]),[S,v]=b.Util.applyTransform([0,0],m);M.drawImage(R.canvas,S,v)}M.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const u=this.ctx,E=this.current.fillColor,N=this.current.patternFill;for(const O of h){const{data:H,width:M,height:k,transform:R}=O,t=this.cachedCanvases.getCanvas("maskCanvas",M,k),n=t.context;n.save();const m=this.getObject(H,O);e(n,m),n.globalCompositeOperation="source-in",n.fillStyle=N?E.getPattern(n,this,(0,w.getCurrentTransformInverse)(u),X.PathType.FILL):E,n.fillRect(0,0,M,k),n.restore(),u.save(),u.transform(...R),u.scale(1,-1),y(u,t.canvas,0,0,M,k,0,-1,1,1),u.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const u=this.getObject(h);if(!u){(0,b.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(u)}paintImageXObjectRepeat(h,u,E,N){if(!this.contentVisible)return;const O=this.getObject(h);if(!O){(0,b.warn)("Dependent image isn't ready yet");return}const H=O.width,M=O.height,k=[];for(let R=0,t=N.length;R<t;R+=2)k.push({transform:[u,0,0,E,N[R],N[R+1]],x:0,y:0,w:H,h:M});this.paintInlineImageXObjectGroup(O,k)}applyTransferMapsToCanvas(h){return this.current.transferMaps!=="none"&&(h.filter=this.current.transferMaps,h.drawImage(h.canvas,0,0),h.filter="none"),h.canvas}applyTransferMapsToBitmap(h){if(this.current.transferMaps==="none")return h.bitmap;const{bitmap:u,width:E,height:N}=h,O=this.cachedCanvases.getCanvas("inlineImage",E,N),H=O.context;return H.filter=this.current.transferMaps,H.drawImage(u,0,0),H.filter="none",O.canvas}paintInlineImageXObject(h){if(!this.contentVisible)return;const u=h.width,E=h.height,N=this.ctx;this.save(),st.isNodeJS||(N.filter="none"),N.scale(1/u,-1/E);let O;if(h.bitmap)O=this.applyTransferMapsToBitmap(h);else if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)O=h;else{const k=this.cachedCanvases.getCanvas("inlineImage",u,E).context;_(k,h),O=this.applyTransferMapsToCanvas(k)}const H=this._scaleImage(O,(0,w.getCurrentTransformInverse)(N));N.imageSmoothingEnabled=W((0,w.getCurrentTransform)(N),h.interpolate),y(N,H.img,0,0,H.paintWidth,H.paintHeight,0,-E,u,E),this.compose(),this.restore()}paintInlineImageXObjectGroup(h,u){if(!this.contentVisible)return;const E=this.ctx;let N;if(h.bitmap)N=h.bitmap;else{const O=h.width,H=h.height,k=this.cachedCanvases.getCanvas("inlineImage",O,H).context;_(k,h),N=this.applyTransferMapsToCanvas(k)}for(const O of u)E.save(),E.transform(...O.transform),E.scale(1,-1),y(E,N,O.x,O.y,O.w,O.h,0,-1,1,1),E.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,u){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,u){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(u)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const u=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const E=this.ctx;this.pendingClip&&(u||(this.pendingClip===B?E.clip("evenodd"):E.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),E.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,w.getCurrentTransform)(this.ctx);if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const u=Math.abs(h[0]*h[3]-h[2]*h[1]),E=Math.hypot(h[0],h[2]),N=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(E,N)/u}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:h}=this.current,{a:u,b:E,c:N,d:O}=this.ctx.getTransform();let H,M;if(E===0&&N===0){const k=Math.abs(u),R=Math.abs(O);if(k===R)if(h===0)H=M=1/k;else{const t=k*h;H=M=t<1?1/t:1}else if(h===0)H=1/k,M=1/R;else{const t=k*h,n=R*h;H=t<1?1/t:1,M=n<1?1/n:1}}else{const k=Math.abs(u*O-E*N),R=Math.hypot(u,E),t=Math.hypot(N,O);if(h===0)H=t/k,M=R/k;else{const n=h*k;H=t>n?t/n:1,M=R>n?R/n:1}}this._cachedScaleForStroking[0]=H,this._cachedScaleForStroking[1]=M}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:u}=this,{lineWidth:E}=this.current,[N,O]=this.getScaleForStroking();if(u.lineWidth=E||1,N===1&&O===1){u.stroke();return}const H=u.getLineDash();if(h&&u.save(),u.scale(N,O),H.length>0){const M=Math.max(N,O);u.setLineDash(H.map(k=>k/M)),u.lineDashOffset/=M}u.stroke(),h&&u.restore()}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}};let U=bt;J=new WeakSet,Te=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},vt=new WeakSet,Pe=function(){if(this.pageColors){const h=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(h!=="none"){const u=this.ctx.filter;this.ctx.filter=h,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=u}}},c.CanvasGraphics=U;for(const L in b.OPS)U.prototype[L]!==void 0&&(U.prototype[b.OPS[L]]=U.prototype[L])},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TilingPattern=c.PathType=void 0,c.getShadingPattern=d;var b=K(1),w=K(6);const X={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};c.PathType=X;function j(y,C){if(!C)return;const T=C[2]-C[0],_=C[3]-C[1],e=new Path2D;e.rect(C[0],C[1],T,_),y.clip(e)}class st{constructor(){this.constructor===st&&(0,b.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,b.unreachable)("Abstract method `getPattern` called.")}}class G extends st{constructor(C){super(),this._type=C[1],this._bbox=C[2],this._colorStops=C[3],this._p0=C[4],this._p1=C[5],this._r0=C[6],this._r1=C[7],this.matrix=null}_createGradient(C){let T;this._type==="axial"?T=C.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(T=C.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const _ of this._colorStops)T.addColorStop(_[0],_[1]);return T}getPattern(C,T,_,e){let i;if(e===X.STROKE||e===X.FILL){const l=T.current.getClippedPathBoundingBox(e,(0,w.getCurrentTransform)(C))||[0,0,0,0],s=Math.ceil(l[2]-l[0])||1,g=Math.ceil(l[3]-l[1])||1,x=T.cachedCanvases.getCanvas("pattern",s,g,!0),a=x.context;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.beginPath(),a.rect(0,0,a.canvas.width,a.canvas.height),a.translate(-l[0],-l[1]),_=b.Util.transform(_,[1,0,0,1,l[0],l[1]]),a.transform(...T.baseTransform),this.matrix&&a.transform(...this.matrix),j(a,this._bbox),a.fillStyle=this._createGradient(a),a.fill(),i=C.createPattern(x.canvas,"no-repeat");const D=new DOMMatrix(_);i.setTransform(D)}else j(C,this._bbox),i=this._createGradient(C);return i}}function P(y,C,T,_,e,i,l,s){const g=C.coords,x=C.colors,a=y.data,D=y.width*4;let W;g[T+1]>g[_+1]&&(W=T,T=_,_=W,W=i,i=l,l=W),g[_+1]>g[e+1]&&(W=_,_=e,e=W,W=l,l=s,s=W),g[T+1]>g[_+1]&&(W=T,T=_,_=W,W=i,i=l,l=W);const tt=(g[T]+C.offsetX)*C.scaleX,rt=(g[T+1]+C.offsetY)*C.scaleY,lt=(g[_]+C.offsetX)*C.scaleX,B=(g[_+1]+C.offsetY)*C.scaleY,U=(g[e]+C.offsetX)*C.scaleX,J=(g[e+1]+C.offsetY)*C.scaleY;if(rt>=J)return;const pt=x[i],vt=x[i+1],At=x[i+2],bt=x[l],L=x[l+1],h=x[l+2],u=x[s],E=x[s+1],N=x[s+2],O=Math.round(rt),H=Math.round(J);let M,k,R,t,n,m,S,v;for(let q=O;q<=H;q++){if(q<B){let ut;q<rt?ut=0:ut=(rt-q)/(rt-B),M=tt-(tt-lt)*ut,k=pt-(pt-bt)*ut,R=vt-(vt-L)*ut,t=At-(At-h)*ut}else{let ut;q>J?ut=1:B===J?ut=0:ut=(B-q)/(B-J),M=lt-(lt-U)*ut,k=bt-(bt-u)*ut,R=L-(L-E)*ut,t=h-(h-N)*ut}let it;q<rt?it=0:q>J?it=1:it=(rt-q)/(rt-J),n=tt-(tt-U)*it,m=pt-(pt-u)*it,S=vt-(vt-E)*it,v=At-(At-N)*it;const et=Math.round(Math.min(M,n)),nt=Math.round(Math.max(M,n));let ot=D*q+et*4;for(let ut=et;ut<=nt;ut++)it=(M-ut)/(M-n),it<0?it=0:it>1&&(it=1),a[ot++]=k-(k-m)*it|0,a[ot++]=R-(R-S)*it|0,a[ot++]=t-(t-v)*it|0,a[ot++]=255}}function A(y,C,T){const _=C.coords,e=C.colors;let i,l;switch(C.type){case"lattice":const s=C.verticesPerRow,g=Math.floor(_.length/s)-1,x=s-1;for(i=0;i<g;i++){let a=i*s;for(let D=0;D<x;D++,a++)P(y,T,_[a],_[a+1],_[a+s],e[a],e[a+1],e[a+s]),P(y,T,_[a+s+1],_[a+1],_[a+s],e[a+s+1],e[a+1],e[a+s])}break;case"triangles":for(i=0,l=_.length;i<l;i+=3)P(y,T,_[i],_[i+1],_[i+2],e[i],e[i+1],e[i+2]);break;default:throw new Error("illegal figure")}}class F extends st{constructor(C){super(),this._coords=C[2],this._colors=C[3],this._figures=C[4],this._bounds=C[5],this._bbox=C[7],this._background=C[8],this.matrix=null}_createMeshCanvas(C,T,_){const s=Math.floor(this._bounds[0]),g=Math.floor(this._bounds[1]),x=Math.ceil(this._bounds[2])-s,a=Math.ceil(this._bounds[3])-g,D=Math.min(Math.ceil(Math.abs(x*C[0]*1.1)),3e3),W=Math.min(Math.ceil(Math.abs(a*C[1]*1.1)),3e3),tt=x/D,rt=a/W,lt={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-g,scaleX:1/tt,scaleY:1/rt},B=D+2*2,U=W+2*2,J=_.getCanvas("mesh",B,U,!1),pt=J.context,vt=pt.createImageData(D,W);if(T){const bt=vt.data;for(let L=0,h=bt.length;L<h;L+=4)bt[L]=T[0],bt[L+1]=T[1],bt[L+2]=T[2],bt[L+3]=255}for(const bt of this._figures)A(vt,bt,lt);return pt.putImageData(vt,2,2),{canvas:J.canvas,offsetX:s-2*tt,offsetY:g-2*rt,scaleX:tt,scaleY:rt}}getPattern(C,T,_,e){j(C,this._bbox);let i;if(e===X.SHADING)i=b.Util.singularValueDecompose2dScale((0,w.getCurrentTransform)(C));else if(i=b.Util.singularValueDecompose2dScale(T.baseTransform),this.matrix){const s=b.Util.singularValueDecompose2dScale(this.matrix);i=[i[0]*s[0],i[1]*s[1]]}const l=this._createMeshCanvas(i,e===X.SHADING?null:this._background,T.cachedCanvases);return e!==X.SHADING&&(C.setTransform(...T.baseTransform),this.matrix&&C.transform(...this.matrix)),C.translate(l.offsetX,l.offsetY),C.scale(l.scaleX,l.scaleY),C.createPattern(l.canvas,"no-repeat")}}class I extends st{getPattern(){return"hotpink"}}function d(y){switch(y[0]){case"RadialAxial":return new G(y);case"Mesh":return new F(y);case"Dummy":return new I}throw new Error(`Unknown IR type: ${y[0]}`)}const o={COLORED:1,UNCOLORED:2},r=class{constructor(C,T,_,e,i){this.operatorList=C[2],this.matrix=C[3]||[1,0,0,1,0,0],this.bbox=C[4],this.xstep=C[5],this.ystep=C[6],this.paintType=C[7],this.tilingType=C[8],this.color=T,this.ctx=_,this.canvasGraphicsFactory=e,this.baseTransform=i}createPatternCanvas(C){const T=this.operatorList,_=this.bbox,e=this.xstep,i=this.ystep,l=this.paintType,s=this.tilingType,g=this.color,x=this.canvasGraphicsFactory;(0,b.info)("TilingType: "+s);const a=_[0],D=_[1],W=_[2],tt=_[3],rt=b.Util.singularValueDecompose2dScale(this.matrix),lt=b.Util.singularValueDecompose2dScale(this.baseTransform),B=[rt[0]*lt[0],rt[1]*lt[1]],U=this.getSizeAndScale(e,this.ctx.canvas.width,B[0]),J=this.getSizeAndScale(i,this.ctx.canvas.height,B[1]),pt=C.cachedCanvases.getCanvas("pattern",U.size,J.size,!0),vt=pt.context,At=x.createCanvasGraphics(vt);At.groupLevel=C.groupLevel,this.setFillAndStrokeStyleToContext(At,l,g);let bt=a,L=D,h=W,u=tt;return a<0&&(bt=0,h+=Math.abs(a)),D<0&&(L=0,u+=Math.abs(D)),vt.translate(-(U.scale*bt),-(J.scale*L)),At.transform(U.scale,0,0,J.scale,0,0),vt.save(),this.clipBbox(At,bt,L,h,u),At.baseTransform=(0,w.getCurrentTransform)(At.ctx),At.executeOperatorList(T),At.endDrawing(),{canvas:pt.canvas,scaleX:U.scale,scaleY:J.scale,offsetX:bt,offsetY:L}}getSizeAndScale(C,T,_){C=Math.abs(C);const e=Math.max(r.MAX_PATTERN_SIZE,T);let i=Math.ceil(C*_);return i>=e?i=e:_=i/C,{scale:_,size:i}}clipBbox(C,T,_,e,i){const l=e-T,s=i-_;C.ctx.rect(T,_,l,s),C.current.updateRectMinMax((0,w.getCurrentTransform)(C.ctx),[T,_,e,i]),C.clip(),C.endPath()}setFillAndStrokeStyleToContext(C,T,_){const e=C.ctx,i=C.current;switch(T){case o.COLORED:const l=this.ctx;e.fillStyle=l.fillStyle,e.strokeStyle=l.strokeStyle,i.fillColor=l.fillStyle,i.strokeColor=l.strokeStyle;break;case o.UNCOLORED:const s=b.Util.makeHexColor(_[0],_[1],_[2]);e.fillStyle=s,e.strokeStyle=s,i.fillColor=s,i.strokeColor=s;break;default:throw new b.FormatError(`Unsupported paint type: ${T}`)}}getPattern(C,T,_,e){let i=_;e!==X.SHADING&&(i=b.Util.transform(i,T.baseTransform),this.matrix&&(i=b.Util.transform(i,this.matrix)));const l=this.createPatternCanvas(T);let s=new DOMMatrix(i);s=s.translate(l.offsetX,l.offsetY),s=s.scale(1/l.scaleX,1/l.scaleY);const g=C.createPattern(l.canvas,"repeat");return g.setTransform(s),g}};let p=r;Bt(p,"MAX_PATTERN_SIZE",3e3),c.TilingPattern=p},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.convertBlackAndWhiteToRGBA=X,c.convertToRGBA=w,c.grayToRGBA=st;var b=K(1);function w(G){switch(G.kind){case b.ImageKind.GRAYSCALE_1BPP:return X(G);case b.ImageKind.RGB_24BPP:return j(G)}return null}function X({src:G,srcPos:P=0,dest:A,width:F,height:I,nonBlackColor:d=4294967295,inverseDecode:o=!1}){const p=b.FeatureTest.isLittleEndian?4278190080:255,[r,y]=o?[d,p]:[p,d],C=F>>3,T=F&7,_=G.length;A=new Uint32Array(A.buffer);let e=0;for(let i=0;i<I;i++){for(const s=P+C;P<s;P++){const g=P<_?G[P]:255;A[e++]=g&128?y:r,A[e++]=g&64?y:r,A[e++]=g&32?y:r,A[e++]=g&16?y:r,A[e++]=g&8?y:r,A[e++]=g&4?y:r,A[e++]=g&2?y:r,A[e++]=g&1?y:r}if(T===0)continue;const l=P<_?G[P++]:255;for(let s=0;s<T;s++)A[e++]=l&1<<7-s?y:r}return{srcPos:P,destPos:e}}function j({src:G,srcPos:P=0,dest:A,destPos:F=0,width:I,height:d}){let o=0;const p=G.length>>2,r=new Uint32Array(G.buffer,P,p);if(b.FeatureTest.isLittleEndian){for(;o<p-2;o+=3,F+=4){const y=r[o],C=r[o+1],T=r[o+2];A[F]=y|4278190080,A[F+1]=y>>>24|C<<8|4278190080,A[F+2]=C>>>16|T<<16|4278190080,A[F+3]=T>>>8|4278190080}for(let y=o*4,C=G.length;y<C;y+=3)A[F++]=G[y]|G[y+1]<<8|G[y+2]<<16|4278190080}else{for(;o<p-2;o+=3,F+=4){const y=r[o],C=r[o+1],T=r[o+2];A[F]=y|255,A[F+1]=y<<24|C>>>8|255,A[F+2]=C<<16|T>>>16|255,A[F+3]=T<<8|255}for(let y=o*4,C=G.length;y<C;y+=3)A[F++]=G[y]<<24|G[y+1]<<16|G[y+2]<<8|255}return{srcPos:P,destPos:F}}function st(G,P){if(b.FeatureTest.isLittleEndian)for(let A=0,F=G.length;A<F;A++)P[A]=G[A]*65793|4278190080;else for(let A=0,F=G.length;A<F;A++)P[A]=G[A]*16843008|255}},(V,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.GlobalWorkerOptions=void 0;const K=Object.create(null);c.GlobalWorkerOptions=K,K.workerPort=null,K.workerSrc=""},(V,c,K)=>{var G,Ke,A,Je,I,ge;Object.defineProperty(c,"__esModule",{value:!0}),c.MessageHandler=void 0;var b=K(1);const w={UNKNOWN:0,DATA:1,ERROR:2},X={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function j(o){switch(o instanceof Error||typeof o=="object"&&o!==null||(0,b.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new b.AbortException(o.message);case"MissingPDFException":return new b.MissingPDFException(o.message);case"PasswordException":return new b.PasswordException(o.message,o.code);case"UnexpectedResponseException":return new b.UnexpectedResponseException(o.message,o.status);case"UnknownErrorException":return new b.UnknownErrorException(o.message,o.details);default:return new b.UnknownErrorException(o.message,o.toString())}}class st{constructor(p,r,y){Z(this,G);Z(this,A);Z(this,I);this.sourceName=p,this.targetName=r,this.comObj=y,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=C=>{const T=C.data;if(T.targetName!==this.sourceName)return;if(T.stream){at(this,A,Je).call(this,T);return}if(T.callback){const e=T.callbackId,i=this.callbackCapabilities[e];if(!i)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],T.callback===w.DATA)i.resolve(T.data);else if(T.callback===w.ERROR)i.reject(j(T.reason));else throw new Error("Unexpected callback case");return}const _=this.actionHandler[T.action];if(!_)throw new Error(`Unknown action from worker: ${T.action}`);if(T.callbackId){const e=this.sourceName,i=T.sourceName;new Promise(function(l){l(_(T.data))}).then(function(l){y.postMessage({sourceName:e,targetName:i,callback:w.DATA,callbackId:T.callbackId,data:l})},function(l){y.postMessage({sourceName:e,targetName:i,callback:w.ERROR,callbackId:T.callbackId,reason:j(l)})});return}if(T.streamId){at(this,G,Ke).call(this,T);return}_(T.data)},y.addEventListener("message",this._onComObjOnMessage)}on(p,r){const y=this.actionHandler;if(y[p])throw new Error(`There is already an actionName called "${p}"`);y[p]=r}send(p,r,y){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:p,data:r},y)}sendWithPromise(p,r,y){const C=this.callbackId++,T=new b.PromiseCapability;this.callbackCapabilities[C]=T;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:p,callbackId:C,data:r},y)}catch(_){T.reject(_)}return T.promise}sendWithStream(p,r,y,C){const T=this.streamId++,_=this.sourceName,e=this.targetName,i=this.comObj;return new ReadableStream({start:l=>{const s=new b.PromiseCapability;return this.streamControllers[T]={controller:l,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},i.postMessage({sourceName:_,targetName:e,action:p,streamId:T,data:r,desiredSize:l.desiredSize},C),s.promise},pull:l=>{const s=new b.PromiseCapability;return this.streamControllers[T].pullCall=s,i.postMessage({sourceName:_,targetName:e,stream:X.PULL,streamId:T,desiredSize:l.desiredSize}),s.promise},cancel:l=>{(0,b.assert)(l instanceof Error,"cancel must have a valid reason");const s=new b.PromiseCapability;return this.streamControllers[T].cancelCall=s,this.streamControllers[T].isClosed=!0,i.postMessage({sourceName:_,targetName:e,stream:X.CANCEL,streamId:T,reason:j(l)}),s.promise}},y)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}G=new WeakSet,Ke=function(p){const r=p.streamId,y=this.sourceName,C=p.sourceName,T=this.comObj,_=this,e=this.actionHandler[p.action],i={enqueue(l,s=1,g){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=s,x>0&&this.desiredSize<=0&&(this.sinkCapability=new b.PromiseCapability,this.ready=this.sinkCapability.promise),T.postMessage({sourceName:y,targetName:C,stream:X.ENQUEUE,streamId:r,chunk:l},g)},close(){this.isCancelled||(this.isCancelled=!0,T.postMessage({sourceName:y,targetName:C,stream:X.CLOSE,streamId:r}),delete _.streamSinks[r])},error(l){(0,b.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,T.postMessage({sourceName:y,targetName:C,stream:X.ERROR,streamId:r,reason:j(l)}))},sinkCapability:new b.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:p.desiredSize,ready:null};i.sinkCapability.resolve(),i.ready=i.sinkCapability.promise,this.streamSinks[r]=i,new Promise(function(l){l(e(p.data,i))}).then(function(){T.postMessage({sourceName:y,targetName:C,stream:X.START_COMPLETE,streamId:r,success:!0})},function(l){T.postMessage({sourceName:y,targetName:C,stream:X.START_COMPLETE,streamId:r,reason:j(l)})})},A=new WeakSet,Je=function(p){const r=p.streamId,y=this.sourceName,C=p.sourceName,T=this.comObj,_=this.streamControllers[r],e=this.streamSinks[r];switch(p.stream){case X.START_COMPLETE:p.success?_.startCall.resolve():_.startCall.reject(j(p.reason));break;case X.PULL_COMPLETE:p.success?_.pullCall.resolve():_.pullCall.reject(j(p.reason));break;case X.PULL:if(!e){T.postMessage({sourceName:y,targetName:C,stream:X.PULL_COMPLETE,streamId:r,success:!0});break}e.desiredSize<=0&&p.desiredSize>0&&e.sinkCapability.resolve(),e.desiredSize=p.desiredSize,new Promise(function(i){var l;i((l=e.onPull)==null?void 0:l.call(e))}).then(function(){T.postMessage({sourceName:y,targetName:C,stream:X.PULL_COMPLETE,streamId:r,success:!0})},function(i){T.postMessage({sourceName:y,targetName:C,stream:X.PULL_COMPLETE,streamId:r,reason:j(i)})});break;case X.ENQUEUE:if((0,b.assert)(_,"enqueue should have stream controller"),_.isClosed)break;_.controller.enqueue(p.chunk);break;case X.CLOSE:if((0,b.assert)(_,"close should have stream controller"),_.isClosed)break;_.isClosed=!0,_.controller.close(),at(this,I,ge).call(this,_,r);break;case X.ERROR:(0,b.assert)(_,"error should have stream controller"),_.controller.error(j(p.reason)),at(this,I,ge).call(this,_,r);break;case X.CANCEL_COMPLETE:p.success?_.cancelCall.resolve():_.cancelCall.reject(j(p.reason)),at(this,I,ge).call(this,_,r);break;case X.CANCEL:if(!e)break;new Promise(function(i){var l;i((l=e.onCancel)==null?void 0:l.call(e,j(p.reason)))}).then(function(){T.postMessage({sourceName:y,targetName:C,stream:X.CANCEL_COMPLETE,streamId:r,success:!0})},function(i){T.postMessage({sourceName:y,targetName:C,stream:X.CANCEL_COMPLETE,streamId:r,reason:j(i)})}),e.sinkCapability.reject(j(p.reason)),e.isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}},I=new WeakSet,ge=async function(p,r){var y,C,T;await Promise.allSettled([(y=p.startCall)==null?void 0:y.promise,(C=p.pullCall)==null?void 0:C.promise,(T=p.cancelCall)==null?void 0:T.promise]),delete this.streamControllers[r]},c.MessageHandler=st},(V,c,K)=>{var X,j;Object.defineProperty(c,"__esModule",{value:!0}),c.Metadata=void 0;var b=K(1);class w{constructor({parsedData:G,rawData:P}){Z(this,X,void 0);Z(this,j,void 0);gt(this,X,G),gt(this,j,P)}getRaw(){return f(this,j)}get(G){var P;return(P=f(this,X).get(G))!=null?P:null}getAll(){return(0,b.objectFromMap)(f(this,X))}has(G){return f(this,X).has(G)}}X=new WeakMap,j=new WeakMap,c.Metadata=w},(V,c,K)=>{var G,P,A,F,I,d,xe;Object.defineProperty(c,"__esModule",{value:!0}),c.OptionalContentConfig=void 0;var b=K(1),w=K(8);const X=Symbol("INTERNAL");class j{constructor(r,y){Z(this,G,!0);this.name=r,this.intent=y}get visible(){return f(this,G)}_setVisible(r,y){r!==X&&(0,b.unreachable)("Internal method `_setVisible` called."),gt(this,G,y)}}G=new WeakMap;class st{constructor(r){Z(this,d);Z(this,P,null);Z(this,A,new Map);Z(this,F,null);Z(this,I,null);if(this.name=null,this.creator=null,r!==null){this.name=r.name,this.creator=r.creator,gt(this,I,r.order);for(const y of r.groups)f(this,A).set(y.id,new j(y.name,y.intent));if(r.baseState==="OFF")for(const y of f(this,A).values())y._setVisible(X,!1);for(const y of r.on)f(this,A).get(y)._setVisible(X,!0);for(const y of r.off)f(this,A).get(y)._setVisible(X,!1);gt(this,F,this.getHash())}}isVisible(r){if(f(this,A).size===0)return!0;if(!r)return(0,b.warn)("Optional content group not defined."),!0;if(r.type==="OCG")return f(this,A).has(r.id)?f(this,A).get(r.id).visible:((0,b.warn)(`Optional content group not found: ${r.id}`),!0);if(r.type==="OCMD"){if(r.expression)return at(this,d,xe).call(this,r.expression);if(!r.policy||r.policy==="AnyOn"){for(const y of r.ids){if(!f(this,A).has(y))return(0,b.warn)(`Optional content group not found: ${y}`),!0;if(f(this,A).get(y).visible)return!0}return!1}else if(r.policy==="AllOn"){for(const y of r.ids){if(!f(this,A).has(y))return(0,b.warn)(`Optional content group not found: ${y}`),!0;if(!f(this,A).get(y).visible)return!1}return!0}else if(r.policy==="AnyOff"){for(const y of r.ids){if(!f(this,A).has(y))return(0,b.warn)(`Optional content group not found: ${y}`),!0;if(!f(this,A).get(y).visible)return!0}return!1}else if(r.policy==="AllOff"){for(const y of r.ids){if(!f(this,A).has(y))return(0,b.warn)(`Optional content group not found: ${y}`),!0;if(f(this,A).get(y).visible)return!1}return!0}return(0,b.warn)(`Unknown optional content policy ${r.policy}.`),!0}return(0,b.warn)(`Unknown group type ${r.type}.`),!0}setVisibility(r,y=!0){if(!f(this,A).has(r)){(0,b.warn)(`Optional content group not found: ${r}`);return}f(this,A).get(r)._setVisible(X,!!y),gt(this,P,null)}get hasInitialVisibility(){return this.getHash()===f(this,F)}getOrder(){return f(this,A).size?f(this,I)?f(this,I).slice():[...f(this,A).keys()]:null}getGroups(){return f(this,A).size>0?(0,b.objectFromMap)(f(this,A)):null}getGroup(r){return f(this,A).get(r)||null}getHash(){if(f(this,P)!==null)return f(this,P);const r=new w.MurmurHash3_64;for(const[y,C]of f(this,A))r.update(`${y}:${C.visible}`);return gt(this,P,r.hexdigest())}}P=new WeakMap,A=new WeakMap,F=new WeakMap,I=new WeakMap,d=new WeakSet,xe=function(r){const y=r.length;if(y<2)return!0;const C=r[0];for(let T=1;T<y;T++){const _=r[T];let e;if(Array.isArray(_))e=at(this,d,xe).call(this,_);else if(f(this,A).has(_))e=f(this,A).get(_).visible;else return(0,b.warn)(`Optional content group not found: ${_}`),!0;switch(C){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return C==="And"},c.OptionalContentConfig=st},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFDataTransportStream=void 0;var b=K(1),w=K(6);class X{constructor({length:P,initialData:A,progressiveDone:F=!1,contentDispositionFilename:I=null,disableRange:d=!1,disableStream:o=!1},p){if((0,b.assert)(p,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=F,this._contentDispositionFilename=I,(A==null?void 0:A.length)>0){const r=A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength?A.buffer:new Uint8Array(A).buffer;this._queuedChunks.push(r)}this._pdfDataRangeTransport=p,this._isStreamingSupported=!o,this._isRangeSupported=!d,this._contentLength=P,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((r,y)=>{this._onReceiveData({begin:r,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((r,y)=>{this._onProgress({loaded:r,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(r=>{this._onReceiveData({chunk:r})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:P,chunk:A}){const F=A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength?A.buffer:new Uint8Array(A).buffer;if(P===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(F):this._queuedChunks.push(F);else{const I=this._rangeReaders.some(function(d){return d._begin!==P?!1:(d._enqueue(F),!0)});(0,b.assert)(I,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var P,A;return(A=(P=this._fullRequestReader)==null?void 0:P._loaded)!=null?A:0}_onProgress(P){var A,F,I,d;P.total===void 0?(F=(A=this._rangeReaders[0])==null?void 0:A.onProgress)==null||F.call(A,{loaded:P.loaded}):(d=(I=this._fullRequestReader)==null?void 0:I.onProgress)==null||d.call(I,{loaded:P.loaded,total:P.total})}_onProgressiveDone(){var P;(P=this._fullRequestReader)==null||P.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(P){const A=this._rangeReaders.indexOf(P);A>=0&&this._rangeReaders.splice(A,1)}getFullReader(){(0,b.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const P=this._queuedChunks;return this._queuedChunks=null,new j(this,P,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(P,A){if(A<=this._progressiveDataLength)return null;const F=new st(this,P,A);return this._pdfDataRangeTransport.requestDataRange(P,A),this._rangeReaders.push(F),F}cancelAllRequests(P){var A;(A=this._fullRequestReader)==null||A.cancel(P);for(const F of this._rangeReaders.slice(0))F.cancel(P);this._pdfDataRangeTransport.abort()}}c.PDFDataTransportStream=X;class j{constructor(P,A,F=!1,I=null){this._stream=P,this._done=F||!1,this._filename=(0,w.isPdfFile)(I)?I:null,this._queuedChunks=A||[],this._loaded=0;for(const d of this._queuedChunks)this._loaded+=d.byteLength;this._requests=[],this._headersReady=Promise.resolve(),P._fullRequestReader=this,this.onProgress=null}_enqueue(P){this._done||(this._requests.length>0?this._requests.shift().resolve({value:P,done:!1}):this._queuedChunks.push(P),this._loaded+=P.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=new b.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class st{constructor(P,A,F){this._stream=P,this._begin=A,this._end=F,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(P){if(!this._done){if(this._requests.length===0)this._queuedChunk=P;else{this._requests.shift().resolve({value:P,done:!1});for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const A=this._queuedChunk;return this._queuedChunk=null,{value:A,done:!1}}if(this._done)return{value:void 0,done:!0};const P=new b.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(V,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.XfaText=void 0;class K{static textContent(w){const X=[],j={items:X,styles:Object.create(null)};function st(G){var F;if(!G)return;let P=null;const A=G.name;if(A==="#text")P=G.value;else if(K.shouldBuildText(A))(F=G==null?void 0:G.attributes)!=null&&F.textContent?P=G.attributes.textContent:G.value&&(P=G.value);else return;if(P!==null&&X.push({str:P}),!!G.children)for(const I of G.children)st(I)}return st(w),j}static shouldBuildText(w){return!(w==="textarea"||w==="input"||w==="option"||w==="select")}}c.XfaText=K},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.NodeStandardFontDataFactory=c.NodeFilterFactory=c.NodeCanvasFactory=c.NodeCMapReaderFactory=void 0;var b=K(7);const w=function(P){return new Promise((A,F)=>{requireRollupPluginNodeBuiltins_cjs().readFile(P,(d,o)=>{if(d||!o){F(new Error(d));return}A(new Uint8Array(o))})})};class X extends b.BaseFilterFactory{}c.NodeFilterFactory=X;class j extends b.BaseCanvasFactory{_createCanvas(A,F){return require$$5.createCanvas(A,F)}}c.NodeCanvasFactory=j;class st extends b.BaseCMapReaderFactory{_fetchData(A,F){return w(A).then(I=>({cMapData:I,compressionType:F}))}}c.NodeCMapReaderFactory=st;class G extends b.BaseStandardFontDataFactory{_fetchData(A){return w(A)}}c.NodeStandardFontDataFactory=G},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFNodeStream=void 0;var b=K(1),w=K(22);const X=requireRollupPluginNodeBuiltins_cjs(),j=require$$5,st=require$$5,G=require$$5,P=/^file:\/\/\/[a-zA-Z]:\//;function A(T){const _=G.parse(T);return _.protocol==="file:"||_.host?_:/^[a-z]:[/\\]/i.test(T)?G.parse(`file:///${T}`):(_.host||(_.protocol="file:"),_)}class F{constructor(_){this.source=_,this.url=A(_.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&_.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _,e;return(e=(_=this._fullRequestReader)==null?void 0:_._loaded)!=null?e:0}getFullReader(){return(0,b.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new p(this),this._fullRequestReader}getRangeReader(_,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new C(this,_,e):new r(this,_,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(_){var e;(e=this._fullRequestReader)==null||e.cancel(_);for(const i of this._rangeRequestReaders.slice(0))i.cancel(_)}}c.PDFNodeStream=F;class I{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=_.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=new b.PromiseCapability,this._headersCapability=new b.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new b.PromiseCapability,this.read()):(this._loaded+=_.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new b.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class d{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new b.PromiseCapability;const e=_.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new b.PromiseCapability,this.read()):(this._loaded+=_.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function o(T,_){return{protocol:T.protocol,auth:T.auth,host:T.hostname,port:T.port,path:T.path,method:"GET",headers:_}}class p extends I{constructor(_){super(_);const e=i=>{if(i.statusCode===404){const x=new b.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=x,this._headersCapability.reject(x);return}this._headersCapability.resolve(),this._setReadableStream(i);const l=x=>this._readableStream.headers[x.toLowerCase()],{allowRangeRequests:s,suggestedLength:g}=(0,w.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:_.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=g||this._contentLength,this._filename=(0,w.extractFilenameFromHeader)(l)};this._request=null,this._url.protocol==="http:"?this._request=j.request(o(this._url,_.httpHeaders),e):this._request=st.request(o(this._url,_.httpHeaders),e),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class r extends d{constructor(_,e,i){super(_),this._httpHeaders={};for(const s in _.httpHeaders){const g=_.httpHeaders[s];g!==void 0&&(this._httpHeaders[s]=g)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const l=s=>{if(s.statusCode===404){const g=new b.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=g;return}this._setReadableStream(s)};this._request=null,this._url.protocol==="http:"?this._request=j.request(o(this._url,this._httpHeaders),l):this._request=st.request(o(this._url,this._httpHeaders),l),this._request.on("error",s=>{this._storedError=s}),this._request.end()}}class y extends I{constructor(_){super(_);let e=decodeURIComponent(this._url.path);P.test(this._url.href)&&(e=e.replace(/^\//,"")),X.lstat(e,(i,l)=>{if(i){i.code==="ENOENT"&&(i=new b.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=i,this._headersCapability.reject(i);return}this._contentLength=l.size,this._setReadableStream(X.createReadStream(e)),this._headersCapability.resolve()})}}class C extends d{constructor(_,e,i){super(_);let l=decodeURIComponent(this._url.path);P.test(this._url.href)&&(l=l.replace(/^\//,"")),this._setReadableStream(X.createReadStream(l,{start:e,end:i-1}))}}},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createResponseStatusError=G,c.extractFilenameFromHeader=st,c.validateRangeRequestCapabilities=j,c.validateResponseStatus=P;var b=K(1),w=K(23),X=K(6);function j({getResponseHeader:A,isHttp:F,rangeChunkSize:I,disableRange:d}){const o={allowRangeRequests:!1,suggestedLength:void 0},p=parseInt(A("Content-Length"),10);return!Number.isInteger(p)||(o.suggestedLength=p,p<=2*I)||d||!F||A("Accept-Ranges")!=="bytes"||(A("Content-Encoding")||"identity")!=="identity"||(o.allowRangeRequests=!0),o}function st(A){const F=A("Content-Disposition");if(F){let I=(0,w.getFilenameFromContentDispositionHeader)(F);if(I.includes("%"))try{I=decodeURIComponent(I)}catch{}if((0,X.isPdfFile)(I))return I}return null}function G(A,F){return A===404||A===0&&F.startsWith("file:")?new b.MissingPDFException('Missing PDF "'+F+'".'):new b.UnexpectedResponseException(`Unexpected server response (${A}) while retrieving PDF "${F}".`,A)}function P(A){return A===200||A===206}},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.getFilenameFromContentDispositionHeader=w;var b=K(1);function w(X){let j=!0,st=G("filename\\*","i").exec(X);if(st){st=st[1];let p=I(st);return p=unescape(p),p=d(p),p=o(p),A(p)}if(st=F(X),st){const p=o(st);return A(p)}if(st=G("filename","i").exec(X),st){st=st[1];let p=I(st);return p=o(p),A(p)}function G(p,r){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function P(p,r){if(p){if(!/^[\x00-\xFF]+$/.test(r))return r;try{const y=new TextDecoder(p,{fatal:!0}),C=(0,b.stringToBytes)(r);r=y.decode(C),j=!1}catch{}}return r}function A(p){return j&&/[\x80-\xff]/.test(p)&&(p=P("utf-8",p),j&&(p=P("iso-8859-1",p))),p}function F(p){const r=[];let y;const C=G("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=C.exec(p))!==null;){let[,_,e,i]=y;if(_=parseInt(_,10),_ in r){if(_===0)break;continue}r[_]=[e,i]}const T=[];for(let _=0;_<r.length&&_ in r;++_){let[e,i]=r[_];i=I(i),e&&(i=unescape(i),_===0&&(i=d(i))),T.push(i)}return T.join("")}function I(p){if(p.startsWith('"')){const r=p.slice(1).split('\\"');for(let y=0;y<r.length;++y){const C=r[y].indexOf('"');C!==-1&&(r[y]=r[y].slice(0,C),r.length=y+1),r[y]=r[y].replaceAll(/\\(.)/g,"$1")}p=r.join('"')}return p}function d(p){const r=p.indexOf("'");if(r===-1)return p;const y=p.slice(0,r),T=p.slice(r+1).replace(/^[^']*'/,"");return P(y,T)}function o(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(r,y,C,T){if(C==="q"||C==="Q")return T=T.replaceAll("_"," "),T=T.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,e){return String.fromCharCode(parseInt(e,16))}),P(y,T);try{T=atob(T)}catch{}return P(y,T)})}return""}},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFNetworkStream=void 0;var b=K(1),w=K(22);const X=200,j=206;function st(I){const d=I.response;return typeof d!="string"?d:(0,b.stringToBytes)(d).buffer}class G{constructor(d,o={}){this.url=d,this.isHttp=/^https?:/i.test(d),this.httpHeaders=this.isHttp&&o.httpHeaders||Object.create(null),this.withCredentials=o.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(d,o,p){const r={begin:d,end:o};for(const y in p)r[y]=p[y];return this.request(r)}requestFull(d){return this.request(d)}request(d){const o=new XMLHttpRequest,p=this.currXhrId++,r=this.pendingRequests[p]={xhr:o};o.open("GET",this.url),o.withCredentials=this.withCredentials;for(const y in this.httpHeaders){const C=this.httpHeaders[y];C!==void 0&&o.setRequestHeader(y,C)}return this.isHttp&&"begin"in d&&"end"in d?(o.setRequestHeader("Range",`bytes=${d.begin}-${d.end-1}`),r.expectedStatus=j):r.expectedStatus=X,o.responseType="arraybuffer",d.onError&&(o.onerror=function(y){d.onError(o.status)}),o.onreadystatechange=this.onStateChange.bind(this,p),o.onprogress=this.onProgress.bind(this,p),r.onHeadersReceived=d.onHeadersReceived,r.onDone=d.onDone,r.onError=d.onError,r.onProgress=d.onProgress,o.send(null),p}onProgress(d,o){var r;const p=this.pendingRequests[d];!p||(r=p.onProgress)==null||r.call(p,o)}onStateChange(d,o){var _,e,i;const p=this.pendingRequests[d];if(!p)return;const r=p.xhr;if(r.readyState>=2&&p.onHeadersReceived&&(p.onHeadersReceived(),delete p.onHeadersReceived),r.readyState!==4||!(d in this.pendingRequests))return;if(delete this.pendingRequests[d],r.status===0&&this.isHttp){(_=p.onError)==null||_.call(p,r.status);return}const y=r.status||X;if(!(y===X&&p.expectedStatus===j)&&y!==p.expectedStatus){(e=p.onError)==null||e.call(p,r.status);return}const T=st(r);if(y===j){const l=r.getResponseHeader("Content-Range"),s=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);p.onDone({begin:parseInt(s[1],10),chunk:T})}else T?p.onDone({begin:0,chunk:T}):(i=p.onError)==null||i.call(p,r.status)}getRequestXhr(d){return this.pendingRequests[d].xhr}isPendingRequest(d){return d in this.pendingRequests}abortRequest(d){const o=this.pendingRequests[d].xhr;delete this.pendingRequests[d],o.abort()}}class P{constructor(d){this._source=d,this._manager=new G(d.url,{httpHeaders:d.httpHeaders,withCredentials:d.withCredentials}),this._rangeChunkSize=d.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(d){const o=this._rangeRequestReaders.indexOf(d);o>=0&&this._rangeRequestReaders.splice(o,1)}getFullReader(){return(0,b.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new A(this._manager,this._source),this._fullRequestReader}getRangeReader(d,o){const p=new F(this._manager,d,o);return p.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(p),p}cancelAllRequests(d){var o;(o=this._fullRequestReader)==null||o.cancel(d);for(const p of this._rangeRequestReaders.slice(0))p.cancel(d)}}c.PDFNetworkStream=P;class A{constructor(d,o){this._manager=d;const p={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=o.url,this._fullRequestId=d.requestFull(p),this._headersReceivedCapability=new b.PromiseCapability,this._disableRange=o.disableRange||!1,this._contentLength=o.length,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const d=this._fullRequestId,o=this._manager.getRequestXhr(d),p=C=>o.getResponseHeader(C),{allowRangeRequests:r,suggestedLength:y}=(0,w.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,w.extractFilenameFromHeader)(p),this._isRangeSupported&&this._manager.abortRequest(d),this._headersReceivedCapability.resolve()}_onDone(d){if(d&&(this._requests.length>0?this._requests.shift().resolve({value:d.chunk,done:!1}):this._cachedChunks.push(d.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(d){this._storedError=(0,w.createResponseStatusError)(d,this._url),this._headersReceivedCapability.reject(this._storedError);for(const o of this._requests)o.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(d){var o;(o=this.onProgress)==null||o.call(this,{loaded:d.loaded,total:d.lengthComputable?d.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=new b.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0,this._headersReceivedCapability.reject(d);for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class F{constructor(d,o,p){this._manager=d;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=d.url,this._requestId=d.requestRange(o,p,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var d;(d=this.onClosed)==null||d.call(this,this)}_onDone(d){const o=d.chunk;this._requests.length>0?this._requests.shift().resolve({value:o,done:!1}):this._queuedChunk=o,this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(d){this._storedError=(0,w.createResponseStatusError)(d,this._url);for(const o of this._requests)o.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(d){var o;this.isStreamingSupported||(o=this.onProgress)==null||o.call(this,{loaded:d.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const o=this._queuedChunk;return this._queuedChunk=null,{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};const d=new b.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFFetchStream=void 0;var b=K(1),w=K(22);function X(F,I,d){return{method:"GET",headers:F,signal:d.signal,mode:"cors",credentials:I?"include":"same-origin",redirect:"follow"}}function j(F){const I=new Headers;for(const d in F){const o=F[d];o!==void 0&&I.append(d,o)}return I}function st(F){return F instanceof Uint8Array?F.buffer:F instanceof ArrayBuffer?F:((0,b.warn)(`getArrayBuffer - unexpected data format: ${F}`),new Uint8Array(F).buffer)}class G{constructor(I){this.source=I,this.isHttp=/^https?:/i.test(I.url),this.httpHeaders=this.isHttp&&I.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var I,d;return(d=(I=this._fullRequestReader)==null?void 0:I._loaded)!=null?d:0}getFullReader(){return(0,b.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new P(this),this._fullRequestReader}getRangeReader(I,d){if(d<=this._progressiveDataLength)return null;const o=new A(this,I,d);return this._rangeRequestReaders.push(o),o}cancelAllRequests(I){var d;(d=this._fullRequestReader)==null||d.cancel(I);for(const o of this._rangeRequestReaders.slice(0))o.cancel(I)}}c.PDFFetchStream=G;class P{constructor(I){this._stream=I,this._reader=null,this._loaded=0,this._filename=null;const d=I.source;this._withCredentials=d.withCredentials||!1,this._contentLength=d.length,this._headersCapability=new b.PromiseCapability,this._disableRange=d.disableRange||!1,this._rangeChunkSize=d.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._headers=j(this._stream.httpHeaders);const o=d.url;fetch(o,X(this._headers,this._withCredentials,this._abortController)).then(p=>{if(!(0,w.validateResponseStatus)(p.status))throw(0,w.createResponseStatusError)(p.status,o);this._reader=p.body.getReader(),this._headersCapability.resolve();const r=T=>p.headers.get(T),{allowRangeRequests:y,suggestedLength:C}=(0,w.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=C||this._contentLength,this._filename=(0,w.extractFilenameFromHeader)(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new b.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var o;await this._headersCapability.promise;const{value:I,done:d}=await this._reader.read();return d?{value:I,done:d}:(this._loaded+=I.byteLength,(o=this.onProgress)==null||o.call(this,{loaded:this._loaded,total:this._contentLength}),{value:st(I),done:!1})}cancel(I){var d;(d=this._reader)==null||d.cancel(I),this._abortController.abort()}}class A{constructor(I,d,o){this._stream=I,this._reader=null,this._loaded=0;const p=I.source;this._withCredentials=p.withCredentials||!1,this._readCapability=new b.PromiseCapability,this._isStreamingSupported=!p.disableStream,this._abortController=new AbortController,this._headers=j(this._stream.httpHeaders),this._headers.append("Range",`bytes=${d}-${o-1}`);const r=p.url;fetch(r,X(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,w.validateResponseStatus)(y.status))throw(0,w.createResponseStatusError)(y.status,r);this._readCapability.resolve(),this._reader=y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var o;await this._readCapability.promise;const{value:I,done:d}=await this._reader.read();return d?{value:I,done:d}:(this._loaded+=I.byteLength,(o=this.onProgress)==null||o.call(this,{loaded:this._loaded}),{value:st(I),done:!1})}cancel(I){var d;(d=this._reader)==null||d.cancel(I),this._abortController.abort()}}},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TextLayerRenderTask=void 0,c.renderTextLayer=p,c.updateTextLayer=r;var b=K(1),w=K(6);const X=1e5,j=30,st=.8,G=new Map;function P(y,C){let T;if(C&&b.FeatureTest.isOffscreenCanvasSupported)T=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{const _=document.createElement("canvas");_.width=_.height=y,T=_.getContext("2d",{alpha:!1})}return T}function A(y,C){const T=G.get(y);if(T)return T;const _=P(j,C);_.font=`${j}px ${y}`;const e=_.measureText("");let i=e.fontBoundingBoxAscent,l=Math.abs(e.fontBoundingBoxDescent);if(i){const g=i/(i+l);return G.set(y,g),_.canvas.width=_.canvas.height=0,g}_.strokeStyle="red",_.clearRect(0,0,j,j),_.strokeText("g",0,0);let s=_.getImageData(0,0,j,j).data;l=0;for(let g=s.length-1-3;g>=0;g-=4)if(s[g]>0){l=Math.ceil(g/4/j);break}_.clearRect(0,0,j,j),_.strokeText("A",0,j),s=_.getImageData(0,0,j,j).data,i=0;for(let g=0,x=s.length;g<x;g+=4)if(s[g]>0){i=j-Math.floor(g/4/j);break}if(_.canvas.width=_.canvas.height=0,i){const g=i/(i+l);return G.set(y,g),g}return G.set(y,st),st}function F(y,C,T){const _=document.createElement("span"),e={angle:0,canvasWidth:0,hasText:C.str!=="",hasEOL:C.hasEOL,fontSize:0};y._textDivs.push(_);const i=b.Util.transform(y._transform,C.transform);let l=Math.atan2(i[1],i[0]);const s=T[C.fontName];s.vertical&&(l+=Math.PI/2);const g=Math.hypot(i[2],i[3]),x=g*A(s.fontFamily,y._isOffscreenCanvasSupported);let a,D;l===0?(a=i[4],D=i[5]-x):(a=i[4]+x*Math.sin(l),D=i[5]-x*Math.cos(l));const W="calc(var(--scale-factor)*",tt=_.style;y._container===y._rootContainer?(tt.left=`${(100*a/y._pageWidth).toFixed(2)}%`,tt.top=`${(100*D/y._pageHeight).toFixed(2)}%`):(tt.left=`${W}${a.toFixed(2)}px)`,tt.top=`${W}${D.toFixed(2)}px)`),tt.fontSize=`${W}${g.toFixed(2)}px)`,tt.fontFamily=s.fontFamily,e.fontSize=g,_.setAttribute("role","presentation"),_.textContent=C.str,_.dir=C.dir,y._fontInspectorEnabled&&(_.dataset.fontName=C.fontName),l!==0&&(e.angle=l*(180/Math.PI));let rt=!1;if(C.str.length>1)rt=!0;else if(C.str!==" "&&C.transform[0]!==C.transform[3]){const lt=Math.abs(C.transform[0]),B=Math.abs(C.transform[3]);lt!==B&&Math.max(lt,B)/Math.min(lt,B)>1.5&&(rt=!0)}rt&&(e.canvasWidth=s.vertical?C.height:C.width),y._textDivProperties.set(_,e),y._isReadableStream&&y._layoutText(_)}function I(y){const{div:C,scale:T,properties:_,ctx:e,prevFontSize:i,prevFontFamily:l}=y,{style:s}=C;let g="";if(_.canvasWidth!==0&&_.hasText){const{fontFamily:x}=s,{canvasWidth:a,fontSize:D}=_;(i!==D||l!==x)&&(e.font=`${D*T}px ${x}`,y.prevFontSize=D,y.prevFontFamily=x);const{width:W}=e.measureText(C.textContent);W>0&&(g=`scaleX(${a*T/W})`)}_.angle!==0&&(g=`rotate(${_.angle}deg) ${g}`),g.length>0&&(s.transform=g)}function d(y){if(y._canceled)return;const C=y._textDivs,T=y._capability;if(C.length>X){T.resolve();return}if(!y._isReadableStream)for(const e of C)y._layoutText(e);T.resolve()}class o{constructor({textContentSource:C,container:T,viewport:_,textDivs:e,textDivProperties:i,textContentItemsStr:l,isOffscreenCanvasSupported:s}){var W;this._textContentSource=C,this._isReadableStream=C instanceof ReadableStream,this._container=this._rootContainer=T,this._textDivs=e||[],this._textContentItemsStr=l||[],this._isOffscreenCanvasSupported=s,this._fontInspectorEnabled=!!((W=globalThis.FontInspector)!=null&&W.enabled),this._reader=null,this._textDivProperties=i||new WeakMap,this._canceled=!1,this._capability=new b.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:_.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:P(0,s)};const{pageWidth:g,pageHeight:x,pageX:a,pageY:D}=_.rawDims;this._transform=[1,0,0,-1,-a,D+x],this._pageWidth=g,this._pageHeight=x,(0,w.setLayerDimensions)(T,_),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new b.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new b.AbortException("TextLayer task cancelled."))}_processItems(C,T){for(const _ of C){if(_.str===void 0){if(_.type==="beginMarkedContentProps"||_.type==="beginMarkedContent"){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),_.id!==null&&this._container.setAttribute("id",`${_.id}`),e.append(this._container)}else _.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(_.str),F(this,_,T)}}_layoutText(C){const T=this._layoutTextParams.properties=this._textDivProperties.get(C);if(this._layoutTextParams.div=C,I(this._layoutTextParams),T.hasText&&this._container.append(C),T.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this._container.append(_)}}_render(){const C=new b.PromiseCapability;let T=Object.create(null);if(this._isReadableStream){const _=()=>{this._reader.read().then(({value:e,done:i})=>{if(i){C.resolve();return}Object.assign(T,e.styles),this._processItems(e.items,T),_()},C.reject)};this._reader=this._textContentSource.getReader(),_()}else if(this._textContentSource){const{items:_,styles:e}=this._textContentSource;this._processItems(_,e),C.resolve()}else throw new Error('No "textContentSource" parameter specified.');C.promise.then(()=>{T=null,d(this)},this._capability.reject)}}c.TextLayerRenderTask=o;function p(y){!y.textContentSource&&(y.textContent||y.textContentStream)&&((0,w.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);const{container:C,viewport:T}=y,_=getComputedStyle(C),e=_.getPropertyValue("visibility"),i=parseFloat(_.getPropertyValue("--scale-factor"));e==="visible"&&(!i||Math.abs(i-T.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const l=new o(y);return l._render(),l}function r({container:y,viewport:C,textDivs:T,textDivProperties:_,isOffscreenCanvasSupported:e,mustRotate:i=!0,mustRescale:l=!0}){if(i&&(0,w.setLayerDimensions)(y,{rotation:C.rotation}),l){const s=P(0,e),x={prevFontSize:null,prevFontFamily:null,div:null,scale:C.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:s};for(const a of T)x.properties=_.get(a),x.div=a,I(x)}}},(V,c,K)=>{var P,A,F,I,d,o,p,r,y,ke,T,Qe,e,Fe,l,Re;Object.defineProperty(c,"__esModule",{value:!0}),c.AnnotationEditorLayer=void 0;var b=K(1),w=K(5),X=K(28),j=K(29),st=K(6);const g=class{constructor(a){Z(this,y);Z(this,T);Z(this,e);Z(this,l);Z(this,P,void 0);Z(this,A,!1);Z(this,F,this.pointerup.bind(this));Z(this,I,this.pointerdown.bind(this));Z(this,d,new Map);Z(this,o,!1);Z(this,p,!1);Z(this,r,void 0);g._initialized||(g._initialized=!0,X.FreeTextEditor.initialize(a.l10n),j.InkEditor.initialize(a.l10n)),a.uiManager.registerEditorTypes([X.FreeTextEditor,j.InkEditor]),gt(this,r,a.uiManager),this.pageIndex=a.pageIndex,this.div=a.div,gt(this,P,a.accessibilityManager),f(this,r).addLayer(this)}get isEmpty(){return f(this,d).size===0}updateToolbar(a){f(this,r).updateToolbar(a)}updateMode(a=f(this,r).getMode()){at(this,l,Re).call(this),a===b.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),f(this,r).unselectAll(),a!==b.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",a===b.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",a===b.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(a){if(!a&&f(this,r).getMode()!==b.AnnotationEditorType.INK)return;if(!a){for(const W of f(this,d).values())if(W.isEmpty()){W.setInBackground();return}}at(this,e,Fe).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(a){f(this,r).setEditingState(a)}addCommands(a){f(this,r).addCommands(a)}enable(){this.div.style.pointerEvents="auto";for(const a of f(this,d).values())a.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const a of f(this,d).values())a.disableEditing();at(this,l,Re).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(a){f(this,r).getActive()!==a&&f(this,r).setActiveEditor(a)}enableClick(){this.div.addEventListener("pointerdown",f(this,I)),this.div.addEventListener("pointerup",f(this,F))}disableClick(){this.div.removeEventListener("pointerdown",f(this,I)),this.div.removeEventListener("pointerup",f(this,F))}attach(a){f(this,d).set(a.id,a)}detach(a){var D;f(this,d).delete(a.id),(D=f(this,P))==null||D.removePointerInTextLayer(a.contentDiv)}remove(a){f(this,r).removeEditor(a),this.detach(a),a.div.style.display="none",setTimeout(()=>{a.div.style.display="",a.div.remove(),a.isAttachedToDOM=!1,document.activeElement===document.body&&f(this,r).focusMainContainer()},0),f(this,p)||this.addInkEditorIfNeeded(!1)}add(a){if(at(this,y,ke).call(this,a),f(this,r).addEditor(a),this.attach(a),!a.isAttachedToDOM){const D=a.render();this.div.append(D),a.isAttachedToDOM=!0}this.moveEditorInDOM(a),a.onceAdded(),f(this,r).addToAnnotationStorage(a)}moveEditorInDOM(a){var D;(D=f(this,P))==null||D.moveElementInDOM(this.div,a.div,a.contentDiv,!0)}addOrRebuild(a){a.needsToBeRebuilt()?a.rebuild():this.add(a)}addANewEditor(a){const D=()=>{this.addOrRebuild(a)},W=()=>{a.remove()};this.addCommands({cmd:D,undo:W,mustExec:!0})}addUndoableEditor(a){const D=()=>{this.addOrRebuild(a)},W=()=>{a.remove()};this.addCommands({cmd:D,undo:W,mustExec:!1})}getNextId(){return f(this,r).getId()}deserialize(a){switch(a.annotationType){case b.AnnotationEditorType.FREETEXT:return X.FreeTextEditor.deserialize(a,this,f(this,r));case b.AnnotationEditorType.INK:return j.InkEditor.deserialize(a,this,f(this,r))}return null}setSelected(a){f(this,r).setSelected(a)}toggleSelected(a){f(this,r).toggleSelected(a)}isSelected(a){return f(this,r).isSelected(a)}unselect(a){f(this,r).unselect(a)}pointerup(a){const{isMac:D}=b.FeatureTest.platform;if(!(a.button!==0||a.ctrlKey&&D)&&a.target===this.div&&!!f(this,o)){if(gt(this,o,!1),!f(this,A)){gt(this,A,!0);return}at(this,e,Fe).call(this,a)}}pointerdown(a){const{isMac:D}=b.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&D||a.target!==this.div)return;gt(this,o,!0);const W=f(this,r).getActive();gt(this,A,!W||W.isEmpty())}drop(a){const D=a.dataTransfer.getData("text/plain"),W=f(this,r).getEditor(D);if(!W)return;a.preventDefault(),a.dataTransfer.dropEffect="move",at(this,y,ke).call(this,W);const tt=this.div.getBoundingClientRect(),rt=a.clientX-tt.x,lt=a.clientY-tt.y;W.translate(rt-W.startX,lt-W.startY),this.moveEditorInDOM(W),W.div.focus()}dragover(a){a.preventDefault()}destroy(){var a,D;((a=f(this,r).getActive())==null?void 0:a.parent)===this&&f(this,r).setActiveEditor(null);for(const W of f(this,d).values())(D=f(this,P))==null||D.removePointerInTextLayer(W.contentDiv),W.setParent(null),W.isAttachedToDOM=!1,W.div.remove();this.div=null,f(this,d).clear(),f(this,r).removeLayer(this)}render({viewport:a}){this.viewport=a,(0,st.setLayerDimensions)(this.div,a),(0,w.bindEvents)(this,this.div,["dragover","drop"]);for(const D of f(this,r).getEditors(this.pageIndex))this.add(D);this.updateMode()}update({viewport:a}){f(this,r).commitOrRemove(),this.viewport=a,(0,st.setLayerDimensions)(this.div,{rotation:a.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:a,pageHeight:D}=this.viewport.rawDims;return[a,D]}};let G=g;P=new WeakMap,A=new WeakMap,F=new WeakMap,I=new WeakMap,d=new WeakMap,o=new WeakMap,p=new WeakMap,r=new WeakMap,y=new WeakSet,ke=function(a){var D;a.parent!==this&&(this.attach(a),(D=a.parent)==null||D.detach(a),a.setParent(this),a.div&&a.isAttachedToDOM&&(a.div.remove(),this.div.append(a.div)))},T=new WeakSet,Qe=function(a){switch(f(this,r).getMode()){case b.AnnotationEditorType.FREETEXT:return new X.FreeTextEditor(a);case b.AnnotationEditorType.INK:return new j.InkEditor(a)}return null},e=new WeakSet,Fe=function(a){const D=this.getNextId(),W=at(this,T,Qe).call(this,{parent:this,id:D,x:a.offsetX,y:a.offsetY,uiManager:f(this,r)});return W&&this.add(W),W},l=new WeakSet,Re=function(){gt(this,p,!0);for(const a of f(this,d).values())a.isEmpty()&&a.remove();gt(this,p,!1)},Bt(G,"_initialized",!1),c.AnnotationEditorLayer=G},(V,c,K)=>{var st,G,P,A,F,I,d,o,p,r,Ze,C,ts,_,es,i,Me;Object.defineProperty(c,"__esModule",{value:!0}),c.FreeTextEditor=void 0;var b=K(1),w=K(5),X=K(4);const s=class extends X.AnnotationEditor{constructor(a){super({...a,name:"freeTextEditor"});Z(this,r);Z(this,C);Z(this,_);Z(this,i);Z(this,st,this.editorDivBlur.bind(this));Z(this,G,this.editorDivFocus.bind(this));Z(this,P,this.editorDivInput.bind(this));Z(this,A,this.editorDivKeydown.bind(this));Z(this,F,void 0);Z(this,I,"");Z(this,d,`${this.id}-editor`);Z(this,o,!1);Z(this,p,void 0);gt(this,F,a.color||s._defaultColor||X.AnnotationEditor._defaultLineColor),gt(this,p,a.fontSize||s._defaultFontSize)}static initialize(a){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(W=>[W,a.get(W)]));const D=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(D.getPropertyValue("--freetext-padding"))}static updateDefaultParams(a,D){switch(a){case b.AnnotationEditorParamsType.FREETEXT_SIZE:s._defaultFontSize=D;break;case b.AnnotationEditorParamsType.FREETEXT_COLOR:s._defaultColor=D;break}}updateParams(a,D){switch(a){case b.AnnotationEditorParamsType.FREETEXT_SIZE:at(this,r,Ze).call(this,D);break;case b.AnnotationEditorParamsType.FREETEXT_COLOR:at(this,C,ts).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[b.AnnotationEditorParamsType.FREETEXT_SIZE,s._defaultFontSize],[b.AnnotationEditorParamsType.FREETEXT_COLOR,s._defaultColor||X.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[b.AnnotationEditorParamsType.FREETEXT_SIZE,f(this,p)],[b.AnnotationEditorParamsType.FREETEXT_COLOR,f(this,F)]]}getInitialTranslation(){const a=this.parentScale;return[-s._internalPadding*a,-(s._internalPadding+f(this,p))*a]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(b.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",f(this,A)),this.editorDiv.addEventListener("focus",f(this,G)),this.editorDiv.addEventListener("blur",f(this,st)),this.editorDiv.addEventListener("input",f(this,P)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",f(this,d)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",f(this,A)),this.editorDiv.removeEventListener("focus",f(this,G)),this.editorDiv.removeEventListener("blur",f(this,st)),this.editorDiv.removeEventListener("input",f(this,P)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(a){super.focusin(a),a.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){!this.isInEditMode()||(super.commit(),f(this,o)||(gt(this,o,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),gt(this,I,at(this,_,es).call(this).trimEnd()),at(this,i,Me).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(a){this.enableEditMode(),this.editorDiv.focus()}keydown(a){a.target===this.div&&a.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(a){s._keyboardManager.exec(this,a)}editorDivFocus(a){this.isEditing=!0}editorDivBlur(a){this.isEditing=!1}editorDivInput(a){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let a,D;this.width&&(a=this.x,D=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",f(this,d)),this.enableEditing(),s._l10nPromise.get("editor_free_text2_aria_label").then(tt=>{var rt;return(rt=this.editorDiv)==null?void 0:rt.setAttribute("aria-label",tt)}),s._l10nPromise.get("free_text2_default_content").then(tt=>{var rt;return(rt=this.editorDiv)==null?void 0:rt.setAttribute("default-content",tt)}),this.editorDiv.contentEditable=!0;const{style:W}=this.editorDiv;if(W.fontSize=`calc(${f(this,p)}px * var(--scale-factor))`,W.color=f(this,F),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,w.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[tt,rt]=this.parentDimensions;this.setAt(a*tt,D*rt,this.width*tt,this.height*rt);for(const lt of f(this,I).split(`
`)){const B=document.createElement("div");B.append(lt?document.createTextNode(lt):document.createElement("br")),this.editorDiv.append(B)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(a,D,W){const tt=super.deserialize(a,D,W);return gt(tt,p,a.fontSize),gt(tt,F,b.Util.makeHexColor(...a.color)),gt(tt,I,a.value),tt}serialize(){if(this.isEmpty())return null;const a=s._internalPadding*this.parentScale,D=this.getRect(a,a),W=X.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:f(this,F));return{annotationType:b.AnnotationEditorType.FREETEXT,color:W,fontSize:f(this,p),value:f(this,I),pageIndex:this.pageIndex,rect:D,rotation:this.rotation}}};let j=s;st=new WeakMap,G=new WeakMap,P=new WeakMap,A=new WeakMap,F=new WeakMap,I=new WeakMap,d=new WeakMap,o=new WeakMap,p=new WeakMap,r=new WeakSet,Ze=function(a){const D=tt=>{this.editorDiv.style.fontSize=`calc(${tt}px * var(--scale-factor))`,this.translate(0,-(tt-f(this,p))*this.parentScale),gt(this,p,tt),at(this,i,Me).call(this)},W=f(this,p);this.addCommands({cmd:()=>{D(a)},undo:()=>{D(W)},mustExec:!0,type:b.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},C=new WeakSet,ts=function(a){const D=f(this,F);this.addCommands({cmd:()=>{gt(this,F,this.editorDiv.style.color=a)},undo:()=>{gt(this,F,this.editorDiv.style.color=D)},mustExec:!0,type:b.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,es=function(){const a=this.editorDiv.getElementsByTagName("div");if(a.length===0)return this.editorDiv.innerText;const D=[];for(const W of a)D.push(W.innerText.replace(/\r\n?|\n/,""));return D.join(`
`)},i=new WeakSet,Me=function(){const[a,D]=this.parentDimensions;let W;if(this.isAttachedToDOM)W=this.div.getBoundingClientRect();else{const{currentLayer:tt,div:rt}=this,lt=rt.style.display;rt.style.display="hidden",tt.div.append(this.div),W=rt.getBoundingClientRect(),rt.remove(),rt.style.display=lt}this.width=W.width/a,this.height=W.height/D},Bt(j,"_freeTextDefaultContent",""),Bt(j,"_l10nPromise"),Bt(j,"_internalPadding",0),Bt(j,"_defaultColor",null),Bt(j,"_defaultFontSize",10),Bt(j,"_keyboardManager",new w.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],s.prototype.commitOrRemove]])),Bt(j,"_type","freetext"),c.FreeTextEditor=j},(V,c,K)=>{var G,P,A,F,I,d,o,p,r,y,C,T,_,e,i,l,s,ss,x,ns,D,is,tt,rs,lt,De,U,as,pt,Oe,At,os,L,ls,u,cs,N,hs,H,ds,k,Jt,t,Ie,m,me,v,be,it,ie,nt,Le,ut,_e,dt,us,Ct,fs,Pt,ps,_t,gs,Mt,Ne,$,Ae,yt,re,Ut,je;Object.defineProperty(c,"__esModule",{value:!0}),c.InkEditor=void 0;var b=K(1),w=K(4),X=K(5);const j=16,qt=class extends w.AnnotationEditor{constructor(Q){super({...Q,name:"inkEditor"});Z(this,s);Z(this,x);Z(this,D);Z(this,tt);Z(this,lt);Z(this,U);Z(this,pt);Z(this,At);Z(this,L);Z(this,u);Z(this,N);Z(this,H);Z(this,k);Z(this,t);Z(this,m);Z(this,v);Z(this,it);Z(this,nt);Z(this,ut);Z(this,Ct);Z(this,Pt);Z(this,_t);Z(this,Mt);Z(this,$);Z(this,yt);Z(this,Ut);Z(this,G,0);Z(this,P,0);Z(this,A,0);Z(this,F,this.canvasContextMenu.bind(this));Z(this,I,this.canvasPointermove.bind(this));Z(this,d,this.canvasPointerleave.bind(this));Z(this,o,this.canvasPointerup.bind(this));Z(this,p,this.canvasPointerdown.bind(this));Z(this,r,new Path2D);Z(this,y,!1);Z(this,C,!1);Z(this,T,!1);Z(this,_,null);Z(this,e,0);Z(this,i,0);Z(this,l,null);this.color=Q.color||null,this.thickness=Q.thickness||null,this.opacity=Q.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(Q){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(ft=>[ft,Q.get(ft)]))}static updateDefaultParams(Q,ft){switch(Q){case b.AnnotationEditorParamsType.INK_THICKNESS:qt._defaultThickness=ft;break;case b.AnnotationEditorParamsType.INK_COLOR:qt._defaultColor=ft;break;case b.AnnotationEditorParamsType.INK_OPACITY:qt._defaultOpacity=ft/100;break}}updateParams(Q,ft){switch(Q){case b.AnnotationEditorParamsType.INK_THICKNESS:at(this,s,ss).call(this,ft);break;case b.AnnotationEditorParamsType.INK_COLOR:at(this,x,ns).call(this,ft);break;case b.AnnotationEditorParamsType.INK_OPACITY:at(this,D,is).call(this,ft);break}}static get defaultPropertiesToUpdate(){return[[b.AnnotationEditorParamsType.INK_THICKNESS,qt._defaultThickness],[b.AnnotationEditorParamsType.INK_COLOR,qt._defaultColor||w.AnnotationEditor._defaultLineColor],[b.AnnotationEditorParamsType.INK_OPACITY,Math.round(qt._defaultOpacity*100)]]}get propertiesToUpdate(){var Q;return[[b.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||qt._defaultThickness],[b.AnnotationEditorParamsType.INK_COLOR,this.color||qt._defaultColor||w.AnnotationEditor._defaultLineColor],[b.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((Q=this.opacity)!=null?Q:qt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(at(this,m,me).call(this),at(this,v,be).call(this)),this.isAttachedToDOM||(this.parent.add(this),at(this,it,ie).call(this)),at(this,yt,re).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,f(this,_).disconnect(),gt(this,_,null),super.remove())}setParent(Q){!this.parent&&Q?this._uiManager.removeShouldRescale(this):this.parent&&Q===null&&this._uiManager.addShouldRescale(this),super.setParent(Q)}onScaleChanging(){const[Q,ft]=this.parentDimensions,St=this.width*Q,Et=this.height*ft;this.setDimensions(St,Et)}enableEditMode(){f(this,y)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",f(this,p)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",f(this,p)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){f(this,y)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),gt(this,y,!0),this.div.classList.add("disabled"),at(this,yt,re).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(Q){super.focusin(Q),this.enableEditMode()}canvasPointerdown(Q){Q.button!==0||!this.isInEditMode()||f(this,y)||(this.setInForeground(),Q.preventDefault(),Q.type!=="mouse"&&this.div.focus(),at(this,U,as).call(this,Q.offsetX,Q.offsetY))}canvasContextMenu(Q){Q.preventDefault()}canvasPointermove(Q){Q.preventDefault(),at(this,pt,Oe).call(this,Q.offsetX,Q.offsetY)}canvasPointerup(Q){Q.preventDefault(),at(this,t,Ie).call(this,Q)}canvasPointerleave(Q){at(this,t,Ie).call(this,Q)}render(){if(this.div)return this.div;let Q,ft;this.width&&(Q=this.x,ft=this.y),super.render(),qt._l10nPromise.get("editor_ink2_aria_label").then(Rt=>{var xt;return(xt=this.div)==null?void 0:xt.setAttribute("aria-label",Rt)});const[St,Et,Tt,Ft]=at(this,tt,rs).call(this);if(this.setAt(St,Et,0,0),this.setDims(Tt,Ft),at(this,m,me).call(this),this.width){const[Rt,xt]=this.parentDimensions;this.setAt(Q*Rt,ft*xt,this.width*Rt,this.height*xt),gt(this,T,!0),at(this,it,ie).call(this),this.setDims(this.width*Rt,this.height*xt),at(this,k,Jt).call(this),at(this,Ut,je).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return at(this,v,be).call(this),this.div}setDimensions(Q,ft){const St=Math.round(Q),Et=Math.round(ft);if(f(this,e)===St&&f(this,i)===Et)return;gt(this,e,St),gt(this,i,Et),this.canvas.style.visibility="hidden",f(this,G)&&Math.abs(f(this,G)-Q/ft)>.01&&(ft=Math.ceil(Q/f(this,G)),this.setDims(Q,ft));const[Tt,Ft]=this.parentDimensions;this.width=Q/Tt,this.height=ft/Ft,f(this,y)&&at(this,nt,Le).call(this,Q,ft),at(this,it,ie).call(this),at(this,k,Jt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Q,ft,St){var Nt,jt;const Et=super.deserialize(Q,ft,St);Et.thickness=Q.thickness,Et.color=b.Util.makeHexColor(...Q.color),Et.opacity=Q.opacity;const[Tt,Ft]=Et.pageDimensions,Rt=Et.width*Tt,xt=Et.height*Ft,Lt=Et.parentScale,Dt=Q.thickness/2;gt(Et,G,Rt/xt),gt(Et,y,!0),gt(Et,e,Math.round(Rt)),gt(Et,i,Math.round(xt));for(const{bezier:Ht}of Q.paths){const Vt=[];Et.paths.push(Vt);let zt=Lt*(Ht[0]-Dt),Gt=Lt*(xt-Ht[1]-Dt);for(let Xt=2,le=Ht.length;Xt<le;Xt+=6){const ce=Lt*(Ht[Xt]-Dt),he=Lt*(xt-Ht[Xt+1]-Dt),de=Lt*(Ht[Xt+2]-Dt),ue=Lt*(xt-Ht[Xt+3]-Dt),qe=Lt*(Ht[Xt+4]-Dt),He=Lt*(xt-Ht[Xt+5]-Dt);Vt.push([[zt,Gt],[ce,he],[de,ue],[qe,He]]),zt=qe,Gt=He}const Kt=at(this,dt,us).call(this,Vt);Et.bezierPath2D.push(Kt)}const Ot=at(Nt=Et,Mt,Ne).call(Nt);return gt(Et,A,Math.max(j,Ot[2]-Ot[0])),gt(Et,P,Math.max(j,Ot[3]-Ot[1])),at(jt=Et,nt,Le).call(jt,Rt,xt),Et}serialize(){if(this.isEmpty())return null;const Q=this.getRect(0,0),ft=this.rotation%180===0?Q[3]-Q[1]:Q[2]-Q[0],St=w.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:b.AnnotationEditorType.INK,color:St,thickness:this.thickness,opacity:this.opacity,paths:at(this,Ct,fs).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ft),pageIndex:this.pageIndex,rect:Q,rotation:this.rotation}}};let st=qt;G=new WeakMap,P=new WeakMap,A=new WeakMap,F=new WeakMap,I=new WeakMap,d=new WeakMap,o=new WeakMap,p=new WeakMap,r=new WeakMap,y=new WeakMap,C=new WeakMap,T=new WeakMap,_=new WeakMap,e=new WeakMap,i=new WeakMap,l=new WeakMap,s=new WeakSet,ss=function(Q){const ft=this.thickness;this.addCommands({cmd:()=>{this.thickness=Q,at(this,yt,re).call(this)},undo:()=>{this.thickness=ft,at(this,yt,re).call(this)},mustExec:!0,type:b.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},x=new WeakSet,ns=function(Q){const ft=this.color;this.addCommands({cmd:()=>{this.color=Q,at(this,k,Jt).call(this)},undo:()=>{this.color=ft,at(this,k,Jt).call(this)},mustExec:!0,type:b.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},D=new WeakSet,is=function(Q){Q/=100;const ft=this.opacity;this.addCommands({cmd:()=>{this.opacity=Q,at(this,k,Jt).call(this)},undo:()=>{this.opacity=ft,at(this,k,Jt).call(this)},mustExec:!0,type:b.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},tt=new WeakSet,rs=function(){const{parentRotation:Q,parentDimensions:[ft,St]}=this;switch(Q){case 90:return[0,St,St,ft];case 180:return[ft,St,ft,St];case 270:return[ft,0,St,ft];default:return[0,0,ft,St]}},lt=new WeakSet,De=function(){const{ctx:Q,color:ft,opacity:St,thickness:Et,parentScale:Tt,scaleFactor:Ft}=this;Q.lineWidth=Et*Tt/Ft,Q.lineCap="round",Q.lineJoin="round",Q.miterLimit=10,Q.strokeStyle=`${ft}${(0,X.opacityToHex)(St)}`},U=new WeakSet,as=function(Q,ft){var St;this.canvas.addEventListener("contextmenu",f(this,F)),this.canvas.addEventListener("pointerleave",f(this,d)),this.canvas.addEventListener("pointermove",f(this,I)),this.canvas.addEventListener("pointerup",f(this,o)),this.canvas.removeEventListener("pointerdown",f(this,p)),this.isEditing=!0,f(this,T)||(gt(this,T,!0),at(this,it,ie).call(this),this.thickness||(this.thickness=qt._defaultThickness),this.color||(this.color=qt._defaultColor||w.AnnotationEditor._defaultLineColor),(St=this.opacity)!=null||(this.opacity=qt._defaultOpacity)),this.currentPath.push([Q,ft]),gt(this,C,!1),at(this,lt,De).call(this),gt(this,l,()=>{at(this,u,cs).call(this),f(this,l)&&window.requestAnimationFrame(f(this,l))}),window.requestAnimationFrame(f(this,l))},pt=new WeakSet,Oe=function(Q,ft){const[St,Et]=this.currentPath.at(-1);if(this.currentPath.length>1&&Q===St&&ft===Et)return;const Tt=this.currentPath;let Ft=f(this,r);if(Tt.push([Q,ft]),gt(this,C,!0),Tt.length<=2){Ft.moveTo(...Tt[0]),Ft.lineTo(Q,ft);return}Tt.length===3&&(gt(this,r,Ft=new Path2D),Ft.moveTo(...Tt[0])),at(this,N,hs).call(this,Ft,...Tt.at(-3),...Tt.at(-2),Q,ft)},At=new WeakSet,os=function(){if(this.currentPath.length===0)return;const Q=this.currentPath.at(-1);f(this,r).lineTo(...Q)},L=new WeakSet,ls=function(Q,ft){gt(this,l,null),Q=Math.min(Math.max(Q,0),this.canvas.width),ft=Math.min(Math.max(ft,0),this.canvas.height),at(this,pt,Oe).call(this,Q,ft),at(this,At,os).call(this);let St;if(this.currentPath.length!==1)St=at(this,H,ds).call(this);else{const xt=[Q,ft];St=[[xt,xt.slice(),xt.slice(),xt]]}const Et=f(this,r),Tt=this.currentPath;this.currentPath=[],gt(this,r,new Path2D);const Ft=()=>{this.allRawPaths.push(Tt),this.paths.push(St),this.bezierPath2D.push(Et),this.rebuild()},Rt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(at(this,m,me).call(this),at(this,v,be).call(this)),at(this,yt,re).call(this))};this.addCommands({cmd:Ft,undo:Rt,mustExec:!0})},u=new WeakSet,cs=function(){if(!f(this,C))return;gt(this,C,!1);const Q=Math.ceil(this.thickness*this.parentScale),ft=this.currentPath.slice(-3),St=ft.map(Ft=>Ft[0]),Et=ft.map(Ft=>Ft[1]);Math.min(...St)-Q,Math.max(...St)+Q,Math.min(...Et)-Q,Math.max(...Et)+Q;const{ctx:Tt}=this;Tt.save(),Tt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ft of this.bezierPath2D)Tt.stroke(Ft);Tt.stroke(f(this,r)),Tt.restore()},N=new WeakSet,hs=function(Q,ft,St,Et,Tt,Ft,Rt){const xt=(ft+Et)/2,Lt=(St+Tt)/2,Dt=(Et+Ft)/2,Ot=(Tt+Rt)/2;Q.bezierCurveTo(xt+2*(Et-xt)/3,Lt+2*(Tt-Lt)/3,Dt+2*(Et-Dt)/3,Ot+2*(Tt-Ot)/3,Dt,Ot)},H=new WeakSet,ds=function(){const Q=this.currentPath;if(Q.length<=2)return[[Q[0],Q[0],Q.at(-1),Q.at(-1)]];const ft=[];let St,[Et,Tt]=Q[0];for(St=1;St<Q.length-2;St++){const[Nt,jt]=Q[St],[Ht,Vt]=Q[St+1],zt=(Nt+Ht)/2,Gt=(jt+Vt)/2,Kt=[Et+2*(Nt-Et)/3,Tt+2*(jt-Tt)/3],Xt=[zt+2*(Nt-zt)/3,Gt+2*(jt-Gt)/3];ft.push([[Et,Tt],Kt,Xt,[zt,Gt]]),[Et,Tt]=[zt,Gt]}const[Ft,Rt]=Q[St],[xt,Lt]=Q[St+1],Dt=[Et+2*(Ft-Et)/3,Tt+2*(Rt-Tt)/3],Ot=[xt+2*(Ft-xt)/3,Lt+2*(Rt-Lt)/3];return ft.push([[Et,Tt],Dt,Ot,[xt,Lt]]),ft},k=new WeakSet,Jt=function(){if(this.isEmpty()){at(this,ut,_e).call(this);return}at(this,lt,De).call(this);const{canvas:Q,ctx:ft}=this;ft.setTransform(1,0,0,1,0,0),ft.clearRect(0,0,Q.width,Q.height),at(this,ut,_e).call(this);for(const St of this.bezierPath2D)ft.stroke(St)},t=new WeakSet,Ie=function(Q){this.canvas.removeEventListener("pointerleave",f(this,d)),this.canvas.removeEventListener("pointermove",f(this,I)),this.canvas.removeEventListener("pointerup",f(this,o)),this.canvas.addEventListener("pointerdown",f(this,p)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",f(this,F))},10),at(this,L,ls).call(this,Q.offsetX,Q.offsetY),this.addToAnnotationStorage(),this.setInBackground()},m=new WeakSet,me=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",qt._l10nPromise.get("editor_ink_canvas_aria_label").then(Q=>{var ft;return(ft=this.canvas)==null?void 0:ft.setAttribute("aria-label",Q)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},v=new WeakSet,be=function(){gt(this,_,new ResizeObserver(Q=>{const ft=Q[0].contentRect;ft.width&&ft.height&&this.setDimensions(ft.width,ft.height)})),f(this,_).observe(this.div)},it=new WeakSet,ie=function(){if(!f(this,T))return;const[Q,ft]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Q),this.canvas.height=Math.ceil(this.height*ft),at(this,ut,_e).call(this)},nt=new WeakSet,Le=function(Q,ft){const St=at(this,$,Ae).call(this),Et=(Q-St)/f(this,A),Tt=(ft-St)/f(this,P);this.scaleFactor=Math.min(Et,Tt)},ut=new WeakSet,_e=function(){const Q=at(this,$,Ae).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Q,this.translationY*this.scaleFactor+Q)},dt=new WeakSet,us=function(Q){const ft=new Path2D;for(let St=0,Et=Q.length;St<Et;St++){const[Tt,Ft,Rt,xt]=Q[St];St===0&&ft.moveTo(...Tt),ft.bezierCurveTo(Ft[0],Ft[1],Rt[0],Rt[1],xt[0],xt[1])}return ft},Ct=new WeakSet,fs=function(Q,ft,St,Et){const Ft=[],Rt=this.thickness/2;let xt,Lt;for(const Dt of this.paths){xt=[],Lt=[];for(let Ot=0,Nt=Dt.length;Ot<Nt;Ot++){const[jt,Ht,Vt,zt]=Dt[Ot],Gt=Q*(jt[0]+ft)+Rt,Kt=Et-Q*(jt[1]+St)-Rt,Xt=Q*(Ht[0]+ft)+Rt,le=Et-Q*(Ht[1]+St)-Rt,ce=Q*(Vt[0]+ft)+Rt,he=Et-Q*(Vt[1]+St)-Rt,de=Q*(zt[0]+ft)+Rt,ue=Et-Q*(zt[1]+St)-Rt;Ot===0&&(xt.push(Gt,Kt),Lt.push(Gt,Kt)),xt.push(Xt,le,ce,he,de,ue),at(this,Pt,ps).call(this,Gt,Kt,Xt,le,ce,he,de,ue,4,Lt)}Ft.push({bezier:xt,points:Lt})}return Ft},Pt=new WeakSet,ps=function(Q,ft,St,Et,Tt,Ft,Rt,xt,Lt,Dt){if(at(this,_t,gs).call(this,Q,ft,St,Et,Tt,Ft,Rt,xt)){Dt.push(Rt,xt);return}for(let Ot=1;Ot<Lt-1;Ot++){const Nt=Ot/Lt,jt=1-Nt;let Ht=Nt*Q+jt*St,Vt=Nt*ft+jt*Et,zt=Nt*St+jt*Tt,Gt=Nt*Et+jt*Ft;const Kt=Nt*Tt+jt*Rt,Xt=Nt*Ft+jt*xt;Ht=Nt*Ht+jt*zt,Vt=Nt*Vt+jt*Gt,zt=Nt*zt+jt*Kt,Gt=Nt*Gt+jt*Xt,Ht=Nt*Ht+jt*zt,Vt=Nt*Vt+jt*Gt,Dt.push(Ht,Vt)}Dt.push(Rt,xt)},_t=new WeakSet,gs=function(Q,ft,St,Et,Tt,Ft,Rt,xt){const Dt=(3*St-2*Q-Rt)**2,Ot=(3*Et-2*ft-xt)**2,Nt=(3*Tt-Q-2*Rt)**2,jt=(3*Ft-ft-2*xt)**2;return Math.max(Dt,Nt)+Math.max(Ot,jt)<=10},Mt=new WeakSet,Ne=function(){let Q=1/0,ft=-1/0,St=1/0,Et=-1/0;for(const Tt of this.paths)for(const[Ft,Rt,xt,Lt]of Tt){const Dt=b.Util.bezierBoundingBox(...Ft,...Rt,...xt,...Lt);Q=Math.min(Q,Dt[0]),St=Math.min(St,Dt[1]),ft=Math.max(ft,Dt[2]),Et=Math.max(Et,Dt[3])}return[Q,St,ft,Et]},$=new WeakSet,Ae=function(){return f(this,y)?Math.ceil(this.thickness*this.parentScale):0},yt=new WeakSet,re=function(Q=!1){if(this.isEmpty())return;if(!f(this,y)){at(this,k,Jt).call(this);return}const ft=at(this,Mt,Ne).call(this),St=at(this,$,Ae).call(this);gt(this,A,Math.max(j,ft[2]-ft[0])),gt(this,P,Math.max(j,ft[3]-ft[1]));const Et=Math.ceil(St+f(this,A)*this.scaleFactor),Tt=Math.ceil(St+f(this,P)*this.scaleFactor),[Ft,Rt]=this.parentDimensions;this.width=Et/Ft,this.height=Tt/Rt,gt(this,G,Et/Tt),at(this,Ut,je).call(this);const xt=this.translationX,Lt=this.translationY;this.translationX=-ft[0],this.translationY=-ft[1],at(this,it,ie).call(this),at(this,k,Jt).call(this),gt(this,e,Et),gt(this,i,Tt),this.setDims(Et,Tt);const Dt=Q?St/this.scaleFactor/2:0;this.translate(xt-this.translationX-Dt,Lt-this.translationY-Dt)},Ut=new WeakSet,je=function(){const{style:Q}=this.div;f(this,G)>=1?(Q.minHeight=`${j}px`,Q.minWidth=`${Math.round(f(this,G)*j)}px`):(Q.minWidth=`${j}px`,Q.minHeight=`${Math.round(j/f(this,G))}px`)},Z(st,dt),Bt(st,"_defaultColor",null),Bt(st,"_defaultOpacity",1),Bt(st,"_defaultThickness",1),Bt(st,"_l10nPromise"),Bt(st,"_type","ink"),c.InkEditor=st},(V,c,K)=>{var bt,te,h,ms,N,Be,H,Ue;Object.defineProperty(c,"__esModule",{value:!0}),c.AnnotationLayer=void 0;var b=K(1),w=K(6),X=K(3),j=K(31),st=K(32);const G=1e3,P=9,A=new WeakSet;function F(R){return{width:R[2]-R[0],height:R[3]-R[1]}}class I{static create(t){switch(t.data.annotationType){case b.AnnotationType.LINK:return new o(t);case b.AnnotationType.TEXT:return new p(t);case b.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new y(t);case"Btn":return t.data.radioButton?new T(t):t.data.checkBox?new C(t):new _(t);case"Ch":return new e(t)}return new r(t);case b.AnnotationType.POPUP:return new i(t);case b.AnnotationType.FREETEXT:return new s(t);case b.AnnotationType.LINE:return new g(t);case b.AnnotationType.SQUARE:return new x(t);case b.AnnotationType.CIRCLE:return new a(t);case b.AnnotationType.POLYLINE:return new D(t);case b.AnnotationType.CARET:return new tt(t);case b.AnnotationType.INK:return new rt(t);case b.AnnotationType.POLYGON:return new W(t);case b.AnnotationType.HIGHLIGHT:return new lt(t);case b.AnnotationType.UNDERLINE:return new B(t);case b.AnnotationType.SQUIGGLY:return new U(t);case b.AnnotationType.STRIKEOUT:return new J(t);case b.AnnotationType.STAMP:return new pt(t);case b.AnnotationType.FILEATTACHMENT:return new vt(t);default:return new d(t)}}}class d{constructor(t,{isRenderable:n=!1,ignoreBorder:m=!1,createQuadrilaterals:S=!1}={}){this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,n&&(this.container=this._createContainer(m)),S&&(this.quadrilaterals=this._createQuadrilaterals(m))}_createContainer(t=!1){const{data:n,page:m,viewport:S}=this,v=document.createElement("section");v.setAttribute("data-annotation-id",n.id),n.noRotate&&v.classList.add("norotate");const{pageWidth:q,pageHeight:it,pageX:et,pageY:nt}=S.rawDims,{width:ot,height:ut}=F(n.rect),ht=b.Util.normalizeRect([n.rect[0],m.view[3]-n.rect[1]+m.view[1],n.rect[2],m.view[3]-n.rect[3]+m.view[1]]);if(!t&&n.borderStyle.width>0){v.style.borderWidth=`${n.borderStyle.width}px`;const mt=n.borderStyle.horizontalCornerRadius,Ct=n.borderStyle.verticalCornerRadius;if(mt>0||Ct>0){const Pt=`calc(${mt}px * var(--scale-factor)) / calc(${Ct}px * var(--scale-factor))`;v.style.borderRadius=Pt}else if(this instanceof T){const Pt=`calc(${ot}px * var(--scale-factor)) / calc(${ut}px * var(--scale-factor))`;v.style.borderRadius=Pt}switch(n.borderStyle.style){case b.AnnotationBorderStyleType.SOLID:v.style.borderStyle="solid";break;case b.AnnotationBorderStyleType.DASHED:v.style.borderStyle="dashed";break;case b.AnnotationBorderStyleType.BEVELED:(0,b.warn)("Unimplemented border style: beveled");break;case b.AnnotationBorderStyleType.INSET:(0,b.warn)("Unimplemented border style: inset");break;case b.AnnotationBorderStyleType.UNDERLINE:v.style.borderBottomStyle="solid";break}const wt=n.borderColor||null;wt?v.style.borderColor=b.Util.makeHexColor(wt[0]|0,wt[1]|0,wt[2]|0):v.style.borderWidth=0}v.style.left=`${100*(ht[0]-et)/q}%`,v.style.top=`${100*(ht[1]-nt)/it}%`;const{rotation:dt}=n;return n.hasOwnCanvas||dt===0?(v.style.width=`${100*ot/q}%`,v.style.height=`${100*ut/it}%`):this.setRotation(dt,v),v}setRotation(t,n=this.container){const{pageWidth:m,pageHeight:S}=this.viewport.rawDims,{width:v,height:q}=F(this.data.rect);let it,et;t%180===0?(it=100*v/m,et=100*q/S):(it=100*q/m,et=100*v/S),n.style.width=`${it}%`,n.style.height=`${et}%`,n.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(n,m,S)=>{const v=S.detail[n];S.target.style[m]=j.ColorConverters[`${v[0]}_HTML`](v.slice(1))};return(0,b.shadow)(this,"_commonActions",{display:n=>{const m=n.detail.display%2===1;this.container.style.visibility=m?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:m,print:n.detail.display===0||n.detail.display===3})},print:n=>{this.annotationStorage.setValue(this.data.id,{print:n.detail.print})},hidden:n=>{this.container.style.visibility=n.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:n.detail.hidden})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.detail.readonly?n.target.setAttribute("readonly",""):n.target.removeAttribute("readonly")},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)},rotation:n=>{const m=n.detail.rotation;this.setRotation(m),this.annotationStorage.setValue(this.data.id,{rotation:m})}})}_dispatchEventFromSandbox(t,n){const m=this._commonActions;for(const S of Object.keys(n.detail)){const v=t[S]||m[S];v==null||v(n)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const m=this._commonActions;for(const[S,v]of Object.entries(n)){const q=m[S];if(q){const it={detail:{[S]:v},target:t};q(it),delete n[S]}}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const n=[],m=this.data.rect;for(const S of this.data.quadPoints)this.data.rect=[S[2].x,S[2].y,S[1].x,S[1].y],n.push(this._createContainer(t));return this.data.rect=m,n}_createPopup(t,n){let m=this.container;this.quadrilaterals&&(t||(t=this.quadrilaterals),m=this.quadrilaterals[0]),t||(t=document.createElement("div"),t.classList.add("popupTriggerArea"),m.append(t));const v=new l({container:m,trigger:t,color:n.color,titleObj:n.titleObj,modificationDate:n.modificationDate,contentsObj:n.contentsObj,richText:n.richText,hideWrapper:!0}).render();v.style.left="100%",m.append(v)}_renderQuadrilaterals(t){for(const n of this.quadrilaterals)n.classList.add(t);return this.quadrilaterals}render(){(0,b.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){const m=[];if(this._fieldObjects){const S=this._fieldObjects[t];if(S)for(const{page:v,id:q,exportValues:it}of S){if(v===-1||q===n)continue;const et=typeof it=="string"?it:null,nt=document.querySelector(`[data-element-id="${q}"]`);if(nt&&!A.has(nt)){(0,b.warn)(`_getElementsByName - element not allowed: ${q}`);continue}m.push({id:q,exportValue:et,domElement:nt})}return m}for(const S of document.getElementsByName(t)){const{exportValue:v}=S,q=S.getAttribute("data-element-id");q!==n&&(!A.has(S)||m.push({id:q,exportValue:v,domElement:S}))}return m}}class o extends d{constructor(n,m=null){super(n,{isRenderable:!0,ignoreBorder:!!(m!=null&&m.ignoreBorder),createQuadrilaterals:!0});Z(this,bt);Z(this,h);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:m}=this,S=document.createElement("a");S.setAttribute("data-element-id",n.id);let v=!1;return n.url?(m.addLinkAttributes(S,n.url,n.newWindow),v=!0):n.action?(this._bindNamedAction(S,n.action),v=!0):n.attachment?(this._bindAttachment(S,n.attachment),v=!0):n.setOCGState?(at(this,h,ms).call(this,S,n.setOCGState),v=!0):n.dest?(this._bindLink(S,n.dest),v=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(S,n),v=!0),n.resetForm?(this._bindResetFormAction(S,n.resetForm),v=!0):this.isTooltipOnly&&!v&&(this._bindLink(S,""),v=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((q,it)=>{const et=it===0?S:S.cloneNode();return q.append(et),q}):(this.container.classList.add("linkAnnotation"),v&&this.container.append(S),this.container)}_bindLink(n,m){n.href=this.linkService.getDestinationHash(m),n.onclick=()=>(m&&this.linkService.goToDestination(m),!1),(m||m==="")&&at(this,bt,te).call(this)}_bindNamedAction(n,m){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(m),!1),at(this,bt,te).call(this)}_bindAttachment(n,m){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>{var S;return(S=this.downloadManager)==null||S.openOrDownloadData(this.container,m.content,m.filename),!1},at(this,bt,te).call(this)}_bindJSAction(n,m){n.href=this.linkService.getAnchorUrl("");const S=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const v of Object.keys(m.actions)){const q=S.get(v);!q||(n[q]=()=>{var it;return(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m.id,name:v}}),!1})}n.onclick||(n.onclick=()=>!1),at(this,bt,te).call(this)}_bindResetFormAction(n,m){const S=n.onclick;if(S||(n.href=this.linkService.getAnchorUrl("")),at(this,bt,te).call(this),!this._fieldObjects){(0,b.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),S||(n.onclick=()=>!1);return}n.onclick=()=>{var ut;S==null||S();const{fields:v,refs:q,include:it}=m,et=[];if(v.length!==0||q.length!==0){const ht=new Set(q);for(const dt of v){const mt=this._fieldObjects[dt]||[];for(const{id:Ct}of mt)ht.add(Ct)}for(const dt of Object.values(this._fieldObjects))for(const mt of dt)ht.has(mt.id)===it&&et.push(mt)}else for(const ht of Object.values(this._fieldObjects))et.push(...ht);const nt=this.annotationStorage,ot=[];for(const ht of et){const{id:dt}=ht;switch(ot.push(dt),ht.type){case"text":{const Ct=ht.defaultValue||"";nt.setValue(dt,{value:Ct});break}case"checkbox":case"radiobutton":{const Ct=ht.defaultValue===ht.exportValues;nt.setValue(dt,{value:Ct});break}case"combobox":case"listbox":{const Ct=ht.defaultValue||"";nt.setValue(dt,{value:Ct});break}default:continue}const mt=document.querySelector(`[data-element-id="${dt}"]`);if(mt){if(!A.has(mt)){(0,b.warn)(`_bindResetFormAction - element not allowed: ${dt}`);continue}}else continue;mt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ut=this.linkService.eventBus)==null||ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ot,name:"ResetForm"}})),!1}}}bt=new WeakSet,te=function(){this.container.setAttribute("data-internal-link","")},h=new WeakSet,ms=function(n,m){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(m),!1),at(this,bt,te).call(this)};class p extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.append(t),this.container}}class r extends d{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(t){var n;this.data.hasOwnCanvas&&(((n=t.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){const{isWin:n,isMac:m}=b.FeatureTest.platform;return n&&t.ctrlKey||m&&t.metaKey}_setEventListener(t,n,m,S){n.includes("mouse")?t.addEventListener(n,v=>{var q;(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:m,value:S(v),shift:v.shiftKey,modifier:this._getKeyModifier(v)}})}):t.addEventListener(n,v=>{var q;(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:m,value:S(v)}})})}_setEventListeners(t,n,m){var S;for(const[v,q]of n)(q==="Action"||((S=this.data.actions)==null?void 0:S[q]))&&this._setEventListener(t,v,q,m)}_setBackgroundColor(t){const n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":b.Util.makeHexColor(n[0],n[1],n[2])}_setTextStyle(t){const n=["left","center","right"],{fontColor:m}=this.data.defaultAppearanceData,S=this.data.defaultAppearanceData.fontSize||P,v=t.style;let q;const it=2,et=nt=>Math.round(10*nt)/10;if(this.data.multiLine){const nt=Math.abs(this.data.rect[3]-this.data.rect[1]-it),ot=Math.round(nt/(b.LINE_FACTOR*S))||1,ut=nt/ot;q=Math.min(S,et(ut/b.LINE_FACTOR))}else{const nt=Math.abs(this.data.rect[3]-this.data.rect[1]-it);q=Math.min(S,et(nt/b.LINE_FACTOR))}v.fontSize=`calc(${q}px * var(--scale-factor))`,v.color=b.Util.makeHexColor(m[0],m[1],m[2]),this.data.textAlignment!==null&&(v.textAlign=n[this.data.textAlignment])}_setRequired(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}class y extends r{constructor(t){const n=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,m,S){const v=this.annotationStorage;for(const q of this._getElementsByName(t.name,t.id))q.domElement&&(q.domElement[n]=m),v.setValue(q.id,{[S]:m})}render(){var S,v;const t=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let m=null;if(this.renderForms){const q=t.getValue(n,{value:this.data.fieldValue});let it=q.value||"";const et=t.getValue(n,{charLimit:this.data.maxLen}).charLimit;et&&it.length>et&&(it=it.slice(0,et));let nt=q.formattedValue||((S=this.data.textContent)==null?void 0:S.join(`
`))||null;nt&&this.data.comb&&(nt=nt.replaceAll(/\s+/g,""));const ot={userValue:it,formattedValue:nt,lastCommittedValue:null,commitKey:1};this.data.multiLine?(m=document.createElement("textarea"),m.textContent=nt!=null?nt:it,this.data.doNotScroll&&(m.style.overflowY="hidden")):(m=document.createElement("input"),m.type="text",m.setAttribute("value",nt!=null?nt:it),this.data.doNotScroll&&(m.style.overflowX="hidden")),this.data.hasOwnCanvas&&(m.hidden=!0),A.add(m),m.setAttribute("data-element-id",n),m.disabled=this.data.readOnly,m.name=this.data.fieldName,m.tabIndex=G,this._setRequired(m,this.data.required),et&&(m.maxLength=et),m.addEventListener("input",ht=>{t.setValue(n,{value:ht.target.value}),this.setPropertyOnSiblings(m,"value",ht.target.value,"value"),ot.formattedValue=null}),m.addEventListener("resetform",ht=>{var mt;const dt=(mt=this.data.defaultFieldValue)!=null?mt:"";m.value=ot.userValue=dt,ot.formattedValue=null});let ut=ht=>{const{formattedValue:dt}=ot;dt!=null&&(ht.target.value=dt),ht.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){m.addEventListener("focus",dt=>{const{target:mt}=dt;ot.userValue&&(mt.value=ot.userValue),ot.lastCommittedValue=mt.value,ot.commitKey=1}),m.addEventListener("updatefromsandbox",dt=>{this.showElementAndHideCanvas(dt.target);const mt={value(Ct){var wt;ot.userValue=(wt=Ct.detail.value)!=null?wt:"",t.setValue(n,{value:ot.userValue.toString()}),Ct.target.value=ot.userValue},formattedValue(Ct){const{formattedValue:wt}=Ct.detail;ot.formattedValue=wt,wt!=null&&Ct.target!==document.activeElement&&(Ct.target.value=wt),t.setValue(n,{formattedValue:wt})},selRange(Ct){Ct.target.setSelectionRange(...Ct.detail.selRange)},charLimit:Ct=>{var _t;const{charLimit:wt}=Ct.detail,{target:Pt}=Ct;if(wt===0){Pt.removeAttribute("maxLength");return}Pt.setAttribute("maxLength",wt);let z=ot.userValue;!z||z.length<=wt||(z=z.slice(0,wt),Pt.value=ot.userValue=z,t.setValue(n,{value:z}),(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:z,willCommit:!0,commitKey:1,selStart:Pt.selectionStart,selEnd:Pt.selectionEnd}}))}};this._dispatchEventFromSandbox(mt,dt)}),m.addEventListener("keydown",dt=>{var wt;ot.commitKey=1;let mt=-1;if(dt.key==="Escape"?mt=0:dt.key==="Enter"&&!this.data.multiLine?mt=2:dt.key==="Tab"&&(ot.commitKey=3),mt===-1)return;const{value:Ct}=dt.target;ot.lastCommittedValue!==Ct&&(ot.lastCommittedValue=Ct,ot.userValue=Ct,(wt=this.linkService.eventBus)==null||wt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:Ct,willCommit:!0,commitKey:mt,selStart:dt.target.selectionStart,selEnd:dt.target.selectionEnd}}))});const ht=ut;ut=null,m.addEventListener("blur",dt=>{var Ct;if(!dt.relatedTarget)return;const{value:mt}=dt.target;ot.userValue=mt,ot.lastCommittedValue!==mt&&((Ct=this.linkService.eventBus)==null||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:mt,willCommit:!0,commitKey:ot.commitKey,selStart:dt.target.selectionStart,selEnd:dt.target.selectionEnd}})),ht(dt)}),(v=this.data.actions)!=null&&v.Keystroke&&m.addEventListener("beforeinput",dt=>{var Mt;ot.lastCommittedValue=null;const{data:mt,target:Ct}=dt,{value:wt,selectionStart:Pt,selectionEnd:z}=Ct;let _t=Pt,kt=z;switch(dt.inputType){case"deleteWordBackward":{const ct=wt.substring(0,Pt).match(/\w*[^\w]*$/);ct&&(_t-=ct[0].length);break}case"deleteWordForward":{const ct=wt.substring(Pt).match(/^[^\w]*\w*/);ct&&(kt+=ct[0].length);break}case"deleteContentBackward":Pt===z&&(_t-=1);break;case"deleteContentForward":Pt===z&&(kt+=1);break}dt.preventDefault(),(Mt=this.linkService.eventBus)==null||Mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:wt,change:mt||"",willCommit:!1,selStart:_t,selEnd:kt}})}),this._setEventListeners(m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],dt=>dt.target.value)}if(ut&&m.addEventListener("blur",ut),this.data.comb){const dt=(this.data.rect[2]-this.data.rect[0])/et;m.classList.add("comb"),m.style.letterSpacing=`calc(${dt}px * var(--scale-factor) - 1ch)`}}else m=document.createElement("div"),m.textContent=this.data.fieldValue,m.style.verticalAlign="middle",m.style.display="table-cell";return this._setTextStyle(m),this._setBackgroundColor(m),this._setDefaultPropertiesFromJS(m),this.container.append(m),this.container}}class C extends r{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,n=this.data,m=n.id;let S=t.getValue(m,{value:n.exportValue===n.fieldValue}).value;typeof S=="string"&&(S=S!=="Off",t.setValue(m,{value:S})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const v=document.createElement("input");return A.add(v),v.setAttribute("data-element-id",m),v.disabled=n.readOnly,this._setRequired(v,this.data.required),v.type="checkbox",v.name=n.fieldName,S&&v.setAttribute("checked",!0),v.setAttribute("exportValue",n.exportValue),v.tabIndex=G,v.addEventListener("change",q=>{const{name:it,checked:et}=q.target;for(const nt of this._getElementsByName(it,m)){const ot=et&&nt.exportValue===n.exportValue;nt.domElement&&(nt.domElement.checked=ot),t.setValue(nt.id,{value:ot})}t.setValue(m,{value:et})}),v.addEventListener("resetform",q=>{const it=n.defaultFieldValue||"Off";q.target.checked=it===n.exportValue}),this.enableScripting&&this.hasJSActions&&(v.addEventListener("updatefromsandbox",q=>{const it={value(et){et.target.checked=et.detail.value!=="Off",t.setValue(m,{value:et.target.checked})}};this._dispatchEventFromSandbox(it,q)}),this._setEventListeners(v,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],q=>q.target.checked)),this._setBackgroundColor(v),this._setDefaultPropertiesFromJS(v),this.container.append(v),this.container}}class T extends r{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,n=this.data,m=n.id;let S=t.getValue(m,{value:n.fieldValue===n.buttonValue}).value;typeof S=="string"&&(S=S!==n.buttonValue,t.setValue(m,{value:S}));const v=document.createElement("input");if(A.add(v),v.setAttribute("data-element-id",m),v.disabled=n.readOnly,this._setRequired(v,this.data.required),v.type="radio",v.name=n.fieldName,S&&v.setAttribute("checked",!0),v.tabIndex=G,v.addEventListener("change",q=>{const{name:it,checked:et}=q.target;for(const nt of this._getElementsByName(it,m))t.setValue(nt.id,{value:!1});t.setValue(m,{value:et})}),v.addEventListener("resetform",q=>{const it=n.defaultFieldValue;q.target.checked=it!=null&&it===n.buttonValue}),this.enableScripting&&this.hasJSActions){const q=n.buttonValue;v.addEventListener("updatefromsandbox",it=>{const et={value:nt=>{const ot=q===nt.detail.value;for(const ut of this._getElementsByName(nt.target.name)){const ht=ot&&ut.id===m;ut.domElement&&(ut.domElement.checked=ht),t.setValue(ut.id,{value:ht})}}};this._dispatchEventFromSandbox(et,it)}),this._setEventListeners(v,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],it=>it.target.checked)}return this._setBackgroundColor(v),this._setDefaultPropertiesFromJS(v),this.container.append(v),this.container}}class _ extends o{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(t.title=this.data.alternativeText);const n=t.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",m=>{this._dispatchEventFromSandbox({},m)})),t}}class e extends r{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,n=this.data.id,m=t.getValue(n,{value:this.data.fieldValue}),S=document.createElement("select");A.add(S),S.setAttribute("data-element-id",n),S.disabled=this.data.readOnly,this._setRequired(S,this.data.required),S.name=this.data.fieldName,S.tabIndex=G;let v=this.data.combo&&this.data.options.length>0;this.data.combo||(S.size=this.data.options.length,this.data.multiSelect&&(S.multiple=!0)),S.addEventListener("resetform",ot=>{const ut=this.data.defaultFieldValue;for(const ht of S.options)ht.selected=ht.value===ut});for(const ot of this.data.options){const ut=document.createElement("option");ut.textContent=ot.displayValue,ut.value=ot.exportValue,m.value.includes(ot.exportValue)&&(ut.setAttribute("selected",!0),v=!1),S.append(ut)}let q=null;if(v){const ot=document.createElement("option");ot.value=" ",ot.setAttribute("hidden",!0),ot.setAttribute("selected",!0),S.prepend(ot),q=()=>{ot.remove(),S.removeEventListener("input",q),q=null},S.addEventListener("input",q)}const it=ot=>{const ut=ot?"value":"textContent",{options:ht,multiple:dt}=S;return dt?Array.prototype.filter.call(ht,mt=>mt.selected).map(mt=>mt[ut]):ht.selectedIndex===-1?null:ht[ht.selectedIndex][ut]};let et=it(!1);const nt=ot=>{const ut=ot.target.options;return Array.prototype.map.call(ut,ht=>({displayValue:ht.textContent,exportValue:ht.value}))};return this.enableScripting&&this.hasJSActions?(S.addEventListener("updatefromsandbox",ot=>{const ut={value(ht){q==null||q();const dt=ht.detail.value,mt=new Set(Array.isArray(dt)?dt:[dt]);for(const Ct of S.options)Ct.selected=mt.has(Ct.value);t.setValue(n,{value:it(!0)}),et=it(!1)},multipleSelection(ht){S.multiple=!0},remove(ht){const dt=S.options,mt=ht.detail.remove;dt[mt].selected=!1,S.remove(mt),dt.length>0&&Array.prototype.findIndex.call(dt,wt=>wt.selected)===-1&&(dt[0].selected=!0),t.setValue(n,{value:it(!0),items:nt(ht)}),et=it(!1)},clear(ht){for(;S.length!==0;)S.remove(0);t.setValue(n,{value:null,items:[]}),et=it(!1)},insert(ht){const{index:dt,displayValue:mt,exportValue:Ct}=ht.detail.insert,wt=S.children[dt],Pt=document.createElement("option");Pt.textContent=mt,Pt.value=Ct,wt?wt.before(Pt):S.append(Pt),t.setValue(n,{value:it(!0),items:nt(ht)}),et=it(!1)},items(ht){const{items:dt}=ht.detail;for(;S.length!==0;)S.remove(0);for(const mt of dt){const{displayValue:Ct,exportValue:wt}=mt,Pt=document.createElement("option");Pt.textContent=Ct,Pt.value=wt,S.append(Pt)}S.options.length>0&&(S.options[0].selected=!0),t.setValue(n,{value:it(!0),items:nt(ht)}),et=it(!1)},indices(ht){const dt=new Set(ht.detail.indices);for(const mt of ht.target.options)mt.selected=dt.has(mt.index);t.setValue(n,{value:it(!0)}),et=it(!1)},editable(ht){ht.target.disabled=!ht.detail.editable}};this._dispatchEventFromSandbox(ut,ot)}),S.addEventListener("input",ot=>{var ht;const ut=it(!0);t.setValue(n,{value:ut}),ot.preventDefault(),(ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:et,changeEx:ut,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(S,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ot=>ot.target.value)):S.addEventListener("input",function(ot){t.setValue(n,{value:it(!0)})}),this.data.combo&&this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}const E=class extends d{constructor(t){var S,v,q;const{data:n}=t,m=!E.IGNORE_TYPES.has(n.parentType)&&!!(((S=n.titleObj)==null?void 0:S.str)||((v=n.contentsObj)==null?void 0:v.str)||((q=n.richText)==null?void 0:q.str));super(t,{isRenderable:m})}render(){this.container.classList.add("popupAnnotation");const t=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(t.length===0)return this.container;const n=new l({container:this.container,trigger:Array.from(t),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),m=this.page,S=b.Util.normalizeRect([this.data.parentRect[0],m.view[3]-this.data.parentRect[1]+m.view[1],this.data.parentRect[2],m.view[3]-this.data.parentRect[3]+m.view[1]]),v=S[0]+this.data.parentRect[2]-this.data.parentRect[0],q=S[1],{pageWidth:it,pageHeight:et,pageX:nt,pageY:ot}=this.viewport.rawDims;return this.container.style.left=`${100*(v-nt)/it}%`,this.container.style.top=`${100*(q-ot)/et}%`,this.container.append(n.render()),this.container}};let i=E;Bt(i,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class l{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){var it,et;const n=document.createElement("div");n.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?n:this.container,this.hideElement.hidden=!0;const m=document.createElement("div");m.classList.add("popup");const S=this.color;if(S){const nt=.7*(255-S[0])+S[0],ot=.7*(255-S[1])+S[1],ut=.7*(255-S[2])+S[2];m.style.backgroundColor=b.Util.makeHexColor(nt|0,ot|0,ut|0)}const v=document.createElement("h1");v.dir=this.titleObj.dir,v.textContent=this.titleObj.str,m.append(v);const q=w.PDFDateString.toDateObject(this.modificationDate);if(q){const nt=document.createElement("span");nt.classList.add("popupDate"),nt.textContent="{{date}}, {{time}}",nt.dataset.l10nId="annotation_date_string",nt.dataset.l10nArgs=JSON.stringify({date:q.toLocaleDateString(),time:q.toLocaleTimeString()}),m.append(nt)}if(((it=this.richText)==null?void 0:it.str)&&(!((et=this.contentsObj)!=null&&et.str)||this.contentsObj.str===this.richText.str))st.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:m}),m.lastChild.classList.add("richText","popupContent");else{const nt=this._formatContents(this.contentsObj);m.append(nt)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const nt of this.trigger)nt.addEventListener("click",this._toggle.bind(this)),nt.addEventListener("mouseover",this._show.bind(this,!1)),nt.addEventListener("mouseout",this._hide.bind(this,!1));return m.addEventListener("click",this._hide.bind(this,!0)),n.append(m),n}_formatContents({str:t,dir:n}){const m=document.createElement("p");m.classList.add("popupContent"),m.dir=n;const S=t.split(/(?:\r\n?|\n)/);for(let v=0,q=S.length;v<q;++v){const it=S[v];m.append(document.createTextNode(it)),v<q-1&&m.append(document.createElement("br"))}return m}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class s extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0}),this.textContent=t.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const n of this.textContent){const m=document.createElement("span");m.textContent=n,t.append(m)}this.container.append(t)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class g extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:m}=F(t.rect),S=this.svgFactory.create(n,m,!0),v=this.svgFactory.createElement("svg:line");return v.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),v.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),v.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),v.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),v.setAttribute("stroke-width",t.borderStyle.width||1),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),S.append(v),this.container.append(S),this._createPopup(v,t),this.container}}class x extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:m}=F(t.rect),S=this.svgFactory.create(n,m,!0),v=t.borderStyle.width,q=this.svgFactory.createElement("svg:rect");return q.setAttribute("x",v/2),q.setAttribute("y",v/2),q.setAttribute("width",n-v),q.setAttribute("height",m-v),q.setAttribute("stroke-width",v||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),S.append(q),this.container.append(S),this._createPopup(q,t),this.container}}class a extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:m}=F(t.rect),S=this.svgFactory.create(n,m,!0),v=t.borderStyle.width,q=this.svgFactory.createElement("svg:ellipse");return q.setAttribute("cx",n/2),q.setAttribute("cy",m/2),q.setAttribute("rx",n/2-v/2),q.setAttribute("ry",m/2-v/2),q.setAttribute("stroke-width",v||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),S.append(q),this.container.append(S),this._createPopup(q,t),this.container}}class D extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:n,height:m}=F(t.rect),S=this.svgFactory.create(n,m,!0);let v=[];for(const it of t.vertices){const et=it.x-t.rect[0],nt=t.rect[3]-it.y;v.push(et+","+nt)}v=v.join(" ");const q=this.svgFactory.createElement(this.svgElementName);return q.setAttribute("points",v),q.setAttribute("stroke-width",t.borderStyle.width||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),S.append(q),this.container.append(S),this._createPopup(q,t),this.container}}class W extends D{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class tt extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class rt extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:n,height:m}=F(t.rect),S=this.svgFactory.create(n,m,!0);for(const v of t.inkLists){let q=[];for(const et of v){const nt=et.x-t.rect[0],ot=t.rect[3]-et.y;q.push(`${nt},${ot}`)}q=q.join(" ");const it=this.svgFactory.createElement(this.svgElementName);it.setAttribute("points",q),it.setAttribute("stroke-width",t.borderStyle.width||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),this._createPopup(it,t),S.append(it)}return this.container.append(S),this.container}}class lt extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class B extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class U extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class J extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class pt extends d{constructor(t){var m,S,v;const n=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((S=t.data.contentsObj)==null?void 0:S.str)||((v=t.data.richText)==null?void 0:v.str));super(t,{isRenderable:n,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class vt extends d{constructor(t){var S;super(t,{isRenderable:!0});const{filename:n,content:m}=this.data.file;this.filename=(0,w.getFilenameFromUrl)(n,!0),this.content=m,(S=this.linkService.eventBus)==null||S.dispatch("fileattachmentannotation",{source:this,filename:n,content:m})}render(){var n,m;this.container.classList.add("fileAttachmentAnnotation");let t;return this.data.hasAppearance?t=document.createElement("div"):(t=document.createElement("img"),t.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),t.classList.add("popupTriggerArea"),t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((n=this.data.titleObj)==null?void 0:n.str)||((m=this.data.contentsObj)==null?void 0:m.str)||this.data.richText)&&this._createPopup(t,this.data),this.container.append(t),this.container}_download(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.container,this.content,this.filename)}}const k=class{static render(t){var et,nt;const{annotations:n,div:m,viewport:S,accessibilityManager:v}=t;(0,w.setLayerDimensions)(m,S);const q={data:null,layer:m,page:t.page,viewport:S,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new w.DOMSVGFactory,annotationStorage:t.annotationStorage||new X.AnnotationStorage,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects};let it=0;for(const ot of n){if(ot.noHTML)continue;if(ot.annotationType!==b.AnnotationType.POPUP){const{width:dt,height:mt}=F(ot.rect);if(dt<=0||mt<=0)continue}q.data=ot;const ut=I.create(q);if(!ut.isRenderable)continue;const ht=ut.render();if(ot.hidden&&(ht.style.visibility="hidden"),Array.isArray(ht))for(const dt of ht)dt.style.zIndex=it++,at(et=k,N,Be).call(et,dt,ot.id,m,v);else ht.style.zIndex=it++,ut instanceof i?m.prepend(ht):at(nt=k,N,Be).call(nt,ht,ot.id,m,v)}at(this,H,Ue).call(this,m,t.annotationCanvasMap)}static update(t){const{annotationCanvasMap:n,div:m,viewport:S}=t;(0,w.setLayerDimensions)(m,{rotation:S.rotation}),at(this,H,Ue).call(this,m,n),m.hidden=!1}};let At=k;N=new WeakSet,Be=function(t,n,m,S){const v=t.firstChild||t;v.id=`${w.AnnotationPrefix}${n}`,m.append(t),S==null||S.moveElementInDOM(m,t,v,!1)},H=new WeakSet,Ue=function(t,n){if(!!n){for(const[m,S]of n){const v=t.querySelector(`[data-annotation-id="${m}"]`);if(!v)continue;const{firstChild:q}=v;q?q.nodeName==="CANVAS"?q.replaceWith(S):q.before(S):v.append(S)}n.clear()}},Z(At,N),Z(At,H),c.AnnotationLayer=At},(V,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorConverters=void 0;function K(w){return Math.floor(Math.max(0,Math.min(1,w))*255).toString(16).padStart(2,"0")}class b{static CMYK_G([X,j,st,G]){return["G",1-Math.min(1,.3*X+.59*st+.11*j+G)]}static G_CMYK([X]){return["CMYK",0,0,0,1-X]}static G_RGB([X]){return["RGB",X,X,X]}static G_HTML([X]){const j=K(X);return`#${j}${j}${j}`}static RGB_G([X,j,st]){return["G",.3*X+.59*j+.11*st]}static RGB_HTML([X,j,st]){const G=K(X),P=K(j),A=K(st);return`#${G}${P}${A}`}static T_HTML(){return"#00000000"}static CMYK_RGB([X,j,st,G]){return["RGB",1-Math.min(1,X+G),1-Math.min(1,st+G),1-Math.min(1,j+G)]}static CMYK_HTML(X){const j=this.CMYK_RGB(X).slice(1);return this.RGB_HTML(j)}static RGB_CMYK([X,j,st]){const G=1-X,P=1-j,A=1-st,F=Math.min(G,P,A);return["CMYK",G,P,A,F]}}c.ColorConverters=b},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.XfaLayer=void 0;var b=K(19);class w{static setupStorage(j,st,G,P,A){const F=P.getValue(st,{value:null});switch(G.name){case"textarea":if(F.value!==null&&(j.textContent=F.value),A==="print")break;j.addEventListener("input",I=>{P.setValue(st,{value:I.target.value})});break;case"input":if(G.attributes.type==="radio"||G.attributes.type==="checkbox"){if(F.value===G.attributes.xfaOn?j.setAttribute("checked",!0):F.value===G.attributes.xfaOff&&j.removeAttribute("checked"),A==="print")break;j.addEventListener("change",I=>{P.setValue(st,{value:I.target.checked?I.target.getAttribute("xfaOn"):I.target.getAttribute("xfaOff")})})}else{if(F.value!==null&&j.setAttribute("value",F.value),A==="print")break;j.addEventListener("input",I=>{P.setValue(st,{value:I.target.value})})}break;case"select":if(F.value!==null)for(const I of G.children)I.attributes.value===F.value&&(I.attributes.selected=!0);j.addEventListener("input",I=>{const d=I.target.options,o=d.selectedIndex===-1?"":d[d.selectedIndex].value;P.setValue(st,{value:o})});break}}static setAttributes({html:j,element:st,storage:G=null,intent:P,linkService:A}){const{attributes:F}=st,I=j instanceof HTMLAnchorElement;F.type==="radio"&&(F.name=`${F.name}-${P}`);for(const[d,o]of Object.entries(F))if(o!=null)switch(d){case"class":o.length&&j.setAttribute(d,o.join(" "));break;case"dataId":break;case"id":j.setAttribute("data-element-id",o);break;case"style":Object.assign(j.style,o);break;case"textContent":j.textContent=o;break;default:(!I||d!=="href"&&d!=="newWindow")&&j.setAttribute(d,o)}I&&A.addLinkAttributes(j,F.href,F.newWindow),G&&F.dataId&&this.setupStorage(j,F.dataId,st,G)}static render(j){var p;const st=j.annotationStorage,G=j.linkService,P=j.xfaHtml,A=j.intent||"display",F=document.createElement(P.name);P.attributes&&this.setAttributes({html:F,element:P,intent:A,linkService:G});const I=[[P,-1,F]],d=j.div;if(d.append(F),j.viewport){const r=`matrix(${j.viewport.transform.join(",")})`;d.style.transform=r}A!=="richText"&&d.setAttribute("class","xfaLayer xfaFont");const o=[];for(;I.length>0;){const[r,y,C]=I.at(-1);if(y+1===r.children.length){I.pop();continue}const T=r.children[++I.at(-1)[1]];if(T===null)continue;const{name:_}=T;if(_==="#text"){const i=document.createTextNode(T.value);o.push(i),C.append(i);continue}let e;if((p=T==null?void 0:T.attributes)!=null&&p.xmlns?e=document.createElementNS(T.attributes.xmlns,_):e=document.createElement(_),C.append(e),T.attributes&&this.setAttributes({html:e,element:T,storage:st,intent:A,linkService:G}),T.children&&T.children.length>0)I.push([T,-1,e]);else if(T.value){const i=document.createTextNode(T.value);b.XfaText.shouldBuildText(_)&&o.push(i),e.append(i)}}for(const r of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))r.setAttribute("readOnly",!0);return{textDivs:o}}static update(j){const st=`matrix(${j.viewport.transform.join(",")})`;j.div.style.transform=st,j.div.hidden=!1}}c.XfaLayer=w},(V,c,K)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SVGGraphics=void 0;var b=K(6),w=K(1),X=K(10);let j=class{constructor(){(0,w.unreachable)("Not implemented: SVGGraphics")}};c.SVGGraphics=j;{let p=function(e){let i=[];const l=[];for(const s of e){if(s.fn==="save"){i.push({fnId:92,fn:"group",items:[]}),l.push(i),i=i.at(-1).items;continue}s.fn==="restore"?i=l.pop():i.push(s)}return i},r=function(e){if(Number.isInteger(e))return e.toString();const i=e.toFixed(10);let l=i.length-1;if(i[l]!=="0")return i;do l--;while(i[l]==="0");return i.substring(0,i[l]==="."?l:l+1)},y=function(e){if(e[4]===0&&e[5]===0){if(e[1]===0&&e[2]===0)return e[0]===1&&e[3]===1?"":`scale(${r(e[0])} ${r(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){const i=Math.acos(e[0])*180/Math.PI;return`rotate(${r(i)})`}}else if(e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1)return`translate(${r(e[4])} ${r(e[5])})`;return`matrix(${r(e[0])} ${r(e[1])} ${r(e[2])} ${r(e[3])} ${r(e[4])} ${r(e[5])})`};const st={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},G="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/1999/xlink",A=["butt","round","square"],F=["miter","round","bevel"],I=function(e,i="",l=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!l)return URL.createObjectURL(new Blob([e],{type:i}));const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let g=`data:${i};base64,`;for(let x=0,a=e.length;x<a;x+=3){const D=e[x]&255,W=e[x+1]&255,tt=e[x+2]&255,rt=D>>2,lt=(D&3)<<4|W>>4,B=x+1<a?(W&15)<<2|tt>>6:64,U=x+2<a?tt&63:64;g+=s[rt]+s[lt]+s[B]+s[U]}return g},d=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),i=12,l=new Int32Array(256);for(let tt=0;tt<256;tt++){let rt=tt;for(let lt=0;lt<8;lt++)rt&1?rt=3988292384^rt>>1&2147483647:rt=rt>>1&2147483647;l[tt]=rt}function s(tt,rt,lt){let B=-1;for(let U=rt;U<lt;U++){const J=(B^tt[U])&255,pt=l[J];B=B>>>8^pt}return B^-1}function g(tt,rt,lt,B){let U=B;const J=rt.length;lt[U]=J>>24&255,lt[U+1]=J>>16&255,lt[U+2]=J>>8&255,lt[U+3]=J&255,U+=4,lt[U]=tt.charCodeAt(0)&255,lt[U+1]=tt.charCodeAt(1)&255,lt[U+2]=tt.charCodeAt(2)&255,lt[U+3]=tt.charCodeAt(3)&255,U+=4,lt.set(rt,U),U+=rt.length;const pt=s(lt,B+4,U);lt[U]=pt>>24&255,lt[U+1]=pt>>16&255,lt[U+2]=pt>>8&255,lt[U+3]=pt&255}function x(tt,rt,lt){let B=1,U=0;for(let J=rt;J<lt;++J)B=(B+(tt[J]&255))%65521,U=(U+B)%65521;return U<<16|B}function a(tt){if(!X.isNodeJS)return D(tt);try{let rt;parseInt(process.versions.node)>=8?rt=tt:rt=Buffer.from(tt);const lt=require$$5.deflateSync(rt,{level:9});return lt instanceof Uint8Array?lt:new Uint8Array(lt)}catch(rt){(0,w.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+rt)}return D(tt)}function D(tt){let rt=tt.length;const lt=65535,B=Math.ceil(rt/lt),U=new Uint8Array(2+rt+B*5+4);let J=0;U[J++]=120,U[J++]=156;let pt=0;for(;rt>lt;)U[J++]=0,U[J++]=255,U[J++]=255,U[J++]=0,U[J++]=0,U.set(tt.subarray(pt,pt+lt),J),J+=lt,pt+=lt,rt-=lt;U[J++]=1,U[J++]=rt&255,U[J++]=rt>>8&255,U[J++]=~rt&65535&255,U[J++]=(~rt&65535)>>8&255,U.set(tt.subarray(pt),J),J+=tt.length-pt;const vt=x(tt,0,tt.length);return U[J++]=vt>>24&255,U[J++]=vt>>16&255,U[J++]=vt>>8&255,U[J++]=vt&255,U}function W(tt,rt,lt,B){const U=tt.width,J=tt.height;let pt,vt,At;const bt=tt.data;switch(rt){case w.ImageKind.GRAYSCALE_1BPP:vt=0,pt=1,At=U+7>>3;break;case w.ImageKind.RGB_24BPP:vt=2,pt=8,At=U*3;break;case w.ImageKind.RGBA_32BPP:vt=6,pt=8,At=U*4;break;default:throw new Error("invalid format")}const L=new Uint8Array((1+At)*J);let h=0,u=0;for(let k=0;k<J;++k)L[h++]=0,L.set(bt.subarray(u,u+At),h),u+=At,h+=At;if(rt===w.ImageKind.GRAYSCALE_1BPP&&B){h=0;for(let k=0;k<J;k++){h++;for(let R=0;R<At;R++)L[h++]^=255}}const E=new Uint8Array([U>>24&255,U>>16&255,U>>8&255,U&255,J>>24&255,J>>16&255,J>>8&255,J&255,pt,vt,0,0,0]),N=a(L),O=e.length+i*3+E.length+N.length,H=new Uint8Array(O);let M=0;return H.set(e,M),M+=e.length,g("IHDR",E,H,M),M+=i+E.length,g("IDATA",N,H,M),M+=i+N.length,g("IEND",new Uint8Array(0),H,M),I(H,"image/png",lt)}return function(rt,lt,B){const U=rt.kind===void 0?w.ImageKind.GRAYSCALE_1BPP:rt.kind;return W(rt,U,lt,B)}}();class o{constructor(){this.fontSizeScale=1,this.fontWeight=st.fontWeight,this.fontSize=0,this.textMatrix=w.IDENTITY_MATRIX,this.fontMatrix=w.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=w.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=st.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,l){this.x=i,this.y=l}}let C=0,T=0,_=0;c.SVGGraphics=j=class{constructor(e,i,l=!1){(0,b.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new b.DOMSVGFactory,this.current=new o,this.transformMatrix=w.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!l,this._operatorIdMapping=[];for(const s in w.OPS)this._operatorIdMapping[w.OPS[s]]=s}getObject(e,i=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):i}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const i=e.fnArray,l=e.argsArray;for(let s=0,g=i.length;s<g;s++)if(i[s]===w.OPS.dependency)for(const x of l[s]){const a=x.startsWith("g_")?this.commonObjs:this.objs,D=new Promise(W=>{a.get(x,W)});this.current.dependencies.push(D)}return Promise.all(this.current.dependencies)}transform(e,i,l,s,g,x){const a=[e,i,l,s,g,x];this.transformMatrix=w.Util.transform(this.transformMatrix,a),this.tgrp=null}getSVG(e,i){this.viewport=i;const l=this._initialize(i);return this.loadDependencies(e).then(()=>(this.transformMatrix=w.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),l))}convertOpList(e){const i=this._operatorIdMapping,l=e.argsArray,s=e.fnArray,g=[];for(let x=0,a=s.length;x<a;x++){const D=s[x];g.push({fnId:D,fn:i[D],args:l[x]})}return p(g)}executeOpTree(e){for(const i of e){const l=i.fn,s=i.fnId,g=i.args;switch(s|0){case w.OPS.beginText:this.beginText();break;case w.OPS.dependency:break;case w.OPS.setLeading:this.setLeading(g);break;case w.OPS.setLeadingMoveText:this.setLeadingMoveText(g[0],g[1]);break;case w.OPS.setFont:this.setFont(g);break;case w.OPS.showText:this.showText(g[0]);break;case w.OPS.showSpacedText:this.showText(g[0]);break;case w.OPS.endText:this.endText();break;case w.OPS.moveText:this.moveText(g[0],g[1]);break;case w.OPS.setCharSpacing:this.setCharSpacing(g[0]);break;case w.OPS.setWordSpacing:this.setWordSpacing(g[0]);break;case w.OPS.setHScale:this.setHScale(g[0]);break;case w.OPS.setTextMatrix:this.setTextMatrix(g[0],g[1],g[2],g[3],g[4],g[5]);break;case w.OPS.setTextRise:this.setTextRise(g[0]);break;case w.OPS.setTextRenderingMode:this.setTextRenderingMode(g[0]);break;case w.OPS.setLineWidth:this.setLineWidth(g[0]);break;case w.OPS.setLineJoin:this.setLineJoin(g[0]);break;case w.OPS.setLineCap:this.setLineCap(g[0]);break;case w.OPS.setMiterLimit:this.setMiterLimit(g[0]);break;case w.OPS.setFillRGBColor:this.setFillRGBColor(g[0],g[1],g[2]);break;case w.OPS.setStrokeRGBColor:this.setStrokeRGBColor(g[0],g[1],g[2]);break;case w.OPS.setStrokeColorN:this.setStrokeColorN(g);break;case w.OPS.setFillColorN:this.setFillColorN(g);break;case w.OPS.shadingFill:this.shadingFill(g[0]);break;case w.OPS.setDash:this.setDash(g[0],g[1]);break;case w.OPS.setRenderingIntent:this.setRenderingIntent(g[0]);break;case w.OPS.setFlatness:this.setFlatness(g[0]);break;case w.OPS.setGState:this.setGState(g[0]);break;case w.OPS.fill:this.fill();break;case w.OPS.eoFill:this.eoFill();break;case w.OPS.stroke:this.stroke();break;case w.OPS.fillStroke:this.fillStroke();break;case w.OPS.eoFillStroke:this.eoFillStroke();break;case w.OPS.clip:this.clip("nonzero");break;case w.OPS.eoClip:this.clip("evenodd");break;case w.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case w.OPS.paintImageXObject:this.paintImageXObject(g[0]);break;case w.OPS.paintInlineImageXObject:this.paintInlineImageXObject(g[0]);break;case w.OPS.paintImageMaskXObject:this.paintImageMaskXObject(g[0]);break;case w.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(g[0],g[1]);break;case w.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case w.OPS.closePath:this.closePath();break;case w.OPS.closeStroke:this.closeStroke();break;case w.OPS.closeFillStroke:this.closeFillStroke();break;case w.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case w.OPS.nextLine:this.nextLine();break;case w.OPS.transform:this.transform(g[0],g[1],g[2],g[3],g[4],g[5]);break;case w.OPS.constructPath:this.constructPath(g[0],g[1]);break;case w.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,w.warn)(`Unimplemented operator ${l}`);break}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,i,l,s,g,x){const a=this.current;a.textMatrix=a.lineMatrix=[e,i,l,s,g,x],a.textMatrixScale=Math.hypot(e,i),a.x=a.lineX=0,a.y=a.lineY=0,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${r(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",r(-a.y)),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtElement.append(a.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=w.IDENTITY_MATRIX,e.lineMatrix=w.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,i){const l=this.current;l.x=l.lineX+=e,l.y=l.lineY+=i,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${r(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",r(-l.y))}showText(e){const i=this.current,l=i.font,s=i.fontSize;if(s===0)return;const g=i.fontSizeScale,x=i.charSpacing,a=i.wordSpacing,D=i.fontDirection,W=i.textHScale*D,tt=l.vertical,rt=tt?1:-1,lt=l.defaultVMetrics,B=s*i.fontMatrix[0];let U=0;for(const vt of e){if(vt===null){U+=D*a;continue}else if(typeof vt=="number"){U+=rt*vt*s/1e3;continue}const At=(vt.isSpace?a:0)+x,bt=vt.fontChar;let L,h,u=vt.width;if(tt){let N;const O=vt.vmetric||lt;N=vt.vmetric?O[1]:u*.5,N=-N*B;const H=O[2]*B;u=O?-O[0]:u,L=N/g,h=(U+H)/g}else L=U/g,h=0;(vt.isInFont||l.missingFile)&&(i.xcoords.push(i.x+L),tt&&i.ycoords.push(-i.y+h),i.tspan.textContent+=bt);let E;tt?E=u*B-At*D:E=u*B+At*D,U+=E}i.tspan.setAttributeNS(null,"x",i.xcoords.map(r).join(" ")),tt?i.tspan.setAttributeNS(null,"y",i.ycoords.map(r).join(" ")):i.tspan.setAttributeNS(null,"y",r(-i.y)),tt?i.y-=U:i.x+=U*W,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${r(i.fontSize)}px`),i.fontStyle!==st.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==st.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const J=i.textRenderingMode&w.TextRenderingMode.FILL_STROKE_MASK;if(J===w.TextRenderingMode.FILL||J===w.TextRenderingMode.FILL_STROKE?(i.fillColor!==st.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.textRenderingMode===w.TextRenderingMode.ADD_TO_PATH?i.tspan.setAttributeNS(null,"fill","transparent"):i.tspan.setAttributeNS(null,"fill","none"),J===w.TextRenderingMode.STROKE||J===w.TextRenderingMode.FILL_STROKE){const vt=1/(i.textMatrixScale||1);this._setStrokeAttributes(i.tspan,vt)}let pt=i.textMatrix;i.textRise!==0&&(pt=pt.slice(),pt[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${y(pt)} scale(${r(W)}, -1)`),i.txtElement.setAttributeNS(G,"xml:space","preserve"),i.txtElement.append(i.tspan),i.txtgrp.append(i.txtElement),this._ensureTransformGroup().append(i.txtElement)}setLeadingMoveText(e,i){this.setLeading(-i),this.moveText(e,i)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const i=I(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${i}); }
`}setFont(e){const i=this.current,l=this.commonObjs.get(e[0]);let s=e[1];i.font=l,this.embedFonts&&!l.missingFile&&!this.embeddedFonts[l.loadedName]&&(this.addFontStyle(l),this.embeddedFonts[l.loadedName]=l),i.fontMatrix=l.fontMatrix||w.FONT_IDENTITY_MATRIX;let g="normal";l.black?g="900":l.bold&&(g="bold");const x=l.italic?"italic":"normal";s<0?(s=-s,i.fontDirection=-1):i.fontDirection=1,i.fontSize=s,i.fontFamily=l.loadedName,i.fontWeight=g,i.fontStyle=x,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",r(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){var i;const e=this.current;e.textRenderingMode&w.TextRenderingMode.ADD_TO_PATH_FLAG&&((i=e.txtElement)==null?void 0:i.hasChildNodes())&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=A[e]}setLineJoin(e){this.current.lineJoin=F[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,i,l){this.current.strokeColor=w.Util.makeHexColor(e,i,l)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,i,l){this.current.fillColor=w.Util.makeHexColor(e,i,l),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const i=this.viewport.width,l=this.viewport.height,s=w.Util.inverseTransform(this.transformMatrix),g=w.Util.applyTransform([0,0],s),x=w.Util.applyTransform([0,l],s),a=w.Util.applyTransform([i,0],s),D=w.Util.applyTransform([i,l],s),W=Math.min(g[0],x[0],a[0],D[0]),tt=Math.min(g[1],x[1],a[1],D[1]),rt=Math.max(g[0],x[0],a[0],D[0]),lt=Math.max(g[1],x[1],a[1],D[1]),B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x",W),B.setAttributeNS(null,"y",tt),B.setAttributeNS(null,"width",rt-W),B.setAttributeNS(null,"height",lt-tt),B.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&B.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(B)}_makeColorN_Pattern(e){return e[0]==="TilingPattern"?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const i=e[1],l=e[2],s=e[3]||w.IDENTITY_MATRIX,[g,x,a,D]=e[4],W=e[5],tt=e[6],rt=e[7],lt=`shading${_++}`,[B,U,J,pt]=w.Util.normalizeRect([...w.Util.applyTransform([g,x],s),...w.Util.applyTransform([a,D],s)]),[vt,At]=w.Util.singularValueDecompose2dScale(s),bt=W*vt,L=tt*At,h=this.svgFactory.createElement("svg:pattern");h.setAttributeNS(null,"id",lt),h.setAttributeNS(null,"patternUnits","userSpaceOnUse"),h.setAttributeNS(null,"width",bt),h.setAttributeNS(null,"height",L),h.setAttributeNS(null,"x",`${B}`),h.setAttributeNS(null,"y",`${U}`);const u=this.svg,E=this.transformMatrix,N=this.current.fillColor,O=this.current.strokeColor,H=this.svgFactory.create(J-B,pt-U);if(this.svg=H,this.transformMatrix=s,rt===2){const M=w.Util.makeHexColor(...i);this.current.fillColor=M,this.current.strokeColor=M}return this.executeOpTree(this.convertOpList(l)),this.svg=u,this.transformMatrix=E,this.current.fillColor=N,this.current.strokeColor=O,h.append(H.childNodes[0]),this.defs.append(h),`url(#${lt})`}_makeShadingPattern(e){switch(typeof e=="string"&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const i=`shading${_++}`,l=e[3];let s;switch(e[1]){case"axial":const g=e[4],x=e[5];s=this.svgFactory.createElement("svg:linearGradient"),s.setAttributeNS(null,"id",i),s.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),s.setAttributeNS(null,"x1",g[0]),s.setAttributeNS(null,"y1",g[1]),s.setAttributeNS(null,"x2",x[0]),s.setAttributeNS(null,"y2",x[1]);break;case"radial":const a=e[4],D=e[5],W=e[6],tt=e[7];s=this.svgFactory.createElement("svg:radialGradient"),s.setAttributeNS(null,"id",i),s.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),s.setAttributeNS(null,"cx",D[0]),s.setAttributeNS(null,"cy",D[1]),s.setAttributeNS(null,"r",tt),s.setAttributeNS(null,"fx",a[0]),s.setAttributeNS(null,"fy",a[1]),s.setAttributeNS(null,"fr",W);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const g of l){const x=this.svgFactory.createElement("svg:stop");x.setAttributeNS(null,"offset",g[0]),x.setAttributeNS(null,"stop-color",g[1]),s.append(x)}return this.defs.append(s),`url(#${i})`;case"Mesh":return(0,w.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,i){this.current.dashArray=e,this.current.dashPhase=i}constructPath(e,i){const l=this.current;let s=l.x,g=l.y,x=[],a=0;for(const D of e)switch(D|0){case w.OPS.rectangle:s=i[a++],g=i[a++];const W=i[a++],tt=i[a++],rt=s+W,lt=g+tt;x.push("M",r(s),r(g),"L",r(rt),r(g),"L",r(rt),r(lt),"L",r(s),r(lt),"Z");break;case w.OPS.moveTo:s=i[a++],g=i[a++],x.push("M",r(s),r(g));break;case w.OPS.lineTo:s=i[a++],g=i[a++],x.push("L",r(s),r(g));break;case w.OPS.curveTo:s=i[a+4],g=i[a+5],x.push("C",r(i[a]),r(i[a+1]),r(i[a+2]),r(i[a+3]),r(s),r(g)),a+=6;break;case w.OPS.curveTo2:x.push("C",r(s),r(g),r(i[a]),r(i[a+1]),r(i[a+2]),r(i[a+3])),s=i[a+2],g=i[a+3],a+=4;break;case w.OPS.curveTo3:s=i[a+2],g=i[a+3],x.push("C",r(i[a]),r(i[a+1]),r(s),r(g),r(s),r(g)),a+=4;break;case w.OPS.closePath:x.push("Z");break}x=x.join(" "),l.path&&e.length>0&&e[0]!==w.OPS.rectangle&&e[0]!==w.OPS.moveTo?x=l.path.getAttributeNS(null,"d")+x:(l.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(l.path)),l.path.setAttributeNS(null,"d",x),l.path.setAttributeNS(null,"fill","none"),l.element=l.path,l.setCurrentPoint(s,g)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element){this.pendingClip=null;return}const i=`clippath${C++}`,l=this.svgFactory.createElement("svg:clipPath");l.setAttributeNS(null,"id",i),l.setAttributeNS(null,"transform",y(this.transformMatrix));const s=e.element.cloneNode(!0);if(this.pendingClip==="evenodd"?s.setAttributeNS(null,"clip-rule","evenodd"):s.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,l.append(s),this.defs.append(l),e.activeClipUrl){e.clipGroup=null;for(const g of this.extraStack)g.clipGroup=null;l.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const i=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",i)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[i,l]of e)switch(i){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l);break;case"CA":this.setStrokeAlpha(l);break;case"ca":this.setFillAlpha(l);break;default:(0,w.warn)(`Unimplemented graphic state operator ${i}`);break}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,i=1){const l=this.current;let s=l.dashArray;i!==1&&s.length>0&&(s=s.map(function(g){return i*g})),e.setAttributeNS(null,"stroke",l.strokeColor),e.setAttributeNS(null,"stroke-opacity",l.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",r(l.miterLimit)),e.setAttributeNS(null,"stroke-linecap",l.lineCap),e.setAttributeNS(null,"stroke-linejoin",l.lineJoin),e.setAttributeNS(null,"stroke-width",r(i*l.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",s.map(r).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",r(i*l.dashPhase)+"px")}eoFill(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const i=this.getObject(e);if(!i){(0,w.warn)(`Dependent image with object ID ${e} is not ready yet`);return}this.paintInlineImageXObject(i)}paintInlineImageXObject(e,i){const l=e.width,s=e.height,g=d(e,this.forceDataSchema,!!i),x=this.svgFactory.createElement("svg:rect");x.setAttributeNS(null,"x","0"),x.setAttributeNS(null,"y","0"),x.setAttributeNS(null,"width",r(l)),x.setAttributeNS(null,"height",r(s)),this.current.element=x,this.clip("nonzero");const a=this.svgFactory.createElement("svg:image");a.setAttributeNS(P,"xlink:href",g),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y",r(-s)),a.setAttributeNS(null,"width",r(l)+"px"),a.setAttributeNS(null,"height",r(s)+"px"),a.setAttributeNS(null,"transform",`scale(${r(1/l)} ${r(-1/s)})`),i?i.append(a):this._ensureTransformGroup().append(a)}paintImageMaskXObject(e){const i=this.getObject(e.data,e);if(i.bitmap){(0,w.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const l=this.current,s=i.width,g=i.height,x=l.fillColor;l.maskId=`mask${T++}`;const a=this.svgFactory.createElement("svg:mask");a.setAttributeNS(null,"id",l.maskId);const D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",r(s)),D.setAttributeNS(null,"height",r(g)),D.setAttributeNS(null,"fill",x),D.setAttributeNS(null,"mask",`url(#${l.maskId})`),this.defs.append(a),this._ensureTransformGroup().append(D),this.paintInlineImageXObject(i,a)}paintFormXObjectBegin(e,i){if(Array.isArray(e)&&e.length===6&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),i){const l=i[2]-i[0],s=i[3]-i[1],g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",i[0]),g.setAttributeNS(null,"y",i[1]),g.setAttributeNS(null,"width",r(l)),g.setAttributeNS(null,"height",r(s)),this.current.element=g,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const i=this.svgFactory.create(e.width,e.height),l=this.svgFactory.createElement("svg:defs");i.append(l),this.defs=l;const s=this.svgFactory.createElement("svg:g");return s.setAttributeNS(null,"transform",y(e.transform)),i.append(s),this.svg=s,i}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(V){var c=__webpack_module_cache__[V];if(c!==void 0)return c.exports;var K=__webpack_module_cache__[V]={exports:{}};return __webpack_modules__[V](K,K.exports,__w_pdfjs_require__),K.exports}var __webpack_exports__={};return(()=>{var V=__webpack_exports__;Object.defineProperty(V,"__esModule",{value:!0}),Object.defineProperty(V,"AbortException",{enumerable:!0,get:function(){return c.AbortException}}),Object.defineProperty(V,"AnnotationEditorLayer",{enumerable:!0,get:function(){return X.AnnotationEditorLayer}}),Object.defineProperty(V,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return c.AnnotationEditorParamsType}}),Object.defineProperty(V,"AnnotationEditorType",{enumerable:!0,get:function(){return c.AnnotationEditorType}}),Object.defineProperty(V,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return j.AnnotationEditorUIManager}}),Object.defineProperty(V,"AnnotationLayer",{enumerable:!0,get:function(){return st.AnnotationLayer}}),Object.defineProperty(V,"AnnotationMode",{enumerable:!0,get:function(){return c.AnnotationMode}}),Object.defineProperty(V,"CMapCompressionType",{enumerable:!0,get:function(){return c.CMapCompressionType}}),Object.defineProperty(V,"FeatureTest",{enumerable:!0,get:function(){return c.FeatureTest}}),Object.defineProperty(V,"GlobalWorkerOptions",{enumerable:!0,get:function(){return G.GlobalWorkerOptions}}),Object.defineProperty(V,"InvalidPDFException",{enumerable:!0,get:function(){return c.InvalidPDFException}}),Object.defineProperty(V,"MissingPDFException",{enumerable:!0,get:function(){return c.MissingPDFException}}),Object.defineProperty(V,"OPS",{enumerable:!0,get:function(){return c.OPS}}),Object.defineProperty(V,"PDFDataRangeTransport",{enumerable:!0,get:function(){return K.PDFDataRangeTransport}}),Object.defineProperty(V,"PDFDateString",{enumerable:!0,get:function(){return b.PDFDateString}}),Object.defineProperty(V,"PDFWorker",{enumerable:!0,get:function(){return K.PDFWorker}}),Object.defineProperty(V,"PasswordResponses",{enumerable:!0,get:function(){return c.PasswordResponses}}),Object.defineProperty(V,"PermissionFlag",{enumerable:!0,get:function(){return c.PermissionFlag}}),Object.defineProperty(V,"PixelsPerInch",{enumerable:!0,get:function(){return b.PixelsPerInch}}),Object.defineProperty(V,"PromiseCapability",{enumerable:!0,get:function(){return c.PromiseCapability}}),Object.defineProperty(V,"RenderingCancelledException",{enumerable:!0,get:function(){return b.RenderingCancelledException}}),Object.defineProperty(V,"SVGGraphics",{enumerable:!0,get:function(){return P.SVGGraphics}}),Object.defineProperty(V,"UnexpectedResponseException",{enumerable:!0,get:function(){return c.UnexpectedResponseException}}),Object.defineProperty(V,"Util",{enumerable:!0,get:function(){return c.Util}}),Object.defineProperty(V,"VerbosityLevel",{enumerable:!0,get:function(){return c.VerbosityLevel}}),Object.defineProperty(V,"XfaLayer",{enumerable:!0,get:function(){return A.XfaLayer}}),Object.defineProperty(V,"build",{enumerable:!0,get:function(){return K.build}}),Object.defineProperty(V,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return c.createValidAbsoluteUrl}}),Object.defineProperty(V,"getDocument",{enumerable:!0,get:function(){return K.getDocument}}),Object.defineProperty(V,"getFilenameFromUrl",{enumerable:!0,get:function(){return b.getFilenameFromUrl}}),Object.defineProperty(V,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return b.getPdfFilenameFromUrl}}),Object.defineProperty(V,"getXfaPageViewport",{enumerable:!0,get:function(){return b.getXfaPageViewport}}),Object.defineProperty(V,"isDataScheme",{enumerable:!0,get:function(){return b.isDataScheme}}),Object.defineProperty(V,"isPdfFile",{enumerable:!0,get:function(){return b.isPdfFile}}),Object.defineProperty(V,"loadScript",{enumerable:!0,get:function(){return b.loadScript}}),Object.defineProperty(V,"normalizeUnicode",{enumerable:!0,get:function(){return c.normalizeUnicode}}),Object.defineProperty(V,"renderTextLayer",{enumerable:!0,get:function(){return w.renderTextLayer}}),Object.defineProperty(V,"setLayerDimensions",{enumerable:!0,get:function(){return b.setLayerDimensions}}),Object.defineProperty(V,"shadow",{enumerable:!0,get:function(){return c.shadow}}),Object.defineProperty(V,"updateTextLayer",{enumerable:!0,get:function(){return w.updateTextLayer}}),Object.defineProperty(V,"version",{enumerable:!0,get:function(){return K.version}});var c=__w_pdfjs_require__(1),K=__w_pdfjs_require__(2),b=__w_pdfjs_require__(6),w=__w_pdfjs_require__(26),X=__w_pdfjs_require__(27),j=__w_pdfjs_require__(5),st=__w_pdfjs_require__(30),G=__w_pdfjs_require__(14),P=__w_pdfjs_require__(33),A=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);function create_fragment(V){let c,K,b,w,X,j,st,G,P,A,F;return{c(){c=element("div"),c.innerHTML='<div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-body text-center"><div class="spinner-border text-dark" role="status"></div></div></div></div>',K=space(),b=element("div"),w=element("button"),w.textContent="Go back",X=space(),j=element("button"),j.textContent="Download PDF",st=space(),G=element("div"),P=element("div"),attr(c,"class","modal"),attr(c,"tabindex","-1"),attr(c,"role","dialog"),attr(c,"id","loadingModal"),set_style(c,"display","none"),set_style(c,"position","fixed"),set_style(c,"z-index","1000"),set_style(c,"left","0"),set_style(c,"top","0"),set_style(c,"width","100%"),set_style(c,"height","100%"),set_style(c,"overflow","auto"),set_style(c,"background-color","rgba(0,0,0,0.5)"),attr(w,"class","btn btn-danger mx-auto"),attr(j,"class","btn btn-primary mx-auto"),attr(b,"class","container mx-auto d-flex justify-content-center"),attr(P,"class","row"),attr(G,"class","container mx-auto d-flex justify-content-center")},m(I,d){insert(I,c,d),insert(I,K,d),insert(I,b,d),append(b,w),append(b,X),append(b,j),insert(I,st,d),insert(I,G,d),append(G,P),V[4](P),A||(F=[listen(w,"click",V[1]),listen(j,"click",V[2])],A=!0)},p:noop,i:noop,o:noop,d(I){I&&detach(c),I&&detach(K),I&&detach(b),I&&detach(st),I&&detach(G),V[4](null),A=!1,run_all(F)}}}function instance(V,c,K){let b,w;component_subscribe(V,params,F=>K(3,b=F)),component_subscribe(V,goto,F=>K(9,w=F));let X,j,st;pdf.exports.GlobalWorkerOptions.workerSrc="./node_modules/pdfjs-dist/build/pdf.worker.js";function G(){w("/ListPolicies")}onMount(async()=>{const F=document.getElementById("loadingModal");F.style.display="block";const{username:I,policyNumber:d}=b;let o="0.0.0.0";try{o=(await axios.get("https://api.ipify.org?format=json",{timeout:5e3})).data.ip}catch{console.log("Could not fetch IP, using default IP 0.0.0.0")}await axios.post("http://localhost:3000/capture",{policy_number:d,user_ip:o,username:I},{withCredentials:!0}),st=(await axios.get(`http://localhost:3000/getPdf?policyNumber=${d}`,{withCredentials:!0})).data.pdfUrl;const y=await pdf.exports.getDocument(st).promise;for(let C=1;C<=y.numPages;C++){const T=await y.getPage(C),_=T.getViewport({scale:2.5}),e=document.createElement("canvas");e.width=_.width,e.height=_.height,X.appendChild(e);const i={canvasContext:e.getContext("2d"),viewport:_};await T.render(i)}F.style.display="none"});function P(){const F=document.createElement("a");F.href=st,alert(st),F.download=j+".pdf",F.click()}onDestroy(()=>{for(;X.firstChild;)X.firstChild.remove()});function A(F){binding_callbacks[F?"unshift":"push"](()=>{X=F,K(0,X)})}return V.$$.update=()=>{V.$$.dirty&8&&(b.username,j=b.policyNumber)},[X,G,P,b,A]}class Pdf extends SvelteComponent{constructor(c){super(),init(this,c,instance,create_fragment,safe_not_equal,{})}}export{Pdf as default};
